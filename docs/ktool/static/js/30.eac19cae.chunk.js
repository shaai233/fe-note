(this.webpackJsonpktool=this.webpackJsonpktool||[]).push([[30],{1353:function(t,e,n){t.exports={content:"content--3KGOb",inputBox:"inputBox--G9KcO",search:"search--5AKqT",contentBox:"contentBox--rdcfV",linkView:"linkView--wUWJ2",empty:"empty--A4gbt"}},1760:function(t,e,n){"use strict";n.r(e);n(273);var r,c=n(180),a=(n(274),n(181)),u=(n(109),n(41)),i=(n(563),n(564)),o=(n(271),n(130)),s=(n(74),n(27)),l=n(8),f=n(15),b=n(5),p=n(631),j=n.n(p),d=n(0),h=n(98),O=n.n(h),v=n(630),m=n(97),x=n(48),w=n(101),g=n(593),y=n(49),k=n(31);!function(t){t.Success="\u751f\u6210\u6210\u529f\uff0c\u5df2\u590d\u5236\u5230\u526a\u5207\u677f",t.Warning="\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7f51\u5740",t.Error="\u751f\u6210\u5931\u8d25"}(r||(r={}));var C=function(t){return y.a.post("".concat(k.e,"/rest/shorturl"),{urlList:[t]}).then((function(t){var e=t.data.shortUrlList,n=e.length?e[0]:"";return n?Object(m.b)(n,r.Success):s.b.error(r.Error),n})).catch((function(){return s.b.error(r.Error),""}))},R=function(){var t=Object(f.a)(Object(l.a)().mark((function t(e){var n;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(m.g)(e)){t.next=7;break}return t.next=3,C(e);case 3:return n=t.sent,t.abrupt("return",n||"");case 7:return s.b.warning(r.Warning),t.abrupt("return","");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=n(1353),P=n.n(N),A=n(1);e.default=function(){var t=Object(d.useRef)(null),e=Object(d.useRef)(null),n=Object(d.useState)(""),r=Object(b.a)(n,2),p=r[0],h=r[1],y=Object(d.useState)(""),k=Object(b.a)(y,2),C=k[0],N=k[1],E=Object(v.a)(function(){var t=Object(f.a)(Object(l.a)().mark((function t(e){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=h,t.next=3,R(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),1e3),B=Object(d.useCallback)((function(){var e;if(!p)return s.b.warning("\u5f53\u524d\u6ca1\u6709\u8f93\u5165");var n=null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.children;Object(g.a)(n[0]),Object(x.a)("ShortLinkCopyImage")}),[t,p]),I=Object(d.useCallback)((function(){Object(m.a)(p),Object(x.a)("ShortLinkCopyTextArea")}),[p]),L=Object(d.useCallback)((function(t){var e=t.currentTarget.value;N(e),E(e)}),[E]);return Object(d.useEffect)((function(){Object(f.a)(Object(l.a)().mark((function t(){var e;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.c)();case 2:return e=t.sent,N(e),t.t0=h,t.next=7,R(e);case 7:t.t1=t.sent,(0,t.t0)(t.t1);case 9:case"end":return t.stop()}}),t)})))()}),[]),Object(A.jsxs)("div",{className:P.a.content,children:[Object(A.jsx)("div",{className:P.a.contentBox,style:{opacity:p?1:.1},ref:t,children:Object(A.jsx)(j.a,{value:p,size:128,level:"M"})}),Object(A.jsx)("div",{className:P.a.inputBox,children:Object(A.jsx)(o.a.TextArea,{allowClear:!0,value:C,ref:e,className:P.a.search,placeholder:"\u8bf7\u8f93\u5165URL\uff0c\u4f8b\u5982\uff1ahttps://www.kuaishou.com",onChange:L})}),Object(A.jsxs)("div",{className:P.a.contentBox,children:[Object(A.jsx)(i.a,{orientation:"center",children:"\u751f\u6210\u94fe\u63a5\u9884\u89c8"}),Object(A.jsx)("div",{className:P.a.linkView,children:p||Object(A.jsx)("span",{className:P.a.empty,children:"\u7a7a\u7a7a\u5982\u4e5f"})})]}),Object(A.jsxs)(c.a,{gutter:12,className:P.a.contentBox,children:[Object(A.jsx)(a.a,{span:12,children:Object(A.jsx)(u.a,{block:!0,size:"middle",type:"primary",onClick:B,children:"\u590d\u5236\u4e8c\u7ef4\u7801"})}),Object(A.jsx)(a.a,{span:12,children:Object(A.jsx)(O.a,{text:p,onCopy:I,children:Object(A.jsx)(u.a,{block:!0,size:"middle",type:"primary",children:"\u590d\u5236\u77ed\u94fe\u63a5"})})})]})]})}},180:function(t,e,n){"use strict";var r=n(505);e.a=r.a},181:function(t,e,n){"use strict";var r=n(207);e.a=r.a},273:function(t,e,n){"use strict";n(54),n(272)},274:function(t,e,n){"use strict";n(54),n(272)},563:function(t,e,n){"use strict";n(54),n(569)},564:function(t,e,n){"use strict";var r=n(4),c=n(3),a=n(6),u=n.n(a),i=n(0),o=n(70),s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(t);c<r.length;c++)e.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(t,r[c])&&(n[r[c]]=t[r[c]])}return n};e.a=function(t){var e,n=i.useContext(o.b),a=n.getPrefixCls,l=n.direction,f=t.prefixCls,b=t.type,p=void 0===b?"horizontal":b,j=t.orientation,d=void 0===j?"center":j,h=t.orientationMargin,O=t.className,v=t.children,m=t.dashed,x=t.plain,w=s(t,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),g=a("divider",f),y=d.length>0?"-".concat(d):d,k=!!v,C="left"===d&&null!=h,R="right"===d&&null!=h,N=u()(g,"".concat(g,"-").concat(p),(e={},Object(c.a)(e,"".concat(g,"-with-text"),k),Object(c.a)(e,"".concat(g,"-with-text").concat(y),k),Object(c.a)(e,"".concat(g,"-dashed"),!!m),Object(c.a)(e,"".concat(g,"-plain"),!!x),Object(c.a)(e,"".concat(g,"-rtl"),"rtl"===l),Object(c.a)(e,"".concat(g,"-no-default-orientation-margin-left"),C),Object(c.a)(e,"".concat(g,"-no-default-orientation-margin-right"),R),e),O),P=Object(r.a)(Object(r.a)({},C&&{marginLeft:h}),R&&{marginRight:h});return i.createElement("div",Object(r.a)({className:N},w,{role:"separator"}),v&&"vertical"!==p&&i.createElement("span",{className:"".concat(g,"-inner-text"),style:P},v))}},569:function(t,e,n){},586:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(8),c=n(3),a=n(15),u=function(){var t=Object(a.a)(Object(r.a)().mark((function t(e){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var u=document.createElement("canvas"),i=u.getContext("2d"),o=new Image;u.width=e.width,u.height=e.height,o.crossOrigin="Anonymous",o.src=e.toDataURL(),o.onload=function(){i.clearRect(0,0,u.width,u.height),i.drawImage(o,0,0),u.toBlob(function(){var e=Object(a.a)(Object(r.a)().mark((function e(a){var u;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=[new ClipboardItem(Object(c.a)({},a.type,a))],e.prev=1,e.next=4,navigator.clipboard.write(u).then((function(){t(!0)})).catch((function(){n(!1)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),n(!1);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}())}})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},593:function(t,e,n){"use strict";n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return d}));var r=n(5),c=(n(74),n(27)),a=n(978),u=n(97),i=n(49),o=n(586),s=n(31),l=null,f=!1,b=Object(a.a)(),p=[{title:"\u7eaf\u4e8c\u7ef4\u7801",internal:!1,tooltip:"\u7eaf\u4e8c\u7ef4\u7801\u6a21\u5f0f\uff0c\u53ea\u4f1a\u628a\u539f\u59cb\u4fe1\u606f\u6ce8\u5165\u5230\u4e8c\u7ef4\u7801\u4e2d",btnName:"radioQrcode"},{title:"\u540c\u6b65APP\u767b\u5f55\u6001",internal:!0,tooltip:"\u4f7f\u7528\u5feb\u624bAPP\u626b\u4e00\u626b\uff0c\u5373\u53ef\u767b\u5f55\u5230\u5f53\u524d\u6216\u6307\u5b9a\u9875\u9762",btnName:"radioApp"},{title:"APP\u6253\u5f00\u4efb\u610f\u9875\u9762",internal:!0,tooltip:"\u4f7f\u7528\u5feb\u624bAPP\u626b\u4e00\u626b\uff0c\u5373\u53ef\u5728\u7aef\u5185\u6253\u5f00\u4efb\u610f\u9875\u9762",btnName:"radioAnyPage"}],j=function(t){Object(o.a)(t).then((function(){c.b.success("\u590d\u5236\u6210\u529f")})).catch((function(){c.b.error("\u590d\u5236\u5931\u8d25")}))},d=function(t,e){var n="";switch(t){case 1:n="".concat(s.c,"/helper/mob?uuid=").concat(b),!f&&h(e);break;case 2:var r=new URL(e).search,c=(void 0===r?"":r).replace("?","").replace("url=","queryurl=");n="".concat(s.e,"/rest/redirect?url=").concat(encodeURIComponent(e),"&").concat(c),O();break;default:n=e,O()}return n},h=function(t){O(),l=setInterval((function(){v(t)}),2e3)},O=function(){l&&clearInterval(l)},v=function(t){var e=s.c;Object(u.g)(t)&&/qrcode/.test(window.location.pathname)?i.a.get("".concat(e,"/helper/token/get?id=").concat(b)).then((function(e){O(),Object.keys(e).forEach((function(n){try{!/message/.test(n)&&chrome.cookies.set({url:t,path:"/",name:n,value:e[n],expirationDate:Date.now()/1e3+604800}),f=!0}catch(r){}})),c.b.success("\u767b\u5f55\u6210\u529f\uff0c3\u79d2\u540e\u5173\u95ed\u63d2\u4ef6",3,(function(){window.close()})),chrome.tabs.query({active:!0,currentWindow:!0},(function(e){Object(r.a)(e,1)[0]&&chrome.tabs.update({url:t})}))})).catch((function(){})):O()}},630:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(0);function c(t,e,n){var c=this,a=Object(r.useRef)(null),u=Object(r.useRef)(0),i=Object(r.useRef)(null),o=Object(r.useRef)([]),s=Object(r.useRef)(),l=Object(r.useRef)(),f=Object(r.useRef)(t),b=Object(r.useRef)(!0);f.current=t;var p=!e&&0!==e&&"undefined"!==typeof window;if("function"!==typeof t)throw new TypeError("Expected a function");e=+e||0;var j=!!(n=n||{}).leading,d=!("trailing"in n)||!!n.trailing,h="maxWait"in n,O=h?Math.max(+n.maxWait||0,e):null;Object(r.useEffect)((function(){return b.current=!0,function(){b.current=!1}}),[]);var v=Object(r.useMemo)((function(){var t=function(t){var e=o.current,n=s.current;return o.current=s.current=null,u.current=t,l.current=f.current.apply(n,e)},n=function(t,e){p&&cancelAnimationFrame(i.current),i.current=p?requestAnimationFrame(t):setTimeout(t,e)},r=function(t){if(!b.current)return!1;var n=t-a.current,r=t-u.current;return!a.current||n>=e||n<0||h&&r>=O},v=function(e){return i.current=null,d&&o.current?t(e):(o.current=s.current=null,l.current)},m=function t(){var c=Date.now();if(r(c))return v(c);if(b.current){var i=c-a.current,o=c-u.current,s=e-i,l=h?Math.min(s,O-o):s;n(t,l)}},x=function(){for(var f=[],p=0;p<arguments.length;p++)f[p]=arguments[p];var d=Date.now(),O=r(d);if(o.current=f,s.current=c,a.current=d,O){if(!i.current&&b.current)return u.current=a.current,n(m,e),j?t(a.current):l.current;if(h)return n(m,e),t(a.current)}return i.current||n(m,e),l.current};return x.cancel=function(){i.current&&(p?cancelAnimationFrame(i.current):clearTimeout(i.current)),u.current=0,o.current=a.current=s.current=i.current=null},x.isPending=function(){return!!i.current},x.flush=function(){return i.current?v(Date.now()):l.current},x}),[j,h,e,O,d,p]);return v}}}]);
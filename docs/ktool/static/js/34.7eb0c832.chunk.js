(this.webpackJsonpktool=this.webpackJsonpktool||[]).push([[34],{1737:function(e,t,n){"use strict";n.r(t);n(520);var c=n(449),r=n(0),a=n(48),o=(n(273),n(180)),u=(n(274),n(181)),i=(n(109),n(41)),s=(n(271),n(130)),l=(n(85),n(44)),b=(n(430),n(216)),d=n(8),j=n(15),f=n(5),O=n(631),p=n.n(O),h=n(28),m=n(101),v=n(97),x=n(21),w=n(630),g=n(98),C=n.n(g),y=n(593),k=n(723),N=n.n(k),R=n(1),P=function(e){var t=Object(r.useState)(""),n=Object(f.a)(t,2),c=n[0],O=n[1],C=Object(r.useState)(0),k=Object(f.a)(C,2),P=k[0],A=k[1],q=Object(r.useState)(""),T=Object(f.a)(q,2),D=T[0],E=T[1],S=Object(r.useState)([]),z=Object(f.a)(S,2),F=z[0],I=z[1],L=Object(r.useRef)(null),Q=Object(r.useCallback)((function(e,t){O(Object(v.f)(Object(y.b)(e,t)))}),[]),M=Object(w.a)(function(){var e=Object(j.a)(Object(d.a)().mark((function e(t,n){return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q(t,n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),1e3),J=Object(r.useCallback)((function(e){var t=e.target.value;A(t),Q(t,D),Object(a.a)(y.c[t].btnName),Object(x.f)(h.a.PopFnSelected,t)}),[D,Q]),U=Object(r.useCallback)((function(e){var t=e.currentTarget.value;E(t),M(P,t)}),[P,M]),V=Object(r.useCallback)((function(){var e,t=null===L||void 0===L||null===(e=L.current)||void 0===e?void 0:e.children;Object(y.a)(t[0]),Object(a.a)("QRCodeCreateCopyImage")}),[]),B=Object(r.useCallback)((function(){Object(v.a)(D),Object(a.a)("QRCodeCreateCopyTextArea")}),[D]);return Object(r.useEffect)((function(){Object(j.a)(Object(d.a)().mark((function t(){var n,c;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.c)();case 2:return n=t.sent.replace("chrome://newtab/",""),t.next=5,Object(x.c)(h.a.PopFnSelected);case 5:if(t.t0=t.sent,t.t0){t.next=8;break}t.t0=0;case 8:c=t.t0,"newtab"===e.mode&&y.c.length>2&&y.c.splice(1,1),I(y.c),E(n),A(+c),O(Object(v.f)(Object(y.b)(+c,n)));case 14:case"end":return t.stop()}}),t)})))()}),[e.mode]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)("div",{className:N.a.qrcodebox,children:[Object(R.jsx)("div",{ref:L,children:Object(R.jsx)(p.a,{value:c,size:200})}),Object(R.jsx)("div",{className:N.a.scanner,children:Object(R.jsxs)("div",{className:N.a.box,children:[Object(R.jsx)("div",{className:N.a.line}),Object(R.jsx)("div",{className:N.a.angle})]})})]}),Object(R.jsxs)("div",{className:N.a.choosebox,children:[Object(R.jsx)(b.a.Group,{onChange:J,value:P,children:F.map((function(e,t){return Object(R.jsx)(l.a,{placement:"bottom",overlayClassName:N.a.radioTip,title:Object(R.jsxs)(R.Fragment,{children:[e.internal?Object(R.jsx)("div",{className:N.a.internal,children:"\u9650\u5185\u7f51\u73af\u5883\u4f7f\u7528"}):"",e.tooltip]}),children:Object(R.jsx)(b.a,{value:t,children:e.title})},t)}))}),Object(R.jsx)(s.a.TextArea,{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165URL\uff0c\u4f8b\u5982\uff1ahttps://www.kuaishou.com",value:D,className:N.a.search,onChange:U})]}),Object(R.jsxs)(o.a,{gutter:12,className:N.a.toolbox,children:[Object(R.jsx)(u.a,{span:12,children:Object(R.jsx)(i.a,{block:!0,size:"middle",type:"primary",onClick:V,children:"\u590d\u5236\u4e8c\u7ef4\u7801"})}),Object(R.jsx)(u.a,{span:12,children:Object(R.jsx)(g.CopyToClipboard,{text:D,onCopy:B,children:Object(R.jsx)(i.a,{block:!0,size:"middle",type:"primary",children:"\u590d\u5236\u8f93\u5165\u5185\u5bb9"})})})]})]})},A=(n(563),n(564)),q=(n(646),n(679)),T=(n(74),n(27)),D=n(2),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"},S=n(10),z=function(e,t){return r.createElement(S.a,Object(D.a)(Object(D.a)({},e),{},{ref:t,icon:E}))};z.displayName="PictureOutlined";var F=r.forwardRef(z),I=n(31),L=n(725),Q=n.n(L),M=function(){var e=Object(r.useState)(""),t=Object(f.a)(e,2),n=t[0],c=t[1],o=Object(r.useCallback)((function(){Object(v.a)(n),Object(a.a)("QRCodeReaderCopyTextArea")}),[n]);return Object(r.useEffect)((function(){var e=function(e){var t;Array.from((null===(t=e.clipboardData)||void 0===t?void 0:t.items)||[]).some((function(e){return/image/.test(e.type)}))&&(T.b.warning("\u6b63\u5728\u4e0a\u4f20"),Object(m.e)(e,"qrcode","".concat(I.e,"/rest/qrcode-reader")).then((function(e){e.data.qrcodeContext?(T.b.success("\u8bc6\u522b\u6210\u529f"),c(e.data.qrcodeContext)):T.b.error("\u56fe\u7247\u4e2d\u4e0d\u5305\u542b\u4e8c\u7ef4\u7801")})).catch((function(e){T.b.error("\u8bc6\u522b\u5931\u8d25")})))};return document.onpaste=e,function(){document.removeEventListener("paste",e)}}),[]),Object(R.jsxs)("div",{className:Q.a.content,children:[Object(R.jsxs)(q.a.Dragger,{name:"qrcode",className:Q.a.uploader,action:"".concat(I.e,"/rest/qrcode-reader"),accept:"image/png,image/jpeg",showUploadList:!1,onChange:function(e){var t=e.file.response;t&&1===+t.data.qrcodeStatus?(T.b.success("\u8bc6\u522b\u6210\u529f"),c(t.data.qrcodeContext)):T.b.error("\u8bc6\u522b\u5931\u8d25")},children:[Object(R.jsx)(F,{className:Q.a.picture}),Object(R.jsxs)("div",{className:Q.a.notice,children:["\u6253\u5f00/\u62d6\u62fd/\u7c98\u8d34Ctrl+V",Object(R.jsx)("br",{}),"\u5373\u53ef\u8bc6\u522b\u4e8c\u7ef4\u7801\u56fe\u7247"]})]}),Object(R.jsx)(A.a,{orientation:"center",children:"\u8bc6\u522b\u4fe1\u606f\u9884\u89c8"}),Object(R.jsx)(s.a.TextArea,{readOnly:!0,className:Q.a.preview,value:n}),Object(R.jsx)(C.a,{text:n,onCopy:o,children:Object(R.jsx)(i.a,{block:!0,size:"middle",type:"primary",children:"\u590d\u5236\u8bc6\u522b\u7684\u5185\u5bb9"})})]})},J=n(726),U=n.n(J);t.default=function(e){return Object(R.jsxs)(c.a,{tabPosition:"top",defaultActiveKey:"QRCodeCreate",className:U.a.content,onChange:function(e){Object(a.a)(e)},children:[Object(R.jsx)(c.a.TabPane,{tab:"\u751f\u6210",children:Object(R.jsx)(P,{mode:e.mode})},"QRCodeCreate"),Object(R.jsx)(c.a.TabPane,{tab:"\u8bc6\u522b",children:Object(R.jsx)(M,{})},"QRCodeReader")]})}},586:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c=n(8),r=n(3),a=n(15),o=function(){var e=Object(a.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var o=document.createElement("canvas"),u=o.getContext("2d"),i=new Image;o.width=t.width,o.height=t.height,i.crossOrigin="Anonymous",i.src=t.toDataURL(),i.onload=function(){u.clearRect(0,0,o.width,o.height),u.drawImage(i,0,0),o.toBlob(function(){var t=Object(a.a)(Object(c.a)().mark((function t(a){var o;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=[new ClipboardItem(Object(r.a)({},a.type,a))],t.prev=1,t.next=4,navigator.clipboard.write(o).then((function(){e(!0)})).catch((function(){n(!1)}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),n(!1);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}())}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},593:function(e,t,n){"use strict";n.d(t,"c",(function(){return j})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return O}));var c=n(5),r=(n(74),n(27)),a=n(978),o=n(97),u=n(49),i=n(586),s=n(31),l=null,b=!1,d=Object(a.a)(),j=[{title:"\u7eaf\u4e8c\u7ef4\u7801",internal:!1,tooltip:"\u7eaf\u4e8c\u7ef4\u7801\u6a21\u5f0f\uff0c\u53ea\u4f1a\u628a\u539f\u59cb\u4fe1\u606f\u6ce8\u5165\u5230\u4e8c\u7ef4\u7801\u4e2d",btnName:"radioQrcode"},{title:"\u540c\u6b65APP\u767b\u5f55\u6001",internal:!0,tooltip:"\u4f7f\u7528\u5feb\u624bAPP\u626b\u4e00\u626b\uff0c\u5373\u53ef\u767b\u5f55\u5230\u5f53\u524d\u6216\u6307\u5b9a\u9875\u9762",btnName:"radioApp"},{title:"APP\u6253\u5f00\u4efb\u610f\u9875\u9762",internal:!0,tooltip:"\u4f7f\u7528\u5feb\u624bAPP\u626b\u4e00\u626b\uff0c\u5373\u53ef\u5728\u7aef\u5185\u6253\u5f00\u4efb\u610f\u9875\u9762",btnName:"radioAnyPage"}],f=function(e){Object(i.a)(e).then((function(){r.b.success("\u590d\u5236\u6210\u529f")})).catch((function(){r.b.error("\u590d\u5236\u5931\u8d25")}))},O=function(e,t){var n="";switch(e){case 1:n="".concat(s.c,"/helper/mob?uuid=").concat(d),!b&&p(t);break;case 2:var c=new URL(t).search,r=(void 0===c?"":c).replace("?","").replace("url=","queryurl=");n="".concat(s.e,"/rest/redirect?url=").concat(encodeURIComponent(t),"&").concat(r),h();break;default:n=t,h()}return n},p=function(e){h(),l=setInterval((function(){m(e)}),2e3)},h=function(){l&&clearInterval(l)},m=function(e){var t=s.c;Object(o.g)(e)&&/qrcode/.test(window.location.pathname)?u.a.get("".concat(t,"/helper/token/get?id=").concat(d)).then((function(t){h(),Object.keys(t).forEach((function(n){try{!/message/.test(n)&&chrome.cookies.set({url:e,path:"/",name:n,value:t[n],expirationDate:Date.now()/1e3+604800}),b=!0}catch(c){}})),r.b.success("\u767b\u5f55\u6210\u529f\uff0c3\u79d2\u540e\u5173\u95ed\u63d2\u4ef6",3,(function(){window.close()})),chrome.tabs.query({active:!0,currentWindow:!0},(function(t){Object(c.a)(t,1)[0]&&chrome.tabs.update({url:e})}))})).catch((function(){})):h()}},630:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(0);function r(e,t,n){var r=this,a=Object(c.useRef)(null),o=Object(c.useRef)(0),u=Object(c.useRef)(null),i=Object(c.useRef)([]),s=Object(c.useRef)(),l=Object(c.useRef)(),b=Object(c.useRef)(e),d=Object(c.useRef)(!0);b.current=e;var j=!t&&0!==t&&"undefined"!==typeof window;if("function"!==typeof e)throw new TypeError("Expected a function");t=+t||0;var f=!!(n=n||{}).leading,O=!("trailing"in n)||!!n.trailing,p="maxWait"in n,h=p?Math.max(+n.maxWait||0,t):null;Object(c.useEffect)((function(){return d.current=!0,function(){d.current=!1}}),[]);var m=Object(c.useMemo)((function(){var e=function(e){var t=i.current,n=s.current;return i.current=s.current=null,o.current=e,l.current=b.current.apply(n,t)},n=function(e,t){j&&cancelAnimationFrame(u.current),u.current=j?requestAnimationFrame(e):setTimeout(e,t)},c=function(e){if(!d.current)return!1;var n=e-a.current,c=e-o.current;return!a.current||n>=t||n<0||p&&c>=h},m=function(t){return u.current=null,O&&i.current?e(t):(i.current=s.current=null,l.current)},v=function e(){var r=Date.now();if(c(r))return m(r);if(d.current){var u=r-a.current,i=r-o.current,s=t-u,l=p?Math.min(s,h-i):s;n(e,l)}},x=function(){for(var b=[],j=0;j<arguments.length;j++)b[j]=arguments[j];var O=Date.now(),h=c(O);if(i.current=b,s.current=r,a.current=O,h){if(!u.current&&d.current)return o.current=a.current,n(v,t),f?e(a.current):l.current;if(p)return n(v,t),e(a.current)}return u.current||n(v,t),l.current};return x.cancel=function(){u.current&&(j?cancelAnimationFrame(u.current):clearTimeout(u.current)),o.current=0,i.current=a.current=s.current=u.current=null},x.isPending=function(){return!!u.current},x.flush=function(){return u.current?m(Date.now()):l.current},x}),[f,p,t,h,O,j]);return m}},723:function(e,t,n){e.exports={qrcodebox:"qrcodebox--4Ay-J",scanner:"scanner--7CDqM",box:"box--yNVPu",line:"line--iB64k","radar-beam":"radar-beam--fSruw",angle:"angle--OYRQN",choosebox:"choosebox--C7j-h",search:"search--He6Xn",toolbox:"toolbox--DngCZ",radioTip:"radioTip--Qkxyv",internal:"internal---lNIJ"}},725:function(e,t,n){e.exports={content:"content--d3hHB",uploader:"uploader--p+ynt",picture:"picture--d6ChI",notice:"notice--EkPlt",preview:"preview--wFFJZ"}},726:function(e,t,n){e.exports={content:"content--Sul9a"}}}]);
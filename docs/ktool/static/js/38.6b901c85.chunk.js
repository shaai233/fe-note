(this.webpackJsonpktool=this.webpackJsonpktool||[]).push([[38],{1738:function(e,t,n){"use strict";n.r(t);n(273);var a=n(180),c=(n(274),n(181)),r=(n(109),n(41)),o=n(2),s=n(17),i=(n(271),n(130)),b=(n(563),n(564)),l=n(8),u=n(15),d=n(5),m=n(0),j=n(576),p=n(227),h=n.n(p),f=n(849),O=n(536),g=n(1751),x=n(1745),k=n(97),w=n(48),v=n(98),y=n.n(v),C=n(630),R=(n(74),n(27)),K=n(49),L=n(28),N=n(21),U={getRobotCacheList:function(){return Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.b)(L.a.PopKimRobotList);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},setRobotCacheList:function(e){Object(N.e)(L.a.PopKimRobotList,e)},getRobotCacheAtUser:function(){return Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.b)(L.a.PopKimRobotAtUser);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},setRobotCacheAtUser:function(e){Object(N.e)(L.a.PopKimRobotAtUser,e)},getRobotCacheMsg:function(){return Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.b)(L.a.PopKimRobotMsg);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},setRobotCacheMsg:function(e){Object(N.e)(L.a.PopKimRobotMsg,e)},sendToKimRobot:function(e){var t=e.msg,n=e.atUser,a=e.robotKey;if(t)if(a){var c={msgtype:"markdown",markdown:{content:t,mentioned_list:[]}};n&&(c.markdown.mentioned_list=n.replace(/@/g,"").replace(/all/g,"@all").split(";")),K.a.post("https://is.corp.kuaishou.com/wx/robot/send?robot_id=".concat(a),c).then((function(){R.b.success("\u53d1\u9001\u5b8c\u6210")})).catch((function(){R.b.error("\u53d1\u9001\u5931\u8d25")}))}else R.b.warning("\u8bf7\u8bbe\u7f6e\u673a\u5668\u4eba\u7684Key");else R.b.warning("\u8bf7\u586b\u5199\u6d88\u606f\u5185\u5bb9")}},A=(n(587),n(590)),F=(n(280),n(195)),S=(n(298),n(88)),I=n(1742),B=n(510),P=n(824),T=n.n(P),M=n(1),V=["key","name"],z=function(e){var t=e.onSave,n=e.atUser,a=e.robotData,c=S.a.useForm(),l=Object(d.a)(c,1)[0],u=Object(m.useCallback)((function(e){var n=e.atUser,a=e.robotList,c=a.filter((function(e){return!!e.used}));c.length?c.length>1?R.b.warning("\u6bcf\u6b21\u6700\u591a\u53ea\u80fd\u542f\u7528\u4e00\u4e2a\u673a\u5668\u4eba"):(R.b.success("\u673a\u5668\u4eba\u8bbe\u7f6e\u4fdd\u5b58\u6210\u529f"),t(n,c[0].key),U.setRobotCacheAtUser(n),U.setRobotCacheList(JSON.stringify(a))):R.b.warning("\u81f3\u5c11\u8981\u542f\u7528\u4e00\u4e2a\u673a\u5668\u4eba")}),[t]),j=Object(m.useCallback)((function(e,t){if(e.robotList){var n=e.robotList.findIndex((function(e){return e&&"boolean"===typeof e.used}));(e.robotList[n]||{}).used&&t.robotList.map((function(e,t){return t!==n&&e&&(e.used=!1),e})),l.setFieldsValue({robotList:t.robotList})}}),[l]);return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(b.a,{orientation:"center",children:"KimRot\u8bbe\u7f6e"}),Object(M.jsxs)(S.a,{form:l,name:"kimRobotForm",onFinish:u,onValuesChange:j,initialValues:{atUser:n,robotList:a},className:T.a.settingFrom,children:[Object(M.jsx)(S.a.List,{name:"robotList",children:function(e,t){var n=t.add,a=t.remove;return Object(M.jsxs)(M.Fragment,{children:[e.map((function(e){var t=e.key,n=e.name,c=Object(s.a)(e,V);return Object(M.jsxs)(A.b,{style:{display:"flex"},align:"baseline",children:[Object(M.jsx)(S.a.Item,Object(o.a)(Object(o.a)({},c),{},{name:[n,"key"],fieldKey:[t,"key"],rules:[{required:!0,message:"\u8bf7\u8bbe\u7f6ekey"}],children:Object(M.jsx)(i.a,{placeholder:"Key",maxLength:40})})),Object(M.jsx)(S.a.Item,Object(o.a)(Object(o.a)({},c),{},{name:[n,"desc"],fieldKey:[t,"desc"],rules:[{required:!0,message:"\u8bf7\u8bbe\u7f6e\u63cf\u8ff0"}],children:Object(M.jsx)(i.a,{placeholder:"\u63cf\u8ff0",maxLength:20})})),Object(M.jsx)(S.a.Item,Object(o.a)(Object(o.a)({},c),{},{name:[n,"used"],fieldKey:[t,"used"],valuePropName:"checked",children:Object(M.jsx)(F.a,{checkedChildren:"\u5f00",unCheckedChildren:"\u5173"})})),Object(M.jsx)(I.a,{onClick:function(){return a(n)}})]},t)})),Object(M.jsx)(S.a.Item,{children:Object(M.jsx)(r.a,{block:!0,type:"dashed",size:"small",icon:Object(M.jsx)(B.a,{}),className:T.a.addButton,onClick:function(){n()},children:"\u6dfb\u52a0\u673a\u5668\u4eba"})})]})}}),Object(M.jsx)(S.a.Item,{name:"atUser",children:Object(M.jsx)(i.a,{allowClear:!0,placeholder:"@\u6240\u6709\u4eba;@\u5177\u4f53\u4eba \u8bed\u6cd5\u793a\u4f8b\uff1aall;xx01;xx02"})}),Object(M.jsx)(S.a.Item,{style:{marginBottom:0},children:Object(M.jsx)(r.a,{block:!0,type:"primary",size:"small",htmlType:"submit",children:"\u4fdd\u5b58\u8bbe\u7f6e"})})]})]})},J=(n(85),n(44)),D=(n(223),n(148)),E=n(825),H=n.n(E),_=[{title:"\u4ea7\u54c1\u63a8\u5e7f",preview:"https://static.yximgs.com/udata/pkg/ks-ad-fe/chrome-plugin-upload/2021-07-28/1627453964609.1af25bf13f57b847.png",content:'[![banner](https://static.yximgs.com/udata/pkg/ks-ad-fe/chrome-plugin-upload/2021-07-28/1627452431230.3d5f11779530c1e0.png)](https://www.kuaishou.com)\n        \r<font size=4> **[\u6807\u9898\uff0c\u56fe\u7247\u53ef\u4f7f\u7528\u63d2\u4ef6\u4e2d\u7684"\u6587\u4ef6\u4e0a\u4f20"](https://www.kuaishou.com)** </font>\n        \r-> [ **\u529f\u80fdA** ]\u529f\u80fd\u7b80\u4ecb\n        \r-> [ **\u529f\u80fdB** ]\u529f\u80fd\u7b80\u4ecb\n        \r-> [ **\u529f\u80fdC** ]\u529f\u80fd\u7b80\u4ecb\n        \r#### \u529f\u80fd\u5f15\u5bfc-> [\u7acb\u5373\u4f7f\u7528](https://www.kuaishou.com)\n        \r<font color=red>\u8fd9\u91cc\u662f\u9ad8\u4eae\u5185\u5bb9</font>\n        \r**\ud83d\udccd<font size=2>\u8865\u5145\u94fe\u63a5A\uff1a[https://www.kuaishou.com](https://www.kuaishou.com)</font>**\n        \r**\ud83d\udcc8<font size=2>\u8865\u5145\u94fe\u63a5B\uff1a[https://www.kuaishou.com](https://www.kuaishou.com)</font>**'},{title:"\u6d3b\u52a8\u4fe1\u606f",preview:"https://static.yximgs.com/udata/pkg/ks-ad-fe/chrome-plugin-upload/2021-07-28/1627458841097.1329a8cb93117381.png",content:"## \u6d3b\u52a8\u540d\u79f0\n        \r---\n        \r\u3010**\u6d3b\u52a8\u65f6\u95f4**\u30112021\u5e748\u67081\u65e5\n        \r\u3010**\u6d3b\u52a8\u5730\u70b9**\u3011\u5317\u4eac\u5e02\u6d77\u6dc0\u533a\u897f\u4e8c\u65d7\u5317\u8def\n        \r\u3010**\u6ce8\u610f\u4e8b\u9879**\u3011<font color=red>\u8fd9\u91cc\u662f\u6ce8\u610f\u4e8b\u9879</font>\n        \r**\ud83d\udccd\u8def\u7ebf\u63a8\u8350**\n        \r![banner](https://static.yximgs.com/udata/pkg/ks-ad-fe/chrome-plugin-upload/2021-07-28/1627457948612.f6d6a1d765b0acd4.png)"},{title:"\u6280\u672f\u5206\u4eab",preview:"https://static.yximgs.com/udata/pkg/ks-ad-fe/chrome-plugin-upload/2021-07-28/1627457083089.edc1c8bf5fc039fe.png",content:"## \u6280\u672f\u5206\u4eab<font color=red>\u7b2c5\u671f</font>\u5f00\u8bb2\u5566\n        \r![banner](https://static.yximgs.com/udata/pkg/ks-ad-fe/chrome-plugin-upload/2021-07-28/1627454161705.3a32336c840a0376.png)\n        \r---  \n        \r\u3010**\u672c\u671f\u4e3b\u9898**\u3011\u4e3b\u9898\u540d\u79f0\n        \r\u3010**\u5206\u4eab\u5609\u5bbe**\u3011\u5bbf\u534e\n        \r\u3010**\u5206\u4eab\u65f6\u95f4**\u30112020\u5e748\u67081\u65e5 <font color=red>10:30</font>\n        \r\u3010**\u7ebf\u4e0a\u5730\u5740**\u3011[https://www.kuaishou.com](https://www.kuaishou.com)\n        \r**\ud83d\udccd\u7cbe\u5f69\u63d0\u524d\u770b**\n        \r5G\u65b0\u6570\u5b57\u5316\u65f6\u4ee3\uff0c\u7c89\u4e1d\u7ecf\u6d4e\u548c\u5185\u5bb9\u8425\u9500\u53c8\u5c06\u78b0\u649e\u51fa\u4ec0\u4e48\u82b1\u706b\uff1f\u6b22\u8fce\u8d70\u8fdb\u672c\u671f\u5546\u4e1a\u5316\u5206\u4eab\u4f1a\u300a\u805a\u661f\uff1a\u8da3\u5473\u4e0e\u6311\u6218\u9f50\u98de\uff0c\u9760\u8c31\u5171\u4f18\u79c0\u4e00\u8272\u300b"},{title:"\u91cd\u8981\u4e8b\u4ef6",preview:"https://static.yximgs.com/udata/pkg/ks-ad-fe/chrome-plugin-upload/2021-10-26/1635216710323.b6c2bb4babeaf5bf.png",content:"![banner](https://static.yximgs.com/udata/pkg/ks-ad-fe/chrome-plugin-upload/2021-09-28/1632799425619.67f8a17b34272c14.png)\n        \r## <font color=red>2021\u56fd\u5e86\u8282\u5c01\u7f51\u901a\u77e5</font>\n        \r---\n        \r\u4e3a\u4fdd\u8bc12021\u5e74\u56fd\u5e86\u8282\u7a33\u5b9a\uff0c\u56fd\u5e86\u8282\u5c01\u7f51\u65f6\u95f4\u662f\uff1a**<font color=red>9\u670830\u65e519:00-10\u67088\u65e59:00</font>**\n        \r\n        \r1\u3001\u539f\u5219\u4e0a\u4e0d\u5141\u8bb8\u548c\u6d3b\u52a8\u65e0\u5173\u7684feature\u548c\u65b0\u7b56\u7565\u4e0a\u7ebf\uff0c\u53ea\u5141\u8bb8bugfix\uff0c\u9884\u6848\u7b49\u5fc5\u8981\u53d8\u66f4\u3002\u7a33\u5b9a\u6027\u89d2\u5ea6\u6765\u770b\uff0c\u6ca1\u6709\u7d27\u6025\u7684\u9700\u6c42\uff0c\u53ea\u6709\u7d27\u6025\u7684bug\uff1b\n        \r\n        \r2\u3001\u671f\u95f4\u5bf9bugfix\uff0c\u56de\u6eda\uff0c\u6269\u5bb9\u7b49\u5c5e\u4e8e\u6b62\u635f\u624b\u6bb5\u7684\u53d8\u66f4\uff0c\u4e0d\u505a\u5f3a\u5236\u5c01\u7981\uff0c\u4e0d\u8fc7\u4efb\u4f55\u53d8\u66f4\u90fd\u8bf7\u8d1f\u8d23\u7684\u540c\u5b66\u505a\u597dcheck\uff0c\u4ee5\u53ca\u51c6\u5907\u597d\u56de\u6eda\u65b9\u6848\uff1b\n        \r\n        \r3\u3001\u5c01\u7f51\u624b\u6bb5\u5e76\u975e\u5b8c\u5168\u65e0\u6cd5\u505a\u53d8\u66f4\uff0c\u800c\u662f\u5728\u7814\u53d1\u4e91/ab\u5e73\u53f0\u7b49\u591a\u4e00\u9053\u53d8\u66f4\u5ba1\u6279\uff0c\u8bf7\u5404\u4ea7\u54c1\u540c\u5b66\u4e3a\u8282\u65e5\u671f\u95f4\u7684\u7a33\u5b9a\u6027\u8d1f\u8d23\uff0c\u614e\u91cd\u8bc4\u4f30\u53d8\u66f4\u7684\u5f71\u54cd\u548c\u98ce\u9669\u3002\n        \r\n        \r\u8bf7\u5927\u5bb6\u63d0\u524d\u5b89\u6392\u597d\u4e0a\u7ebf\uff0c\u987a\u795d\u8282\u65e5\u5feb\u4e50\uff01"}],q=function(e){var t=Object(m.useCallback)((function(t){D.a.confirm({title:"\u4f7f\u7528\u6a21\u677f\u5c06\u66ff\u6362\u7f16\u8f91\u533a\u7684\u5185\u5bb9",okText:"\u786e\u8ba4\u4f7f\u7528",cancelText:"\u53d6\u6d88",onOk:function(){R.b.success("".concat(t.title,"\u7684\u6a21\u677f\u5185\u5bb9\u5df2\u540c\u6b65\u5230\u7f16\u8f91\u533a\uff0c\u8bf7\u7ee7\u7eed\u4fee\u6539\u4f60\u7684\u5185\u5bb9")),e.onSelected(t.content)}})}),[e]);return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(b.a,{orientation:"center",className:H.a.divider,children:"\u63a8\u8350\u6a21\u677f"}),Object(M.jsx)("div",{className:H.a.content,children:_.map((function(e,n){return Object(M.jsx)(J.a,{placement:"bottomLeft",title:Object(M.jsx)("img",{alt:"",className:H.a.teamView,src:e.preview}),children:Object(M.jsx)("div",{className:H.a.tempItem,onClick:t.bind(null,e),children:e.title})},n)}))})]})},W=n(826),G=n.n(W),Z=["node","inline","className","children"];t.default=function(){var e=Object(m.useState)(!1),t=Object(d.a)(e,2),n=t[0],p=t[1],v=Object(m.useState)([]),R=Object(d.a)(v,2),K=R[0],L=R[1],N=Object(j.a)({msg:"",atUser:"",robotKey:""}),A=Object(d.a)(N,2),F=A[0],S=A[1],I=Object(C.a)(function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U.setRobotCacheMsg(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),300),B=Object(m.useCallback)((function(e){var t=e.currentTarget.value;S((function(e){e.msg=t})),I(t)}),[I,S]),P=Object(m.useCallback)((function(e){S((function(t){t.msg=e})),I(e),Object(w.a)("KimRobotTempSelected")}),[I,S]),T=Object(m.useCallback)((function(e,t){S((function(n){n.atUser=e,n.robotKey=t}))}),[S]),V=Object(m.useCallback)((function(){Object(k.a)(F.msg)}),[F]),J=Object(m.useCallback)((function(){U.sendToKimRobot(F),Object(w.a)("KimRobotSendMessage")}),[F]),D=Object(m.useCallback)((function(e,t,n){var a=JSON.parse(n),c=a.filter((function(e){return!!e.used})),r=c.length?c[0].key:"";L(a),S((function(n){n.msg=e.replace(/\\r/g,"\r").replace(/\\n/g,"\n"),n.atUser=t,n.robotKey=r}))}),[S]);return Object(m.useEffect)((function(){Object(u.a)(Object(l.a)().mark((function e(){var t,n,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.getRobotCacheMsg();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0="";case 5:return t=e.t0,e.next=8,U.getRobotCacheAtUser();case 8:if(e.t1=e.sent,e.t1){e.next=11;break}e.t1="";case 11:return n=e.t1,e.next=14,U.getRobotCacheList();case 14:if(e.t2=e.sent,e.t2){e.next=17;break}e.t2="[]";case 17:a=e.t2,D(t,n,a),p(!0);case 20:case"end":return e.stop()}}),e)})))()}),[D]),Object(M.jsx)("div",{className:G.a.content,children:n&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(q,{onSelected:P}),Object(M.jsxs)("div",{className:G.a.kimCode,children:[Object(M.jsx)("b",{children:"Kim\u4e13\u5c5e\u6a21\u677f\u8bed\u6cd5"}),Object(M.jsx)("div",{children:"@\u6240\u6709\u4eba\uff1a<@=all=>"}),Object(M.jsx)("div",{children:"@\u5177\u4f53\u4eba\uff1a<@=username(\u90ae\u7bb1\u524d\u7f00)=>"}),Object(M.jsx)("div",{children:"\u53c2\u8003\u793a\u4f8b\uff1a\u6b22\u8fce<@=username(zhansan01)=>\u540c\u5b66\u52a0\u5165\u6211\u4eec~"})]}),Object(M.jsx)(b.a,{orientation:"center",children:"\u6d88\u606f\u5185\u5bb9-\u5373\u65f6\u4fdd\u5b58"}),Object(M.jsx)(i.a.TextArea,{allowClear:!0,value:F.msg,maxLength:2048,className:G.a.textArea,onChange:B,placeholder:"\u652f\u6301Markdown"}),Object(M.jsx)(b.a,{orientation:"center",children:"\u6d88\u606f\u9884\u89c8"}),Object(M.jsx)(O.a,{children:F.msg,className:G.a.markdown,rehypePlugins:[h.a],remarkPlugins:[f.a],components:{code:function(e){e.node;var t=e.inline,n=e.className,a=e.children,c=Object(s.a)(e,Z),r=/language-(\w+)/.exec(n||"");return!t&&r?Object(M.jsx)(g.a,Object(o.a)({children:String(a).replace(/\n$/,""),style:x.a,language:r[1],PreTag:"div"},c)):Object(M.jsx)("code",Object(o.a)(Object(o.a)({className:n},c),{},{children:a}))}}}),Object(M.jsx)(z,{onSave:T,atUser:F.atUser,robotData:K}),Object(M.jsxs)(a.a,{gutter:12,className:G.a.buttonBox,children:[Object(M.jsx)(c.a,{span:12,children:Object(M.jsx)(y.a,{text:F.msg,onCopy:V,children:Object(M.jsx)(r.a,{block:!0,type:"primary",children:"\u590d\u5236\u539f\u59cb\u5185\u5bb9"})})}),Object(M.jsx)(c.a,{span:12,children:Object(M.jsx)(r.a,{block:!0,type:"primary",onClick:J,children:"\u53d1\u9001\u7ed9\u673a\u5668\u4eba"})})]})]})})}},824:function(e,t,n){e.exports={settingFrom:"settingFrom--RvO6K",addButton:"addButton--T4ZFm"}},825:function(e,t,n){e.exports={content:"content--DhFCE",tempItem:"tempItem--5EclS",divider:"divider--OIBAV",teamView:"teamView--a9N3H"}},826:function(e,t,n){e.exports={content:"content--MOlHl",textArea:"textArea--R-4h4",markdown:"markdown--W9HbN",buttonBox:"buttonBox--tg19N",kimCode:"kimCode--l5Wfo"}}}]);
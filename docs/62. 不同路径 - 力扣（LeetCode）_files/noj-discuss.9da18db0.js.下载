(window.nojMonomainwebpackJsonpproduction=window.nojMonomainwebpackJsonpproduction||[]).push([[147],{"+75L":function(e,t,n){"use strict";n.d(t,"g",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return l})),n.d(t,"j",(function(){return i})),n.d(t,"n",(function(){return _})),n.d(t,"l",(function(){return g})),n.d(t,"x",(function(){return m})),n.d(t,"k",(function(){return f})),n.d(t,"e",(function(){return O})),n.d(t,"d",(function(){return j})),n.d(t,"f",(function(){return y})),n.d(t,"o",(function(){return v})),n.d(t,"m",(function(){return h})),n.d(t,"r",(function(){return A})),n.d(t,"t",(function(){return S})),n.d(t,"s",(function(){return w})),n.d(t,"v",(function(){return k})),n.d(t,"q",(function(){return x})),n.d(t,"p",(function(){return D})),n.d(t,"u",(function(){return E})),n.d(t,"w",(function(){return F})),n.d(t,"h",(function(){return T})),n.d(t,"i",(function(){return I}));var a,i,c=n("nnm9"),o=n.n(c),r=n("ERkP"),u=n.n(r),s=n("34li"),d=10,p=5,b=(s.n.Hot,s.n.Latest,s.n.Hot,s.n.Latest,[{key:s.Yb.Hottest,name:"\u6700\u70ed"},{key:s.Yb.Latest,name:"\u6700\u65b0"}]),l=[{key:s.Xb.Hottest,name:"\u6700\u70ed"},{key:s.Xb.Latest,name:"\u6700\u65b0"}];!function(e){e.Interview="interview",e.Career="career",e.Other="other",e.Feedback="feedback"}(i||(i={}));var f,O,j,y,_=i.Interview,g="notes",m=((a={})[i.Interview]="\u6c42\u804c\u9762\u8bd5",a[i.Career]="\u804c\u573a\u4e0e\u5185\u63a8",a[i.Other]="\u6280\u672f\u4ea4\u6d41",a[i.Feedback]="\u610f\u89c1\u53cd\u9988",a);!function(e){e.NEWEST="newest",e.RECOMMEND="recommend",e.HOTTEST="hottest"}(f||(f={})),function(e){e.back="back",e.answers="answers",e.questions="questions"}(O||(O={})),function(e){e.back="back",e.answers="answers",e.articles="articles"}(j||(j={})),function(e){e.back="back",e.questions="questions",e.articles="articles"}(y||(y={}));var v=Symbol("discussion"),h=Symbol("article"),A=Symbol("my-comments"),S=Symbol("my-favorite-articles"),w=Symbol("my-favorite-answers"),k=Symbol("my-follow-articles"),x=Symbol("my-articles"),D=(Symbol("my-draft"),Symbol("my-answers")),E=Symbol("my-questions"),F=Symbol("recommendation"),T="discuss-score-visibility",I=u.a.createContext({scoreVisible:!0,toggleScoreVisible:o.a})},"+Aeu":function(e,t,n){"use strict";var a=n("zF28");n.d(t,"m",(function(){return a.a})),n.d(t,"n",(function(){return a.c})),n.d(t,"o",(function(){return a.d})),n.d(t,"p",(function(){return a.e})),n.d(t,"q",(function(){return a.f}));var i=n("wbrp");n.d(t,"a",(function(){return i.c})),n.d(t,"b",(function(){return i.d})),n.d(t,"c",(function(){return i.e})),n.d(t,"e",(function(){return i.g})),n.d(t,"f",(function(){return i.h}));var c=n("A83I");n.d(t,"d",(function(){return c.b}));var o=n("W4BP");n.d(t,"g",(function(){return o.a})),n.d(t,"h",(function(){return o.b})),n.d(t,"i",(function(){return o.c})),n.d(t,"j",(function(){return o.d})),n.d(t,"k",(function(){return o.e})),n.d(t,"l",(function(){return o.f}))},"+gd7":function(e,t,n){"use strict";n.d(t,"a",(function(){return Q}));var a=n("D57K"),i=n("ERkP"),c=n.n(i),o=n("YnR9"),r=n("1QlS"),u=n("q+Tr"),s=n("WWwk"),d=n("ttV/"),p=n("ildc"),b=n("5ZzG"),l=n("0FzZ"),f=n("zF28"),O=n("fgAA"),j=n("xqpu"),y=n("OJn1"),_=n("uhKY"),g=n("CZCR"),m=n("Aw0H"),v=n("AbD5"),h=n("M+N8"),A=n("cPtI"),S=n("VxrX"),w=n("6H+M"),k=n("8SGJ"),x=o.a.main.paths,D=c.a.memo((function(e){var t=e.questionAuthorSuffix,n=void 0===t?"\u697c\u4e3b":t,a=e.questionAuthorSlug,o=e.userSlug,r=e.name,u=e.avatar,s=e.anonymous,d=e.createdAt,b=e.picked,l=e.ipRegion,f=""===o,D=Object(i.useContext)(j.d).isAdmin,E=Object(y.a)(d),F=D&&s?r+"\uff08\u533f\u540d\u53d1\u5e03\uff09":r,T=!(!a||a!==o),I=Object(i.useCallback)((function(e){e.preventDefault(),e.stopPropagation()}),[]),q=Object(i.useCallback)((function(e){S.a.discuss.discussClickAvatarOrName(),e.stopPropagation(),e.preventDefault(),f||(window.location.href=x.publicProfile.home({userSlug:o}))}),[o,f]);return c.a.createElement(k.c,{onClick:I},c.a.createElement(h.a,{userSlug:o},c.a.createElement(k.d,{onClick:q,isMobile:Object(p.q)()},!Object(p.q)()&&c.a.createElement(k.a,{src:Object(_.b)(u,22)}),c.a.createElement(m.a,{shouldStrip:f},c.a.createElement("a",{href:x.publicProfile.home({userSlug:o})},c.a.createElement(A.a,{userSlug:o,realName:F,className:Object(k.h)(Object(p.q)()),defaultColor:O.a.grey(5)}),T&&!f&&c.a.createElement(k.e,null," \xb7 ",n))))),c.a.createElement(k.b,{isMobile:Object(p.q)()},b&&!Object(p.q)()&&c.a.createElement(v.a,{kind:"green",size:"xs",content:"\u7cbe\u9009"}),c.a.createElement(k.f,{isMobile:Object(p.q)()},Object(p.q)()?c.a.createElement(c.a.Fragment,null,"\xa0\xb7\xa0"):null,c.a.createElement("span",null,Object(g.b)(l)),c.a.createElement(w.d,null),c.a.createElement("span",null,E))))})),E=n("X7IW"),F=n("lDJ/"),T=n("y9R/"),I=n("PbXi"),q=o.a.main.paths,C=c.a.memo((function(e){var t=e.content,n=e.isAnonymous,o=e.author,r=e.isDeleted,u=e.uuid,d=e.fetchAnswerPageInfo,p=Object(a.__read)(Object(i.useState)(""),2),b=p[0],l=p[1];Object(s.a)((function(){var e=F.b.render(t),n=document.createElement("div");n.innerHTML=e,l(Object(T.b)(n,[]))}),[t]);var f=Object(i.useCallback)((function(){null===d||void 0===d||d({answerId:u,effects:[]})}),[d,u]);return c.a.createElement(I.b,null,r?c.a.createElement(I.e,null,c.a.createElement(I.f,{size:18}),c.a.createElement(I.c,null,"\u5185\u5bb9\u5236\u4f5c\u4e2d")):c.a.createElement(I.d,{clickable:!!d,onClick:f},c.a.createElement(h.a,{userSlug:o.slug},c.a.createElement(m.a,{shouldStrip:n},c.a.createElement("a",{href:q.publicProfile.home({userSlug:o.slug})},c.a.createElement(I.a,{src:o.avatar})))),c.a.createElement(I.c,null,b)))})),R=n("2yfB"),P=n("W4BP"),N=o.a.main.paths;function L(e){var t=e.questionId,n=e.answerId;return N.discuss.viewShare({discussId:t,viewId:n})}var Q=c.a.memo((function(e){var t=e.onEdit,n=e.onReply,o=e.onAddReply,O=e.fetchAnswerPageInfo,j=e.getCopyLink,y=void 0===j?L:j,_=e.questionAuthorSlug,g=e.questionAuthorSuffix,m=e.forceExpanded,v=void 0!==m&&m,h=e.replyToVisible,A=void 0!==h&&h,S=e.isReplyExpanded,w=void 0!==S&&S,k=e.disabledOperations,x=Object(a.__rest)(e,["onEdit","onReply","onAddReply","fetchAnswerPageInfo","getCopyLink","questionAuthorSlug","questionAuthorSuffix","forceExpanded","replyToVisible","isReplyExpanded","disabledOperations"]),F=x.uuid,T=x.createdAt,I=x.content,q=x.author,N=q.name,Q=q.slug,M=q.avatar,B=x.parent,z=x.picked,G=x.replyTo,$=x.isAnonymous,W=x.ipRegion,H=Object(a.__read)(Object(i.useState)("default"),2),V=H[0],U=H[1],K=Object(a.__read)(Object(r.a)(!1),3),Y=K[0],X=K[1],J=K[2],Z=Object(i.useRef)(null),ee=Object(u.a)(Z),te=Object(a.__read)(Object(i.useMemo)((function(){return[t&&function(){return t(F)},o&&function(){return o(F,N)}]}),[t,F,o,N]),2),ne=te[0],ae=te[1],ie=Object(f.b)({answer:x,onEdit:ne,onReply:n,isReplyExpanded:w});Object(s.a)((function(){if(Z.current&&ee){var e=Z.current.getBoundingClientRect().height<R.e?"default":v?"expanded":"collapsed";U(e)}}),[I,v,ee]);var ce=Object(i.useCallback)((function(){"collapsed"===V&&U("expanded")}),[V]),oe=Object(i.useCallback)((function(){"expanded"===V&&U("collapsed")}),[V]),re=Object(d.a)([x],(function(){return Object(P.d)(N,y({questionId:B.uuid,answerId:F}))})),ue=Object(i.useCallback)((function(e){e.stopPropagation(),re(e)}),[re]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(D,{questionAuthorSuffix:g,questionAuthorSlug:_,userSlug:Q,name:N,avatar:M,anonymous:$,createdAt:T,picked:z,ipRegion:W}),G&&A&&c.a.createElement(C,Object(a.__assign)({},G,{fetchAnswerPageInfo:O})),c.a.createElement(R.f,{ref:Z,onClick:ce,collapsed:"collapsed"===V,isMobile:Object(p.q)()},"collapsed"===V&&c.a.createElement(R.g,{onMouseEnter:X,onMouseLeave:J}),c.a.createElement(R.d,{onCopy:ue,isMobile:Object(p.q)()},I)),c.a.createElement(R.c,{isMobile:Object(p.q)()},c.a.createElement(E.a,Object(a.__assign)({},ie,{disabledOperation:k})),"default"!==V&&c.a.createElement(R.a,{onClick:"expanded"===V?oe:ce,highlighted:Y},c.a.createElement(b.a,{type:"expanded"===V?"angle-up":"angle-down"}),"expanded"===V?"\u6536\u8d77\u5168\u6587":"\u5c55\u5f00\u5168\u6587"),!Object(p.q)()&&ae&&c.a.createElement(R.b,{onClick:ae,kind:"transparent",prefixIcon:c.a.createElement(l.a,null)},"\u6dfb\u52a0\u56de\u590d")))}))},"2yfB":function(e,t,n){"use strict";n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return j})),n.d(t,"a",(function(){return y})),n.d(t,"i",(function(){return _})),n.d(t,"b",(function(){return g})),n.d(t,"j",(function(){return m})),n.d(t,"k",(function(){return v})),n.d(t,"h",(function(){return h}));var a,i,c,o,r=n("f7k3"),u=n("TMWK"),s=n("fgAA"),d=n("lDJ/"),p=n("/NrN"),b=Object(u.a)(d.a,{target:"e1wiyo5l0"})({padding:0,marginTop:"6px"},(function(e){return e.isMobile?{marginTop:"10px"}:[]}),"label:AnswerMarkdownContent;"),l=Object(u.a)("div",{target:"e1wiyo5l1"})({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 0px 16px 0px",borderTop:"1px solid "+s.b.DividerSecondary(),"> div:first-of-type":{marginLeft:"-9px",marginTop:0,border:"none",padding:0}},(function(e){return e.isMobile?{paddingTop:"10px",borderTop:"none"}:{}}),"label:AnswerDetailOperation;"),f=Object(u.a)("div",{target:"e1wiyo5l2"})(((a={position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1,background:"linear-gradient(to bottom, "+s.a.grey(0,0)+" 0%,\n                                          "+s.a.grey(0,0)+" 70%,\n                                          "+s.a.grey(0)+" 100%)",cursor:"pointer"})[s.c]={background:"linear-gradient(to bottom, "+s.a.grey(0,0)+" 0%,\n                                            "+s.a.grey(0,0)+" 70%,\n                                            "+s.a.grey(3)+" 100%)"},a),"label:Mask;"),O=2e4,j=Object(u.a)("div",{target:"e1wiyo5l3"})({position:"relative",width:"100%",overflow:"hidden",marginBottom:"12px"},(function(e){return e.collapsed?{maxHeight:O+"px"}:{}}),(function(e){return e.isMobile?{marginBottom:"0px"}:{}}),"label:MarkdownWrapper;"),y=Object(u.a)("div",{target:"e1wiyo5l4"})((function(e){return{fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease",color:e.highlighted?s.a.grey(6):s.a.grey(5),":hover":{color:s.a.grey(5)},svg:{marginRight:"5px"}}}),"label:Action;"),_=Object(u.a)("div",{target:"e1wiyo5l5"})({paddingBottom:"16px"},"label:RepliesContainer;"),g=Object(u.a)(p.a,{target:"e1wiyo5l6"})({color:s.b.BaseGrey6()},"label:AddReplyButton;"),m=Object(u.a)("div",{target:"e1wiyo5l7"})(((i={padding:"8px 16px 0px 16px",background:s.b.BaseGrey1(),borderRadius:"7px",":not(:last-of-type)":{marginBottom:"12px"}})[""+g]={transition:"opacity .3s",opacity:0},i[":hover"]=((c={})[""+g]={opacity:1},c),i),"label:ReplyContainer;"),v=Object(r.b)({".ant-pagination":{".ant-pagination-item":{background:s.b.FillTertiary(),borderRadius:"5px",border:"none",fontSize:"12px",lineHeight:"24px",minWidth:"24px",height:"24px",a:{color:s.b.LabelSecondary()}},".ant-pagination-next, .ant-pagination-prev":{fontSize:"12px",lineHeight:"24px",minWidth:"24px",height:"24px",borderRadius:"5px",".ant-pagination-item-link":{background:s.b.FillTertiary(),border:"none"},button:{color:s.b.LabelSecondary()}},".ant-pagination-item-active":(o={background:s.b.White(),boxShadow:"0px 1px 2px "+s.b.fixed.Black(.1)+", 0px 2px 8px "+s.b.fixed.Black(.08)},o[s.c]={background:s.b.BaseGrey5()},o),".ant-pagination-item-ellipsis":{color:s.b.BaseGrey7()}}},"label:antdPaginationOverride;"),h=Object(u.a)("div",{target:"e1wiyo5l8"})(v,{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"12px","> button":{color:s.b.BaseGrey5()}},"label:PaginationContainer;")},"6H+M":function(e,t,n){"use strict";n.d(t,"i",(function(){return o})),n.d(t,"h",(function(){return r})),n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return b})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return f}));var a=n("TMWK"),i=n("fgAA"),c=n("/fpG"),o=Object(a.a)("div",{target:"eb2yap90"})({marginTop:"25px",display:"flex"},"label:TitleWrapper;"),r=Object(a.a)("div",{target:"eb2yap91"})({fontSize:"18px",lineHeight:"24px",paddingLeft:"5px",marginTop:"5px",color:i.a.grey(9),fontWeight:500,wordBreak:"break-word"},"label:Title;"),u=Object(a.a)("div",{target:"eb2yap92"})({display:"flex",justifyContent:"space-between",alignItems:"center",height:"32px"},"label:DescWrapper;"),s=Object(a.a)("div",{target:"eb2yap93"})({display:"flex",alignItems:"center","> a":{display:"flex",alignItems:"center",marginRight:"10px"},"> div:not(:last-of-type)":{marginRight:"10px"}},"label:InfoWrapper;"),d=Object(a.a)("div",{target:"eb2yap94"})({marginLeft:"auto",paddingLeft:"10px"},"label:BtnWrapper;"),p=Object(a.a)("div",{target:"eb2yap95"})({width:"4px",height:"4px",borderRadius:"100%",background:i.a.grey(3)},"label:Dot;"),b=Object(a.a)(c.a,{target:"eb2yap96"})({width:"32px",height:"32px",borderRadius:"50%",background:i.a.grey(3),marginRight:"10px"},"label:Avatar;"),l=b.withComponent("div"),f=(i.a.grey(6),Object(a.a)("div",{target:"eb2yap98"})({fontSize:"12px",color:i.a.grey(5),userSelect:"none"},"label:InfoItem;"))},"8SGJ":function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"f",(function(){return b})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return f})),n.d(t,"g",(function(){return O})),n.d(t,"h",(function(){return j})),n.d(t,"e",(function(){return y}));var a=n("D57K"),i=n("XKjd"),c=n("TMWK"),o=n("fgAA"),r=n("pqRN"),u=n("/fpG"),s=n("CkJS"),d=Object(c.a)(u.a,{target:"e64ett70"})({flexShrink:0,flexGrow:0,width:"22px",height:"22px",borderRadius:"100%",border:0,background:o.a.grey(2),marginRight:"10px",cursor:"pointer"},"label:Avatar;"),p=Object(c.a)("div",{target:"e64ett71"})({marginLeft:"auto",display:"flex",alignItems:"center"},(function(e){return e.isMobile?{marginLeft:"unset"}:{}}),"label:InfoWrapper;"),b=Object(c.a)("div",{target:"e64ett72"})({display:"flex",alignItems:"center",padding:0,marginLeft:"12px",color:o.b.BaseGrey5(),span:{margin:"0 8px"}},(function(e){return e.isMobile?{marginLeft:"0px",fontSize:"12px",lineHeight:"16px",color:o.b.BaseGrey6()}:{}}),"label:StyledPublishDate;"),l=Object(c.a)("div",{target:"e64ett73"})({display:"flex",alignItems:"center",height:"24px"},"label:MetaData;"),f=Object(c.a)("div",{target:"e64ett74"})({display:"flex",alignItems:"center"},(function(e){return e.isMobile?{a:{display:"inline-flex"}}:{}}),"label:ProfileWrapper;"),O=function(e){return Object(i.a)({"> span:first-of-type":Object(a.__assign)({maxWidth:e?"35px":"110px",":hover":{textDecoration:"underline",color:o.a.grey(8)}},r.l)})},j=function(e){return Object(i.a)(O(e),{"> span:first-of-type":{color:o.b.BaseGrey6(),maxWidth:"150px"}},e?{span:{fontSize:"12px",lineHeight:"16px"}}:{})},y=Object(c.a)("span",{target:"e64ett75"})(s.a.paragraph.md,{color:o.b.BaseGrey5()},"label:QuestionAuthor;")},A83I:function(e,t,n){"use strict";var a;n.d(t,"b",(function(){return a})),function(e){e.Reaction="Reaction",e.Comment="Comment",e.Share="Share",e.Favor="Favor",e.FeatureRequest="FeatureRequest",e.Reply="Reply",e.AllExtra="AllExtra"}(a||(a={}))},AF8X:function(e,t,n){"use strict";n.d(t,"m",(function(){return i})),n.d(t,"l",(function(){return o})),n.d(t,"n",(function(){return r})),n.d(t,"p",(function(){return d})),n.d(t,"r",(function(){return v})),n.d(t,"d",(function(){return A})),n.d(t,"u",(function(){return S})),n.d(t,"o",(function(){return s})),n.d(t,"j",(function(){return k})),n.d(t,"e",(function(){return x})),n.d(t,"k",(function(){return D})),n.d(t,"f",(function(){return E})),n.d(t,"g",(function(){return F})),n.d(t,"t",(function(){return I})),n.d(t,"i",(function(){return c})),n.d(t,"c",(function(){return q})),n.d(t,"a",(function(){return C})),n.d(t,"s",(function(){return R})),n.d(t,"q",(function(){return P})),n.d(t,"h",(function(){return B})),n.d(t,"b",(function(){return z}));var a=n("YnR9").a.main.paths,i=function(e){var t=e.id,n=e.post,i=n.content,c=n.voteUpCount,o=n.creationDate,r=e.numChildren,u=e.belonging,s="";switch(u&&u.kind){case"SOLUTION":var d=u.solution,p=d.slug,b=d.question.questionTitleSlug;s=a.questionDetail.solutionDetail({questionSlug:b,articleSlug:p})+""+t;break;case"QUESTION":b=u.question.questionTitleSlug;s=a.questionDetail.home({questionSlug:b})+"comments/"+t;break;case"ARTICLE":var l=u.article.uuid;s=a.discuss.articleDetail({articleId:l})+"comments/"+t;break;case"QA_ANSWER":var f=u.qaAnswer,O=f.uuid,j=f.parent.uuid;s=a.discuss.viewCommentShare({discussId:j,viewId:O,commentId:t})}return{id:t,content:i,voteUpCount:c,creationDate:o,replyNum:r||0,link:s}},c=function(e,t){return Number(t)-Number(e)<=1e3},o=function(e){var t=e.slug,n=e.uuid,a=e.title,i=e.identifier,o=e.resourceType,r=e.articleType,u=e.hitCount,s=e.pinnedGlobally,d=e.pinned,p=e.sunk,b=e.createdAt,l=e.updatedAt,f=e.thumbnail,O=e.subject,j=e.tags,y=e.author,_=y.username,g=y.profile,m=g.realName,v=g.userSlug,h=g.userAvatar,A=e.reactionType,S=e.reactionsV2,w=e.isMyFavorite,k=e.topic,x=e.summary,D=e.isEditorsPick,E=e.byLeetcode,F=e.status,T=e.score,I=e.favoriteCount;return{slug:t,identifier:i,resourceType:o,articleType:r,uuid:n,title:a,viewCount:u,pinnedGlobally:s,pinned:d,sunk:p,createdAt:b,updatedAt:l&&!c(b,l)?l:null,thumbnail:f,subject:O,tags:j.map((function(e){var t=e.name,n=e.slug;return{name:e.nameTranslated||t,slug:n}})),author:{name:m||_,slug:v,avatar:h},reactionType:A,reactionsV2:S||[],favored:w,commentCount:k&&k.commentCount||0,summary:x,picked:D,official:E,status:F,score:T||0,favoriteCount:I}},r=function(e){var t=e.uuid,n=e.title,a=e.updatedAt,i=e.thumbnail,c=e.tags,o=e.author,r=o.username,u=o.profile,s=u.realName,d=u.userSlug,p=u.userAvatar;return{uuid:t,title:n,updatedAt:a,thumbnail:i,tags:c.map((function(e){var t=e.name,n=e.slug;return{name:e.nameTranslated||t,slug:n}})),author:{name:s||r,slug:d,avatar:p}}},u=n("+Aeu"),s=function(e){var t,n=e.uuid,a=e.slug,i=e.title,o=e.identifier,r=e.resourceType,s=e.createdAt,d=e.updatedAt,p=e.thumbnail,b=e.summary,l=e.pinnedGlobally,f=e.pinned,O=e.sunk,j=e.numAnswers,y=e.numPeopleInvolved,_=e.numSubscribed,g=e.subscribed,m=e.status,v=e.subject,h=e.content,A=e.hitCount,S=e.byLeetcode,w=e.articleType,k=e.tags,x=e.score,D=e.contentAuthor,E=e.realAuthor,F=e.myAnswerId,T=e.alwaysShow,I=e.alwaysExpand,q=e.favoriteCount,C=e.isMyFavorite,R=e.reactionType,P=e.reactionsV2,N=e.isRecommended,L=e.isRecommendedGlobally,Q=e.isAnonymous,M=e.canEdit,B=e.atQuestionTitleSlug,z=e.ipRegion;try{t=B&&JSON.parse(B)}catch(e){console.error(e)}return{ipRegion:z,uuid:n,slug:a,identifier:o,resourceType:r,articleType:w,title:i,createdAt:s,updatedAt:d&&!c(s,d)?d:null,thumbnail:p,summary:b,content:h,pinnedGlobally:l,pinned:f,sunk:!!O,answerCount:j||0,involvedPeopleCount:y||0,viewCount:A||0,subscribedCount:_||0,subscribed:g,official:S,status:m,subject:v,score:x||0,author:Object(u.i)(Q,D,E),isAnonymous:Q,tags:k.map((function(e){return{name:e.nameTranslated||e.name,slug:e.slug,tagType:e.tagType}})),myAnswerId:F||null,alwaysShow:T,alwaysExpand:I,reactionType:R,reactionsV2:P||[],favoriteCount:q,isMyFavorite:C,isRecommended:N,isRecommendedGlobally:L,canEdit:M,atQuestionTitleSlug:t}},d=function(e){return"QAAnswerNode"===e.__typename?Object(u.l)(e):s(e)},p=n("D57K"),b=n("//nZ"),l=n.n(b),f=n("nnRT"),O=n.n(f),j=n("pu3o"),y=n.n(j),_=n("ERkP"),g=n("zCf4"),m=["page","query","tag"],v=function(e){return y.a.parse(e,{ignoreQueryPrefix:!0})},h=function(e,t){void 0===t&&(t=m);var n={page:"1",query:"",tag:[]},a=l()(n,t);return Object.keys(a).reduce((function(t,n){var i;return void 0===e[n]?Object(p.__assign)(Object(p.__assign)({},t),((i={})[n]=a[n],i)):t}),e)},A=function(){return m},S=function(e){var t=e.validQueryKeys,n=void 0===t?["page","query","tag"]:t,a=e.setPage,i=e.setQuery,c=e.verifyTagSlugs,o=Object(_.useRef)(!0),r=Object(g.h)(),u=Object(g.i)(),s=u.pathname,d=u.search,p=u.state,b=h(v(d),n),l=b.page,f=b.query,j=b.tag,m={page:"1",query:"",tag:[]},A=Array.isArray(j)?j:"string"===typeof j?[j]:[],S=Object(_.useRef)(m.tag),w=Object(_.useRef)(m.page),k=Object(_.useRef)(m.query);if(w.current!==l&&l&&a&&n.includes("page")&&(a(parseInt(l,10)),w.current=l),k.current!==f&&i&&n.includes("query")){var x=f||"";i(x),k.current=x}return!O()(S.current,A)&&c&&n.includes("tag")&&(c(A),S.current=A),Object(_.useCallback)((function(e){var t=h(e,n),a=y.a.stringify(t,{addQueryPrefix:!0,indices:!1}),i=o.current||a===d?"replace":"push",c=t.page,u=t.query,b=t.tag,l=Array.isArray(b)?b:"string"===typeof b?[b]:[];n.includes("tag")&&(S.current=l),n.includes("page")&&(w.current=c||m.page),n.includes("query")&&(k.current=u||m.query),r[i]({pathname:s,search:a,state:p}),o.current=!1}),[n,s,d,p])},w=n("34li"),k=function(e){return e.articleType===w.p.Question},x=function(e){return e.articleType===w.p.Answer},D=function(e){return e.articleType===w.p.Question},E=function(e){return e.articleType===w.p.Answer},F=function(e){return e.articleType===w.p.Undefined},T=n("ildc"),I=function(e,t){if(!e)return"";var n=Object(T.q)()?t?50:100:135,a=e.length>n;return e.slice(0,n)+(a?"\u2026":"")},q=function(e){return e+"_circle_markdown_template"},C="template",R='### \u7b80\u4ecb\n\n\u300c\u529b\u6263\u7f16\u8f91\u5668\u300d\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u7279\u522b\u7684 Markdown \u7f16\u8f91\u5668\uff0c\u4e4b\u6240\u4ee5\u7279\u522b\u662f\u56e0\u4e3a\u5979\u4e0d\u4ec5\u652f\u6301\u4e86\u4f20\u7edf\u7684 Markdown \u8bed\u6cd5\uff0c\u540c\u65f6\u8fd8\u652f\u6301\u529b\u6263\u72ec\u6709\u7684\u7279\u6b8a\u683c\u5f0f\u548c\u529f\u80fd\u3002\n\n---\n\n### \u652f\u6301\u8bed\u6cd5\n\n#### \u6807\u9898\n\n# heading 1\n## heading 2\n### heading 3\n#### heading 4\n##### heading 5\n###### heading 6\n\n---\n\n\n#### \u5f15\u7528\n\n> \u5728 `>` \u540e\u63d2\u5165\u60a8\u6240\u5e0c\u671b\u5e94\u7528\u7684\u5185\u5bb9\u3002\n\n---\n\n#### \u5217\u8868\n\n> \u65e0\u5e8f\u5217\u8868\n\n- \u6587\u672c\u4e00\n- \u6587\u672c\u4e8c\n- \u6587\u672c\u4e09\n\n> \u6709\u5e8f\u5217\u8868\n\n1. \u6587\u672c\u4e00\n2. \u6587\u672c\u4e8c\n3. \u6587\u672c\u4e09\n\n---\n\n#### \u6587\u5b57\u53d8\u5f62\n\n_\u659c\u4f53_\n*\u659c\u4f53*\n \n__\u7c97\u4f53__\n**\u7c97\u4f53**\n\n---\n\n#### Latex\n\n\u884c\u5185 Latex \u652f\u6301\uff1a$O(n^2)$\u3002\n\n$$m \\leq n,\\  i < m \\implies j = \\frac{m+n+1}{2} - i > \\frac{m+n+1}{2} - m \\geq \\frac{2m+1}{2} - m \\geq 0$$\n\n> \u9700\u8981\u72ec\u884c Latex\uff0c\u8bf7\u4f7f\u7528 `$$` \u5305\u56f4\u3002\n\n---\n\n#### \u4ee3\u7801\n\n\u4f7f\u7528\u4e00\u6bb5 `\u884c\u5185\u4ee3\u7801`\u3002\n\n> \u4ee3\u7801\u7247\u6bb5\n\n```java\npublic class Main {\n    public static void main(String[] args) {\n        System.out.print("\u4f60\u597d\u529b\u6263");\n    }\n}\n```\n\n> \u7ec4\u5408\u4ee3\u7801\u6a21\u5757\n\n```java [solution1-Java \u7b54\u6848]\npublic class Main {\n    public static void main(String[] args) {\n        System.out.print("\u4f60\u597d\u529b\u6263");\n    }\n}\n```\n```python [solution1-Python \u7b54\u6848]\nprint "\u4f60\u597d\u529b\u6263"\n```\n\n---\n\n#### \u8868\u683c\n\n\u540d\u79f0 | \u7f29\u5199\n--- | ---\nJavaScript | js\nPython | py\nC++ | cpp\n\n> \u4f7f\u7528\u5192\u53f7\u5b9a\u4e49\u5bf9\u9f50\u65b9\u5f0f\n\n| \u9898\u53f7 | \u6807\u9898 | \u96be\u6613\u5ea6 |\n| :--- | ---:| :---: |\n| 1 | \u4e24\u6570\u4e4b\u548c | \u7b80\u5355 |\n| 15 | \u4e09\u6570\u4e4b\u548c | \u4e2d\u7b49 |\n| 262 | \u884c\u7a0b\u548c\u7528\u6237 | \u56f0\u96be |\n\n---\n\n#### \u94fe\u63a5\n\n[\u8fd9\u662f\u4e00\u4e2a\u8d85\u7ea7\u94fe\u63a5](https://leetcode.cn)\n\n---\n\n#### \u56fe\u7247\n\n![\u529b\u6263](https://pic.leetcode.cn/056dd17dd0506591d04525f015765ab749e9f9f19dcaf6e0dcae5d77057d2392-15@3x.png){:width=100}\n\n> \u4f7f\u7528\u4f20\u7edf `![\u56fe\u7247\u540d\u79f0](\u56fe\u7247\u5730\u5740)` Markdown \u8bed\u6cd5\uff0c\u6216\u5c06\u56fe\u7247\u76f4\u63a5\u62d6\u62fd\u5230\u7f16\u8f91\u5668\u4e2d\u8fdb\u884c\u4e0a\u4f20\u3002\n>\n> \u53ef\u4ee5\u5728\u56fe\u7247\u5c3e\u90e8\u6dfb\u52a0 `{:width=\u5bbd\u5ea6\u50cf\u7d20}` \u9650\u5236\u56fe\u7247\u5bbd\u5ea6\uff0c\u6216\u8005 `{:height=\u9ad8\u5ea6\u50cf\u7d20}` \u9650\u5236\u56fe\u7247\u9ad8\u5ea6\u3002\n\n---\n\n#### \u89c6\u9891\n\n![\u529b\u6263\u89c6\u9891](562986b1-46d8-48ef-bac6-82685bcedcd8)\n\n\n> \u4f7f\u7528\u5de5\u5177\u680f\u4e2d\u300c\u89c6\u9891\u4e0a\u4f20\u300d\u5de5\u5177\u8fdb\u884c\u4e0a\u4f20\uff0c\u652f\u6301 m4v\u3001mp4\u3001mov\u3001flv \u7b49\u591a\u79cd\u4e3b\u6d41\u89c6\u9891\u683c\u5f0f\u3002\n> \u89c6\u9891\u5185\u5bb9\u9700\u8981\u7b49\u5f85\u4eba\u5de5\u5ba1\u6838\u5b8c\u6210\u540e\u624d\u80fd\u6267\u884c\u64ad\u653e\uff0c\u5ba1\u6838\u671f\u95f4\u4e0d\u5f71\u54cd\u5185\u5bb9\u53d1\u5e03\u3002\n\n---\n\n### \u7ed3\u5c3e\n\n\u4e3a\u4e86\u8ba9\u60a8\u7684\u5185\u5bb9\u53ef\u4ee5\u7ed9\u5927\u5bb6\u5e26\u6765\u6700\u4f73\u7684\u9605\u8bfb\u4f53\u9a8c\uff0c\u6211\u4eec\u63a8\u8350\u60a8\u9075\u5faa\u300c[\u4e2d\u6587\u6587\u6848\u6392\u7248\u6307\u5317](https://github.com/sparanoid/chinese-copywriting-guidelines/blob/master/README.zh-CN.md)\u300d\u3002\n\n\u66f4\u591a Markdown \u8bed\u6cd5\uff0c\u8bf7\u67e5\u770b [\u5b98\u65b9\u6587\u6863](https://www.markdownguide.org/basic-syntax/)\u3002\n\n\u6700\u540e\uff0c\u611f\u8c22\u60a8\u62bd\u7a7a\u9605\u8bfb\u672c\u300c\u529b\u6263\u7f16\u8f91\u5668\u300d\u4f7f\u7528\u8bf4\u660e\uff0c\u795d\u60a8\u521b\u4f5c\u6109\u5feb\uff01',P=function(e){var t=e.slug,n=e.uuid,a=e.title,i=e.identifier,o=e.resourceType,r=e.articleType,u=e.hitCount,s=e.createdAt,d=e.updatedAt,p=e.thumbnail,b=e.tags,l=e.author,f=l.username,O=l.profile,j=O.realName,y=O.userSlug,_=O.userAvatar,g=e.reactionType,m=e.reactionsV2,v=e.isMyFavorite,h=e.topic,A=e.summary,S=e.isEditorsPick,w=e.byLeetcode,k=e.status,x=e.score;return{identifier:i,resourceType:o,articleType:r,slug:t,uuid:n,title:a,viewCount:u,createdAt:s,updatedAt:d&&!c(s,d)?d:null,thumbnail:p,tags:b.map((function(e){var t=e.name,n=e.slug;return{name:e.nameTranslated||t,slug:n}})),author:{name:j||f,slug:y,avatar:_},reactionType:g,reactionsV2:m||[],favored:v,commentCount:h&&h.commentCount||0,summary:A,picked:S,official:w,status:k,score:x||0}},N=n("uZih"),L=n.n(N),Q=n("kUU+"),M=n.n(Q),B=M()((function(e,t,n){return O()(L()(t,e),L()(n,e))}));M()((function(e,t,n){return O()(l()(t,e),l()(n,e))}));function z(e){var t=0,n=0;return e.forEach((function(e){e.reactionType===w.gc.Upvote?t+=e.count:n+=e.count})),{voteUpNum:t,emojiNum:n}}},"D4d+":function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var a=n("D57K"),i=n("3I8i"),c=n("K/af"),o=n("ERkP"),r=n.n(o),u=n("ildc"),s=n("+gd7"),d=n("iXo+"),p=n("wbrp"),b=n("lGXO"),l=(n("42uY"),n("/NrN")),f=n("UmVR"),O=n("cjLm"),j=n("zCf4"),y=n("YnR9"),_=n("Tndj"),g=y.a.main.paths;function m(e){return!!Object(j.j)().viewId?r.a.createElement(h,Object(a.__assign)({},e)):r.a.createElement(v,Object(a.__assign)({},e))}function v(e){var t=e.author,n=e.totalRepliesNum,i=e.uuid,c=e.onAddReply,u=e.fetchAnswerPageInfo,d=t.name,b=Object(o.useCallback)((function(){0===n?c(i,d):u({answerId:i,effects:[p.a.ExpandReply]})}),[u,c,n,d,i]);return r.a.createElement(s.a,Object(a.__assign)({},e,{onReply:b}))}function h(e){var t=e.author,n=e.totalRepliesNum,i=e.uuid,c=e.onAddReply,u=e.fetchAnswerPageInfo,d=t.name,b=Object(j.j)().discussId,l=Object(o.useContext)(_.a),f=Object(j.h)(),O=Object(o.useCallback)((function(){l(),f.replace(g.discuss.discussionDetail({discussId:b})),u({answerId:i,effects:0===n?[]:[p.a.ExpandReply]}),0===n&&c(i,d)}),[f,b,l,u,c,n,d,i]);return r.a.createElement(s.a,Object(a.__assign)({},e,{onReply:O}))}var A=n("2yfB"),S=r.a.memo((function(e){var t=e.isExpanded,n=e.questionAuthorSlug,i=e.questionAuthorSuffix,u=e.answerId,s=e.onCollapse,d=e.onEdit,j=e.onAddReply,y=e.fetchAnswerPageInfo,_=e.disabledOperations,g=Object(a.__read)(Object(c.a)(p.f,{scope:u}),2),v=g[0],h=v.loading,S=v.replies,w=v.totalNum,k=v.pageNum,x=g[1],D=x.fetchReplies,E=x.setPageNum,F=Object(o.useRef)(null),T=Object(o.useCallback)((function(e){E(e),D({qaAnswerUuid:u})}),[E,D,u]),I=Object(o.useCallback)((function(e,t){j(e,t,(function(e){y({answerId:e,effects:[]})}))}),[j,y]);return r.a.createElement(O.a,{isActive:t&&!h,contentRef:F},r.a.createElement(A.i,{ref:F},S.map((function(e){return r.a.createElement(A.j,{key:e.uuid},r.a.createElement(m,Object(a.__assign)({},e,{questionAuthorSlug:n,questionAuthorSuffix:i,onEdit:d,onAddReply:I,fetchAnswerPageInfo:y,disabledOperations:_})))})),w>5&&r.a.createElement(A.h,null,r.a.createElement(b.a,{total:w,pageSize:5,current:k,onChange:T,showSizeChanger:!1}),r.a.createElement(l.a,{kind:"transparent",size:"sm",prefixIcon:r.a.createElement(f.a,null),onClick:s},"\u6536\u8d77"))))})),w=r.a.memo((function(e){var t=e.questionAuthorSuffix,n=e.questionAuthorSlug,b=e.detail,l=e.onEdit,f=e.onReply,O=e.fetchAnswerPageInfo,j=e.getCopyLink,y=e.forceExpanded,_=e.scrollingElementRef,g=e.disabledOperations,m=b.uuid,v=b.totalRepliesNum,h=b.author.name,A=Object(a.__read)(Object(c.a)(p.f,{scope:m}),2)[1],w=A.fetchReplies,k=A.setPageNum,x=Object(a.__read)(Object(c.a)(p.g),1)[0].afterScrollEffects,D=Object(a.__read)(Object(o.useState)(!1),2),E=D[0],F=D[1],T=Object(o.useCallback)((function(){k(1),w({qaAnswerUuid:m}),F(!0)}),[k,w,m]),I=Object(o.useCallback)((function(){E?F(!1):v>0?(F(!0),w({qaAnswerUuid:m})):f(m,h,T)}),[E,v,m,w,f,h,T]),q=Object(o.useCallback)((function(e,t){f(e,t,T)}),[f,T]),C=Object(o.useCallback)((function(){x.includes(p.a.ExpandReply)&&(F(!0),w({qaAnswerUuid:m}))}),[x,m,w]),R=function(e,t,n){var r,u,s=Object(o.useRef)(null),b=Object(a.__read)(Object(c.a)(p.g),2),l=b[0].scrollIntoViewAnswerId,f=b[1].setScrollIntoViewAnswerId,O=Object(o.useRef)(t),j=null!==(u=null!==(r=null===n||void 0===n?void 0:n.current)&&void 0!==r?r:window.document.scrollingElement)&&void 0!==u?u:window.document.documentElement;O.current!==t&&(O.current=t);return Object(o.useEffect)((function(){var t=s.current;if(e===l&&t&&j){var n=function(e,t){var n=e.getBoundingClientRect().top,a=e.clientHeight,i=t.clientHeight,c=t.scrollTop;return Math.max(0,a>i/2-10?n+c-10:n+c-i/2+a+10)}(t,j);i.a.timeline().add({targets:j,scrollTop:n,duration:300,easing:"linear",complete:function(){O.current()}}).add({targets:t,duration:3600,begin:function(){t.classList.add(d.b)},complete:function(){f(null),t.classList.remove(d.b)}})}}),[j,e,l,f]),Object(o.useEffect)((function(){return function(){var e;null===(e=s.current)||void 0===e||e.classList.remove(d.b),i.a.remove([j,s.current])}}),[j]),s}(m,C,_),P=Object(o.useCallback)((function(){F(!1)}),[]);return r.a.createElement(d.a,{ref:R,isMobile:Object(u.q)()},r.a.createElement(s.a,Object(a.__assign)({},b,{onEdit:l,onReply:I,onAddReply:q,fetchAnswerPageInfo:O,getCopyLink:j,questionAuthorSuffix:t,questionAuthorSlug:n,forceExpanded:y,replyToVisible:!0,isReplyExpanded:E,disabledOperations:g})),r.a.createElement(S,{isExpanded:E,questionAuthorSlug:n,questionAuthorSuffix:t,answerId:m,onCollapse:P,onEdit:l,onAddReply:f,fetchAnswerPageInfo:O,disabledOperations:g}))}))},HOg7:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n("3dHC"),i=n.n(a),c=n("1xil"),o=n.n(c),r=n("lKOy"),u=n.n(r),s=n("ERkP"),d=n("jWBs");function p(e){var t=Object(d.a)(),n=t.usernameConfigs,a=t.getUsernameConfigs,c=i()(o()(e.map((function(e){var t=e.author,n=e.replyTo;return[t.slug,null===n||void 0===n?void 0:n.author.slug]})))),r=u()(c,Object.keys(n));Object(s.useEffect)((function(){a(r)}),[a,r])}},OKNS:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var a=n("D57K"),i=n("5Nzd"),c=n("u3dr"),o=n("2wT7"),r=n("9EWH"),u=n("HnWI"),s=n("eb+u"),d=n("Qksx"),p=n("4HYP"),b=n("AouM"),l=n("Jg5f"),f=n("W/Ou"),O=n("mhnT"),j=n("2t7I"),y=n("u1hN"),_=n("wUZp"),g=n("B07F"),m=n("+Aeu"),v=n("+75L"),h=n("AF8X"),A=n("3p8V"),S={loading:!1,hasMore:!0,currentPage:0,list:[]},w=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=S,n}var n,o,w,k,x,D,E;return Object(a.__extends)(t,e),t.prototype._setLoading=function(e){e.loading=!0},t.prototype.restore=function(){return S},t.prototype._setQuestions=function(e,t){var n=t.questions,a=t.currentPage,i=e.currentPage>a;e.list=Object(m.h)(Object(y.a)(e.list,n,"uuid")),e.loading=!1,!i&&(e.hasMore=n.length===v.g),!i&&e.currentPage++},t.prototype.getQuestions=function(e,t){var n=this;return e.pipe(Object(s.a)(t),Object(d.b)((function(e){return Object(a.__read)(e,2)[1].currentPage})),Object(p.b)((function(e){return e.pipe(Object(b.a)((function(e){var t=Object(a.__read)(e,2)[1].currentPage;return n.client.watchQuery({query:A.a,variables:{pageNum:t,numPerPage:v.g},fetchPolicy:"network-only"}).pipe(Object(_.a)("\u83b7\u53d6\u5173\u6ce8\u95ee\u9898\u5217\u8868\u5931\u8d25"),Object(l.a)((function(e){var a=e.data;return n.getActions()._setQuestions({questions:a.qaMySubscriptionList.map(h.o),currentPage:t})})),Object(f.a)(n.getActions()._setLoading()))})))})),Object(O.a)(this.dispose$),Object(j.a)())},Object(a.__decorate)([Object(c.a)(),Object(a.__metadata)("design:type","function"===typeof(n="undefined"!==typeof u.a&&u.a)?n:Object)],t.prototype,"dispose$",void 0),Object(a.__decorate)([Object(c.c)(),Object(a.__metadata)("design:type",Function),Object(a.__metadata)("design:paramtypes",["function"===typeof(o="undefined"!==typeof r.Draft&&r.Draft)?o:Object]),Object(a.__metadata)("design:returntype",void 0)],t.prototype,"_setLoading",null),Object(a.__decorate)([Object(c.d)(),Object(a.__metadata)("design:type",Function),Object(a.__metadata)("design:paramtypes",[]),Object(a.__metadata)("design:returntype",void 0)],t.prototype,"restore",null),Object(a.__decorate)([Object(c.c)(),Object(a.__metadata)("design:type",Function),Object(a.__metadata)("design:paramtypes",["function"===typeof(w="undefined"!==typeof r.Draft&&r.Draft)?w:Object,Object]),Object(a.__metadata)("design:returntype",void 0)],t.prototype,"_setQuestions",null),Object(a.__decorate)([Object(c.b)(),Object(a.__metadata)("design:type",Function),Object(a.__metadata)("design:paramtypes",["function"===typeof(k="undefined"!==typeof u.a&&u.a)?k:Object,"function"===typeof(x="undefined"!==typeof u.a&&u.a)?x:Object]),Object(a.__metadata)("design:returntype","function"===typeof(D="undefined"!==typeof u.a&&u.a)?D:Object)],t.prototype,"getQuestions",null),t=Object(a.__decorate)([Object(i.a)(),Object(a.__metadata)("design:paramtypes",["function"===typeof(E="undefined"!==typeof g.a&&g.a)?E:Object])],t)}(o.a)},PbXi:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return b})),n.d(t,"a",(function(){return l}));var a,i=n("TMWK"),c=n("fgAA"),o=n("pqRN"),r=n("Jmah"),u=Object(i.a)("div",{target:"ecqcqxb0"})({display:"inline-flex",minWidth:"200px",maxWidth:"400px",background:c.b.FillQuaternary(),marginTop:"12px",borderRadius:"7px"},"label:Container;"),s=Object(i.a)("div",{target:"ecqcqxb1"})(Object(o.h)(),{textAlign:"left",flex:"1 1 auto",fontSize:"13px",lineHeight:"20px",color:c.b.BaseGrey6()},"label:Content;"),d=Object(i.a)("div",{target:"ecqcqxb2"})(((a={width:"100%",display:"flex",alignItems:"center",padding:"8px"})[""+s]={color:c.b.BaseGrey5()},a),"label:DeleteContainer;"),p=Object(i.a)("div",{target:"ecqcqxb3"})({width:"100%",padding:"8px",display:"inline-flex"},(function(e){return{cursor:e.clickable?"pointer":"default"}}),"label:ContentContainer;"),b=Object(i.a)(r.a,{target:"ecqcqxb4"})({flex:"0 0 auto",marginRight:"10px",color:c.b.BaseGrey5()},"label:StyledIconSlash;"),l=Object(i.a)("img",{target:"ecqcqxb5"})({flex:"0 0 auto",width:"22px",height:"22px",borderRadius:"100%",marginRight:"8px"},"label:Avatar;")},Po8h:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"f",(function(){return b})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return O}));var a,i=n("XKjd"),c=n("TMWK"),o=n("fgAA"),r=n("/NrN"),u=Object(c.a)(r.a,{target:"es3xzeu0"})({margin:"0 8px",color:o.b.BaseGrey6(),fontSize:"14px",verticalAlign:"text-bottom","> svg":{width:"20px",height:"20px"}},"label:OperationButton;"),s=Object(c.a)(u,{target:"es3xzeu1"})((function(e){return{color:e.isFavored?o.b.BrandOrange():o.b.BaseGrey6(),transition:"none","&:hover > svg":{color:o.b.BrandOrange()},"&:hover > span":{color:o.b.BrandOrange()}}}),"label:OperationButtonShare;"),d=Object(c.a)("div",{target:"es3xzeu2"})({marginLeft:"10px"},"label:StyledReactionV2Wrapper;"),p=Object(c.a)("div",{target:"es3xzeu3"})({marginRight:"8px",height:"12px",borderLeft:"1px solid",borderColor:o.b.Border2()},"label:StyledSplitLine;"),b=Object(c.a)("div",{target:"es3xzeu4"})({display:"flex",alignItems:"center",position:"sticky",bottom:0,borderTop:"1px solid "+o.b.Border2(),marginTop:"20px",zIndex:1e3},(function(e){var t,n=e.sticky,a=e.darkBg;return(t={padding:n?"11px 0px":"20px 0px 11px"})[o.c]={backgroundColor:a},t}),(function(e){var t=e.loose;return void 0!==t&&t?{"> *:last-child":{marginLeft:"auto"}}:{}}),"label:OperationWrapper;"),l=(Object(i.a)({display:"none!important"}),Object(i.a)(((a={position:"sticky",bottom:0,backgroundColor:o.b.Layer1(),padding:"11px 16px",borderTop:"1px solid "+o.b.Border2()})[o.c]={backgroundColor:o.b.LayerBg()},a)),Object(c.a)("div",{target:"es3xzeu5"})({display:"flex",'&[data-hidden="true"]':{opacity:0},transition:"opacity 0.4s"},"label:HiddenWrapper;")),f=Object(c.a)("div",{target:"es3xzeu6"})({display:"flex"},"label:Flex;"),O=Object(c.a)("div",{target:"es3xzeu7"})({marginLeft:"12px",display:"flex",alignItems:"center"},"label:ExtraButtonContainer;")},"Q/bO":function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var a,i=n("D57K"),c=n("DuHN"),o=(n("IJu9"),n("K/af")),r=n("ERkP"),u=n.n(r),s=n("ildc"),d=n("ZRwv"),p=n("1QlS"),b=n("xqpu"),l=n("u8N8"),f=n("5ZzG"),O=n("nPqx"),j=n("qYXo"),y=n("Y9Gt"),_=n("htYk"),g=n("u+Aj"),m=n("/usP"),v=n("87bA"),h=n("34li"),A=n("mH2o"),S=n("TMWK"),w=n("fgAA"),k=n("WfVQ"),x=n("/NrN"),D=Object(S.a)(x.a,{target:"erjzblc0"})({color:w.b.BaseGrey6()},"label:EllipsisButton;"),E=Object(S.a)(k.a,{target:"erjzblc2"})({width:"100%"},"label:ReasonArea;"),F=Object(S.a)("div",{target:"erjzblc3"})({display:"flex",flexDirection:"column"},"label:Container;"),T=Object(S.a)(x.a,{target:"erjzblc4"})({fontSize:"13px",justifyContent:"left",borderRadius:0,padding:"5px 6px","&:not(:first-child)":{borderTop:"1px solid "+w.a.grey(2)}},"label:StyledButton;"),I=n("A83I"),q=((a={})[h.p.Answer]="\u8ba8\u8bba",a[h.p.Question]="\u8ba8\u8bba",a[h.p.Solution]="\u9898\u89e3",a[h.p.Undefined]="\u6587\u7ae0",a),C=u.a.memo((function(e){var t=Object(i.__read)(Object(o.a)(d.a),1)[0].globalData,n=Object(i.__read)(Object(o.a)(A.g),2)[1].setEditingMode,a=Object(i.__read)(Object(o.a)(A.e),2)[1].setEditingMode,S=Object(i.__read)(Object(p.a)(!1),3),w=S[0],k=S[1],x=S[2],C=Object(i.__read)(Object(p.a)(!1),3),R=C[0],P=C[1],N=C[2],L=Object(i.__read)(Object(p.a)(!1),3),Q=L[0],M=L[1],B=L[2],z=Object(i.__read)(Object(p.a)(!1),3),G=z[0],$=z[1],W=z[2],H=Object(i.__read)(Object(p.a)(!1),3),V=H[0],U=H[1],K=H[2],Y=Object(i.__read)(Object(p.a)(!1),3),X=Y[0],J=Y[1],Z=Y[2],ee=Object(r.useRef)(null),te=Object(r.useContext)(b.d),ne=function(e,t,n,a,c,o,r){var d;return Object(i.__spread)(e.onEdit&&!Object(s.q)()?[{key:"edit",text:"\u7f16\u8f91",onClick:function(){e.onEdit&&e.onEdit(),t(!0),n(!0)},selectable:!1}]:[],e.alwaysShowQuestion?[{key:"alwaysShow",text:e.alwaysShowQuestion.alwaysShow?"\u53d6\u6d88\u5217\u8868\u4e2d\u59cb\u7ec8\u663e\u793a\u8ba8\u8bba\u63cf\u8ff0":"\u5217\u8868\u4e2d\u59cb\u7ec8\u663e\u793a\u8ba8\u8bba\u63cf\u8ff0",onClick:e.alwaysShowQuestion.toggleQuestionAlwaysShow,inCancelPhase:e.alwaysShowQuestion.alwaysShow}]:[],e.alwaysExpandQuestion?[{key:"alwaysExpand",text:e.alwaysExpandQuestion.alwaysExpand?"\u53d6\u6d88\u59cb\u7ec8\u5c55\u5f00\u8ba8\u8bba\u63cf\u8ff0":"\u59cb\u7ec8\u5c55\u5f00\u8ba8\u8bba\u63cf\u8ff0",onClick:e.alwaysExpandQuestion.toggleQuestionAlwaysExpand,inCancelPhase:e.alwaysExpandQuestion.alwaysExpand}]:[],e.auth?[{key:"official",text:e.auth.official?"\u53d6\u6d88\u5b98\u65b9":"\u8bbe\u4e3a\u5b98\u65b9",onClick:e.auth.toggleOfficial,inCancelPhase:e.auth.official}]:[],e.selection?[{key:"pick",text:e.selection.picked?"\u53d6\u6d88\u7cbe\u9009":"\u8bbe\u4e3a\u7cbe\u9009",onClick:e.selection.togglePicked,inCancelPhase:e.selection.picked}]:[],e.recommend?[{key:"recommend",text:e.recommend.recommended?"\u53d6\u6d88\u63a8\u8350":"\u8bbe\u4e3a\u63a8\u8350",onClick:e.recommend.toggleRecommended,inCancelPhase:e.recommend.recommended}]:[],e.recommendGlobally?[{key:"recommendGlobally",text:e.recommendGlobally.recommendedGlobally?"\u53d6\u6d88\u9996\u9875\u63a8\u8350":"\u9996\u9875\u63a8\u8350",onClick:e.recommendGlobally.toggleRecommendedGlobally,inCancelPhase:e.recommendGlobally.recommendedGlobally}]:[],e.pinSite?[{key:"pinnedGlobally",text:e.pinSite.pinnedGlobally?"\u53d6\u6d88\u5168\u7ad9\u7f6e\u9876":"\u5168\u7ad9\u7f6e\u9876",onClick:e.pinSite.togglePinnedGlobally,inCancelPhase:e.pinSite.pinnedGlobally}]:[],e.pin?[{key:"pinned",text:(e.pin.pinnedInSubject?"\u53d6\u6d88":"")+(e.pin.text||"\u8bdd\u9898\u5185\u7f6e\u9876"),onClick:e.pin.togglePinnedInSubject,inCancelPhase:e.pin.pinnedInSubject}]:[],e.sink?[{key:"sunk",text:e.sink.sunk?"\u53d6\u6d88\u4e0b\u6c89":"\u4e0b\u6c89",onClick:e.sink.toggleSunk,inCancelPhase:e.sink.sunk}]:[],e.withdraw?[{key:"withdraw",text:"\u4e0b\u7ebf",onClick:o,selectable:!1}]:[],[{key:"mute",text:u.a.createElement(_.a,{contentType:e.type,uuid:e.uuid,value:e.status!==h.o.Muted}),onClick:void 0,selectable:!1},{key:"delete",text:"\u5220\u9664",onClick:c,selectable:!1}],(null!==(d=e.canEdit)&&void 0!==d?d:e.isAuthor)?[]:[{key:"report",text:"\u4e3e\u62a5",onClick:a,selectable:!1}],e.articleFeedback?[{key:"feedback",text:"\u53cd\u9988",onClick:r}]:[])}(e,n,a,k,P,U,J),ae=ne.filter((function(e){var t=e.selectable,n=void 0===t||t,a=e.inCancelPhase;return n&&(void 0!==a&&a)})).map((function(e){return e.key})),ie=Object(r.useCallback)((function(){e.onDelete(),N()}),[e.onDelete]),ce=Object(r.useMemo)((function(){var i,c;if(null===t||void 0===t?void 0:t.commonNojPermissionTypes.includes(h.Sb.ColumnsReview))return u.a.createElement(j.a,{selectedKeys:ae},ne.map((function(e){var t=e.text,n=e.key,a=e.onClick;return u.a.createElement(j.a.Item,{key:n,onClick:a},t)})));var o=e.articleFeedback?u.a.createElement(T,{size:"sm",kind:"transparent",onClick:J},"\u53cd\u9988"):null;return(null!==(i=e.canEdit)&&void 0!==i?i:e.isAuthor)?u.a.createElement(F,null,e.onEdit&&e.status!==h.o.Offline&&u.a.createElement(T,{size:"sm",kind:"transparent",onClick:function(){e.onEdit&&e.onEdit(),n(!0),a(!0)}},"\u7f16\u8f91"),!(null===(c=e.disabledOperation)||void 0===c?void 0:c.includes(I.b.FeatureRequest))&&e.requestToFeatured&&u.a.createElement(T,{size:"sm",kind:"transparent",onClick:M},"\u7533\u8bf7\u7cbe\u9009"),u.a.createElement(T,{size:"sm",kind:"transparent",onClick:e.requestToDelete?$:P},e.requestToDelete?"\u7533\u8bf7\u5220\u9664":"\u5220\u9664"),o):u.a.createElement(u.a.Fragment,null,u.a.createElement(T,{size:"sm",kind:"transparent",onClick:k},"\u4e3e\u62a5"),o)}),[null===t||void 0===t?void 0:t.commonNojPermissionTypes,ae,ne,e,J,M,$,P,n,a,k]),oe=Object(r.useCallback)((function(){e.requestToFeatured&&e.requestToFeatured(),B()}),[e.requestToFeatured]),re=Object(r.useCallback)((function(){ee.current&&(ee.current.value.trim().length?(e.requestToDelete&&e.requestToDelete(ee.current.value.trim()),W(),ee.current.value):c.b.error("\u8bf7\u8f93\u5165\u7533\u8bf7\u7406\u7531"))}),[e.requestToDelete]),ue=Object(i.__read)(u.a.useState(!1),2),se=ue[0],de=ue[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement(y.a,{content:u.a.createElement("div",{onClick:l.c},ce),isActive:se&&!!te.isSignedIn,onChangeActive:de,trigger:Object(s.q)()?"click":"hover"},u.a.createElement(D,{kind:e.buttonKind||"transparent",prefixIcon:u.a.createElement(f.a,{type:"ellipsis"}),size:"sm",disabled:!te.isSignedIn,onClick:l.c})),u.a.createElement(g.a,{visible:w,resourceId:e.resourceId,resourceType:e.resourceType,onClose:x,onOk:e.onReport}),e.requestToFeatured&&u.a.createElement(O.a,{visible:Q,onOk:oe,onClose:B},"\u60a8\u786e\u5b9a\u4e3a\u8be5",q[e.type],"\u7533\u8bf7\u7cbe\u9009\u5417\uff1f"),u.a.createElement(O.a,{type:"threat",visible:R,onOk:ie,onClose:N},"\u60a8\u786e\u5b9a\u5220\u9664\u8be5",q[e.type],"\u5417\uff1f"),u.a.createElement(O.a,{visible:G,onOk:re,onClose:W,title:"\u7533\u8bf7\u5220\u9664"+q[e.type]},u.a.createElement(E,{placeholder:"\u8bf7\u8f93\u5165\u5220\u9664\u7684\u7406\u7531",innerRef:ee})),e.withdraw&&u.a.createElement(m.a,{visible:V,warningText:"\u6587\u7ae0\u4e0b\u7ebf\u540e\u5c06\u9000\u56de\u81f3\u7528\u6237\u8349\u7a3f",resourceType:e.resourceType,resourceId:e.resourceId,onClose:K,flagStatus:h.ib.EditRequested,onOk:e.withdraw.onWithdrawOk}),e.articleFeedback&&u.a.createElement(v.a,{isActive:X,onClose:Z,articleSlug:e.articleFeedback.slug,articleTitle:e.articleFeedback.title}))}))},QR8y:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n("D57K"),i=n("ERkP"),c=n.n(i),o=n("ildc"),r=n("e96/"),u=n("y9rd"),s=n("6V3P"),d=n("Po8h");function p(e){var t=e.link,n=e.onClick,p=Object(a.__rest)(e,["link","onClick"]),b=Object(i.useCallback)((function(e){t&&r.a.copy(t,(function(){u.a.success("\u5df2\u590d\u5236\u5206\u4eab\u94fe\u63a5")})),null===n||void 0===n||n(e)}),[t,n]);return c.a.createElement("div",{style:{display:"flex"}},c.a.createElement(d.d,Object(a.__assign)({},p,{kind:"transparent",prefixIcon:c.a.createElement(s.a,null),onClick:b}),Object(o.q)()?"":"\u5206\u4eab"))}},Qj05:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={provide:new(n("5/dZ").c)("DiscussHistory"),useValue:null}},Ti8K:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var a=n("pu3o"),i=n("zCf4"),c=n("YnR9").a.main.paths;function o(e){var t=e.bookSlug,n=e.pageId,i=e.discussionId;return n?c.leetbook.read({bookSlug:t,pageId:n})+Object(a.stringify)({discussion:i},{addQueryPrefix:!0}):c.leetbook.detail({bookSlug:t})}function r(){var e=Object(i.i)().search,t=Object(a.parse)(e,{ignoreQueryPrefix:!0}).discussion;return"string"===typeof t?t:null}},Tndj:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("nnm9"),i=n.n(a),c=n("ERkP"),o=Object(c.createContext)(i.a)},W4BP:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return l}));var a=n("34li"),i=function(e){return e.filter((function(e){return e.status!==a.o.Deleted}))};function c(e,t,n){return e&&n?{slug:n.profile.userSlug,name:n.profile.realName||n.username,avatar:n.profile.userAvatar}:{slug:t.userSlug,name:t.realName||t.username,avatar:t.avatar}}var o=n("D57K"),r=n("uZih"),u=n.n(r),s=function(e){var t,n=e.uuid,a=e.slug,i=e.articleType,r=e.createdAt,s=e.thumbnail,d=e.summary,p=e.status,b=e.pinned,l=e.sunk,f=e.isEditorsPick,O=e.identifier,j=e.resourceType,y=e.content,_=e.contentAuthor,g=e.realAuthor,m=e.reactionType,v=e.reactionsV2,h=e.isMyFavorite,A=e.favoriteCount,S=e.topic,w=e.parent,k=e.isAnonymous,x=e.canEdit,D=e.totalRepliesNum,E=e.replyTo,F=Object(o.__rest)(e,["uuid","slug","articleType","createdAt","thumbnail","summary","status","pinned","sunk","isEditorsPick","identifier","resourceType","content","contentAuthor","realAuthor","reactionType","reactionsV2","isMyFavorite","favoriteCount","topic","parent","isAnonymous","canEdit","totalRepliesNum","replyTo"]);return Object(o.__assign)(Object(o.__assign)({},F),{uuid:n,slug:a,topicId:S&&S.id,articleType:i,createdAt:r,thumbnail:s,summary:d,pinned:b,sunk:!!l,commentCount:S&&S.commentCount||0,lastCommentCreatedAtInSec:S&&S.lastComment&&S.lastComment.post.creationDate,reactionType:m,reactionsV2:v||[],favored:h,favoriteCount:A,picked:f,status:p,identifier:O,resourceType:j,content:y,canEdit:x,score:w&&w.score||0,author:c(k,_,g),isAnonymous:k,parent:{uuid:w&&w.uuid||"",title:w&&w.title||"",pinned:!(!w||!w.pinned),pinnedGlobally:!(!w||!w.pinnedGlobally),tags:null!==(t=null===w||void 0===w?void 0:w.tags)&&void 0!==t?t:[]},totalRepliesNum:D,replyTo:E?Object(o.__assign)(Object(o.__assign)({},u()(E,["contentAuthor","realAuthor"])),{author:c(E.isAnonymous,E.contentAuthor,E.realAuthor)}):null})},d=function(e){return function(t){Object.keys(t.data.data).forEach((function(n){e.test(n)&&t.data.delete(n)}))}},p=function(e,t){return["\u4f5c\u8005\uff1a"+e,"\u94fe\u63a5\uff1ahttps://leetcode.cn"+t,"\u6765\u6e90\uff1a\u529b\u6263\uff08LeetCode\uff09","\u8457\u4f5c\u6743\u5f52\u4f5c\u8005\u6240\u6709\u3002\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u8054\u7cfb\u4f5c\u8005\u83b7\u5f97\u6388\u6743\uff0c\u975e\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002"].join("\n")},b=n("ildc"),l=function(e){return Object(b.q)()?"":e}},X7IW:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n("D57K"),i=n("ERkP"),c=n.n(i),o=n("ildc"),r=n("60w7"),u=n("5ZzG"),s=n("uWeL"),d=n("lDZ0"),p=n("YkLR"),b=n("p9o4"),l=n("gQka"),f=n("yxrP"),O=n("Q/bO"),j=n("Po8h"),y=n("QR8y"),_=n("A83I"),g=n("W4BP"),m=c.a.memo((function(e){var t=e.reactionV2,n=e.comment,m=e.share,v=e.favor,h=e.extraButton,A=e.loose,S=void 0!==A&&A,w=e.tailHidden,k=void 0!==w&&w,x=e.reply,D=e.disabledOperation,E=void 0===D?[]:D,F=Object(i.useCallback)((function(e){e.preventDefault(),e.stopPropagation()}),[]),T=!Object(o.q)()&&k;function I(e){return E.includes(e)}return c.a.createElement(j.f,{onClick:F,loose:S},!I(_.b.Reaction)&&t&&c.a.createElement(c.a.Fragment,null,c.a.createElement(j.g,null,c.a.createElement(l.a,Object(a.__assign)({isDiscuss:!0},t))),c.a.createElement(j.h,null)),!I(_.b.Comment)&&n&&c.a.createElement(j.d,{kind:"transparent",prefixIcon:c.a.createElement(u.a,{type:n.visible?"chat":"chat-o"}),onClick:n.visible?n.onHide:n.onShow},n.visible?"\u6536\u8d77\u8bc4\u8bba":n.commentCount?Object(r.c)(n.commentCount)+" "+Object(g.e)("\u6761\u8bc4\u8bba"):Object(g.e)("\u8bc4\u8bba")),!I(_.b.Reply)&&x&&c.a.createElement(j.d,{kind:"transparent",prefixIcon:x.isExpanded?c.a.createElement(s.a,null):c.a.createElement(d.a,null),onClick:Object(o.q)()&&0===x.count?void 0:x.onReply},x.count>0?Object(g.e)(x.isExpanded?"\u6536\u8d77":"\u56de\u590d")+" "+Object(r.c)(x.count):Object(g.e)("\u56de\u590d")+(Object(o.q)()?"0":"")),!I(_.b.Favor)&&v&&c.a.createElement(j.c,{"data-hidden":T&&!v.favored},c.a.createElement(f.b,{isFavorited:v.favored,kind:"transparent",prefixIcon:v.favored?c.a.createElement(p.a,null):c.a.createElement(b.a,null),onClick:v.toggleFavorite},Object(g.e)(v.favored?"\u5df2\u6536\u85cf":"\u6536\u85cf"),Object(o.q)()&&Object(r.c)(v.favoriteCount))),!I(_.b.Share)&&m&&c.a.createElement(j.c,{"data-hidden":T},c.a.createElement(y.a,{link:m.link,onClick:m.onClick})),!I(_.b.AllExtra)&&h&&c.a.createElement(j.c,{"data-hidden":T},c.a.createElement(j.a,null,c.a.createElement(O.a,Object(a.__assign)({},h,{disabledOperation:E})))))}))},"iXo+":function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return f}));var a,i,c=n("D57K"),o=n("f7k3"),r=n("TMWK"),u=n("fgAA"),s=n("IDXw"),d=n("WwGZ"),p=n("7a+J"),b="highlight",l=Object(o.d)(i||(i=Object(c.__makeTemplateObject)(["\n  0% {\n    background-color: ",";\n  }\n  20% {\n    background-color: ",";\n  }\n  50% {\n    background-color: ",";\n  }\n  100% {\n    background-color: ",";\n  }\n"],["\n  0% {\n    background-color: ",";\n  }\n  20% {\n    background-color: ",";\n  }\n  50% {\n    background-color: ",";\n  }\n  100% {\n    background-color: ",";\n  }\n"])),u.b.Paper(),u.b.Primary0(),u.b.Primary0(),u.b.Paper()),f=Object(r.a)("div",{target:"e1r2w7m80"})((function(e){return e.isMobile?{}:Object(o.b)(d.a.layer1,p.a.card,{borderRadius:s.n})}),((a={padding:"16px 16px 0px 16px"})["&."+b]={animation:l+" 1.2s ease-in-out 500ms 2"},a),"label:AnswerDetailWrapper;")},jIGg:function(e,t,n){"use strict";n.d(t,"a",(function(){return Y})),n.d(t,"b",(function(){return X})),n.d(t,"c",(function(){return U}));var a=n("ERkP"),i=n.n(a),c=n("x+QU"),o=n.n(c),r=n("l1SX"),u=n("D57K"),s=n("lGXO"),d=(n("42uY"),n("K/af")),p=n("zCf4"),b=n("ildc"),l=n("Pigy"),f=n("Blax"),O=n("+Aeu"),j=n("D4d+"),y=n("pOZ+"),_=n("XPmh"),g=n("joee"),m=n("66Zf"),v=n("5Nzd"),h=n("u3dr"),A=n("2wT7"),S=n("HnWI"),w=n("9EWH"),k=n("d9YI"),x=n("AouM"),D=n("IMYO"),E=n("Jg5f"),F=n("B07F"),T=n("34li"),I=n("0OXR");function q(){return{loading:!0,answers:[],totalNum:0,pageSize:null,pageNum:1,orderBy:T.Yb.Hottest}}var C,R=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=q(),n}var n,a,i,c,o,r,s,d;return Object(u.__extends)(t,e),t.prototype.resetStore=function(){return q()},t.prototype.setPageNum=function(e,t){e.pageNum=t},t.prototype.setOrderBy=function(e,t){e.orderBy=t},t.prototype._setAnswers=function(e,t){var n=t.nodes,a=t.totalNum,i=t.pageSize;e.loading=!1,e.answers=Object(O.h)(n.map((function(e){return Object(O.l)(e)}))),e.totalNum=a,e.pageSize=i},t.prototype.fetchAnswers=function(e){var t=this;return e.pipe(Object(x.a)((function(e){var n=e.pageNum,a=Object(u.__rest)(e,["pageNum"]);return t.client.watchQuery({query:I.a,variables:Object(u.__assign)(Object(u.__assign)({},a),{pageNum:n-1})}).pipe(Object(D.a)((function(){return k.a})),Object(E.a)((function(e){var n=e.data;return t.getActions()._setAnswers(n.qaAnswerListV2)})))})))},Object(u.__decorate)([Object(h.a)(),Object(u.__metadata)("design:type","function"===typeof(n="undefined"!==typeof S.a&&S.a)?n:Object)],t.prototype,"dispose$",void 0),Object(u.__decorate)([Object(h.d)(),Object(u.__metadata)("design:type",Function),Object(u.__metadata)("design:paramtypes",[]),Object(u.__metadata)("design:returntype",Object)],t.prototype,"resetStore",null),Object(u.__decorate)([Object(h.c)(),Object(u.__metadata)("design:type",Function),Object(u.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof w.Draft&&w.Draft)?a:Object,Number]),Object(u.__metadata)("design:returntype",void 0)],t.prototype,"setPageNum",null),Object(u.__decorate)([Object(h.c)(),Object(u.__metadata)("design:type",Function),Object(u.__metadata)("design:paramtypes",["function"===typeof(i="undefined"!==typeof w.Draft&&w.Draft)?i:Object,"function"===typeof(c="undefined"!==typeof T.Yb&&T.Yb)?c:Object]),Object(u.__metadata)("design:returntype",void 0)],t.prototype,"setOrderBy",null),Object(u.__decorate)([Object(h.c)(),Object(u.__metadata)("design:type",Function),Object(u.__metadata)("design:paramtypes",["function"===typeof(o="undefined"!==typeof w.Draft&&w.Draft)?o:Object,Object]),Object(u.__metadata)("design:returntype",void 0)],t.prototype,"_setAnswers",null),Object(u.__decorate)([Object(h.b)(),Object(u.__metadata)("design:type",Function),Object(u.__metadata)("design:paramtypes",["function"===typeof(r="undefined"!==typeof S.a&&S.a)?r:Object]),Object(u.__metadata)("design:returntype","function"===typeof(s="undefined"!==typeof S.a&&S.a)?s:Object)],t.prototype,"fetchAnswers",null),t=Object(u.__decorate)([Object(v.a)(),Object(u.__metadata)("design:paramtypes",["function"===typeof(d="undefined"!==typeof F.a&&F.a)?d:Object])],t)}(A.a),P=function(e){function t(t,n){var a=e.call(this)||this;return a.answers=t,a.scrollEffect=n,a.defaultState={},a}var n,a,i,c;return Object(u.__extends)(t,e),t.prototype.fetchAnswerPageInfo=function(e){return e.pipe(this.scrollEffect.fetchAnswerPageInfo(this.answers.getState$(),this.answers.getActions().setPageNum))},Object(u.__decorate)([Object(h.b)(),Object(u.__metadata)("design:type",Function),Object(u.__metadata)("design:paramtypes",["function"===typeof(n="undefined"!==typeof S.a&&S.a)?n:Object]),Object(u.__metadata)("design:returntype","function"===typeof(a="undefined"!==typeof S.a&&S.a)?a:Object)],t.prototype,"fetchAnswerPageInfo",null),t=Object(u.__decorate)([Object(v.a)(),Object(u.__metadata)("design:paramtypes",["function"===typeof(i="undefined"!==typeof R&&R)?i:Object,"function"===typeof(c="undefined"!==typeof O.e&&O.e)?c:Object])],t)}(A.a),N=n("Ti8K"),L=n("lVbi"),Q=n("TMWK"),M=n("fgAA"),B=n("CkJS"),z=Object(Q.a)("div",{target:"ex349uk0"})(B.a.paragraph.sm,{flex:"0 0 auto",display:"flex",alignItems:"center",marginLeft:"auto",color:M.b.LabelSecondary(),cursor:"pointer",userSelect:"none",":hover":{color:M.b.PrimaryStandard()}},"label:Container;"),G=((C={})[T.Yb.Hottest]="\u6700\u70ed",C[T.Yb.Latest]="\u6700\u65b0",C);function $(e){var t=e.orderBy,n=e.onChange,c=Object(a.useCallback)((function(){n(t===T.Yb.Hottest?T.Yb.Latest:T.Yb.Hottest)}),[t,n]);return i.a.createElement(z,{onClick:c},G[t],i.a.createElement(L.a,{size:16}))}var W=n("qTyD"),H=n("HOg7"),V=Object(_.a)(Object(g.a)(W.a,m.a.leetbookReadPickedDiscussButtonExposure),m.a.leetbookReadPickedDiscussButtonClick),U=i.a.memo((function(e){var t=e.questionAuthorSlug,n=e.qaQuestionUuid,c=e.scrollingElementRef,o=Object(u.__read)(Object(d.a)(P),2)[1].fetchAnswerPageInfo,_=Object(u.__read)(Object(d.a)(R),2),g=_[0],v=_[1],h=g.loading,A=g.answers,S=g.totalNum,w=g.pageSize,k=g.pageNum,x=g.orderBy,D=Object(p.j)(),E=D.bookSlug,F=D.pageId,T=Object(N.b)(),I=Object(u.__read)(Object(O.q)(),2),q=I[0],C=I[1];Object(H.a)(A),Object(a.useEffect)((function(){T&&o({answerId:T,effects:[]})}),[T,o]),Object(a.useEffect)((function(){v.fetchAnswers({questionUuid:n,pageNum:k,orderBy:x})}),[v,n,k,x]),Object(a.useEffect)((function(){return v.resetStore}),[v]);var L=Object(O.o)(),Q=Object(O.p)(n),M=Object(O.m)({qaQuestionUuid:n,fetchAnswerPageInfo:o}),B=Object(a.useCallback)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];m.a.leetbookReadPickedDiscussReplyClick(),Q.apply(void 0,Object(u.__spread)(e))}),[Q]),z=Object(a.useCallback)((function(e){var t=e.answerId;return Object(N.a)({bookSlug:E,pageId:F,discussionId:t})}),[E,F]),G=Object(a.useCallback)((function(e){v.setPageNum(e),C()}),[v,C]);return i.a.createElement(W.c,null,q,i.a.createElement(W.g,null,i.a.createElement(y.a,{size:20}),"\u8ba8\u8bba\u533a",!Object(b.q)()&&i.a.createElement(V,{kind:"primary",onClick:M},"\u53c2\u4e0e\u8ba8\u8bba")),i.a.createElement(W.f,null,i.a.createElement(W.h,null,"\u5171 ",S," \u4e2a\u8ba8\u8bba"),i.a.createElement($,{orderBy:x,onChange:v.setOrderBy})),h?i.a.createElement(W.d,null,i.a.createElement(r.a,null)):A.length?i.a.createElement(W.b,null,i.a.createElement(f.a,null,A.map((function(e){return i.a.createElement(j.a,{key:e.uuid,questionAuthorSlug:t,questionAuthorSuffix:"\u521b\u4f5c\u4eba",detail:e,onEdit:L,onReply:B,fetchAnswerPageInfo:o,getCopyLink:E&&F?z:void 0,forceExpanded:!0,scrollingElementRef:c,disabledOperations:[O.d.Favor,O.d.Share,O.d.FeatureRequest]})}))),w&&i.a.createElement(W.e,null,i.a.createElement(s.a,{total:S,pageSize:w,current:k,onChange:G,showSizeChanger:!1}))):i.a.createElement(W.d,null,i.a.createElement(l.a,{type:"img",description:"\u6682\u65e0\u8ba8\u8bba"})))})),K=function(e){var t=e.error;return t&&console.error(t),i.a.createElement(r.a,{isBlocking:!0,delayTimeToUpdateLoadingCountInMs:500})},Y=o()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(5),n.e(27),n.e(3),n.e(4),n.e(9),n.e(6),n.e(7),n.e(8),n.e(15),n.e(12),n.e(14),n.e(13),n.e(11),n.e(18),n.e(40),n.e(44),n.e(55),n.e(57),n.e(31),n.e(43),n.e(54),n.e(45),n.e(38),n.e(56),n.e(32),n.e(53),n.e(46),n.e(58),n.e(42),n.e(34),n.e(28),n.e(36),n.e(47),n.e(37),n.e(33),n.e(29),n.e(39),n.e(30),n.e(49),n.e(52),n.e(41),n.e(48),n.e(35),n.e(51),n.e(50),n.e(61),n.e(62),n.e(2),n.e(16),n.e(20),n.e(25),n.e(60),n.e(59),n.e(66),n.e(63),n.e(64),n.e(65),n.e(70),n.e(112)]).then(n.bind(null,"yPl1"))},loading:K,webpack:function(){return["yPl1"]},modules:["main-circle"]}),X=o()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(5),n.e(27),n.e(3),n.e(4),n.e(9),n.e(6),n.e(7),n.e(8),n.e(15),n.e(12),n.e(14),n.e(13),n.e(11),n.e(18),n.e(40),n.e(44),n.e(55),n.e(57),n.e(31),n.e(43),n.e(54),n.e(45),n.e(38),n.e(56),n.e(32),n.e(53),n.e(46),n.e(58),n.e(42),n.e(34),n.e(28),n.e(36),n.e(47),n.e(37),n.e(33),n.e(29),n.e(39),n.e(30),n.e(49),n.e(52),n.e(41),n.e(48),n.e(35),n.e(51),n.e(50),n.e(62),n.e(2),n.e(16),n.e(20),n.e(25),n.e(60),n.e(59),n.e(66)]).then(n.bind(null,"Oih5"))},loading:K,webpack:function(){return["Oih5"]},modules:["main-circle-editor"]})},mH2o:function(e,t,n){"use strict";n.d(t,"a",(function(){return z})),n.d(t,"b",(function(){return U})),n.d(t,"c",(function(){return pe})),n.d(t,"f",(function(){return Oe})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return xe})),n.d(t,"g",(function(){return Ge})),n.d(t,"h",(function(){return ut})),n.d(t,"i",(function(){return pt})),n.d(t,"j",(function(){return mt})),n.d(t,"k",(function(){return At})),n.d(t,"l",(function(){return Gt})),n.d(t,"m",(function(){return B})),n.d(t,"n",(function(){return Vt}));var a,i,c=n("D57K"),o=n("5Nzd"),r=n("u3dr"),u=n("2wT7"),s=n("HnWI"),d=n("+Aeu"),p=n("nHJD"),b=n("oOYJ"),l=n("TtBF"),f=n("9EWH"),O=n("2DAM"),j=n.n(O),y=n("pN2L"),_=n("d9YI"),g=n("Cc9O"),m=n("U3QC"),v=n("AouM"),h=n("4HYP"),A=n("mhnT"),S=n("2t7I"),w=n("IMYO"),k=n("W/Ou"),x=n("YnR9"),D=n("wUZp"),E=n("B07F"),F=n("AF8X"),T=n("LgXZ"),I=n("34li"),q=n("I6BV"),C=n("C6/4"),R=n("0OXR"),P=n("fGMb"),N={loading:!0,question:null,sharedAnswer:null,status:null,userSlug:"",sharedAnswerLoading:!1,answers:{list:[],loading:!0,isEmpty:!1,totalNum:0},orderBy:I.Yb.Hottest,pageNum:1,pageSize:0},L=j()(x.a.main.PATH.discuss.discussionDetail),Q=j()(x.a.main.PATH.discuss.viewShare),M=j()(x.a.main.PATH.discuss.viewCommentShare),B=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=N,n}var n,a,i,o,u,O,j,x,B,z,G,$,W,H,V,U,K,Y,X,J,Z,ee;return Object(c.__extends)(t,e),t.prototype.setQuestionDetail=function(e,t){e.question=t||null,e.loading=!1},t.prototype.setQuestionStatus=function(e,t){e.status=t.status||null,e.userSlug=t.userSlug||"",e.loading=!1},t.prototype.setSharedAnswer=function(e,t){e.sharedAnswer=t,e.sharedAnswerLoading=!1},t.prototype.setSharedAnswerLoading=function(e){e.sharedAnswerLoading=!0},t.prototype.clearSharedAnswer=function(e){e.sharedAnswer=null},t.prototype.setOrderBy=function(e,t){e.orderBy=t},t.prototype.setPageNum=function(e,t){e.pageNum=t},t.prototype.setList=function(e,t){var n=t.totalNum,a=t.list,i=t.pageSize,o=Object(d.h)(a);return Object(c.__assign)(Object(c.__assign)({},e),{answers:Object(c.__assign)(Object(c.__assign)({},e.answers),{list:o,loading:!1,isEmpty:!o.length,totalNum:n}),pageSize:i})},t.prototype.setQuestionFavorite=function(e,t){e.question&&(e.question.isMyFavorite=t,e.question.favoriteCount=t?e.question.favoriteCount+1:e.question.favoriteCount-1)},t.prototype.clearList=function(e){e.answers.list=[]},t.prototype.restore=function(){return N},t.prototype.getQuestionDetail=function(e){var t=this;return e.pipe(Object(m.a)((function(e){return Object(T.a)(t.client,{entityId:e,entityType:I.bb.Community})})),Object(v.a)((function(e){return t.client.watchQuery({query:q.a,variables:{uuid:e}}).pipe(Object(D.a)("\u83b7\u53d6\u8ba8\u8bba\u8be6\u60c5\u5931\u8d25"),Object(h.b)((function(e){var n=e.data;return Object(y.a)(t.getActions().setQuestionDetail(n.qaQuestion&&Object(F.o)(n.qaQuestion)),p.a)})))})),Object(A.a)(this.dispose$),Object(S.a)())},t.prototype.getQuestionDetailStatus=function(e){var t=this;return e.pipe(Object(m.a)((function(e){return Object(T.a)(t.client,{entityId:e,entityType:I.bb.Community})})),Object(v.a)((function(e){return t.client.watchQuery({query:C.a,variables:{uuid:e}}).pipe(Object(D.a)("\u83b7\u53d6\u8ba8\u8bba\u8be6\u72b6\u6001\u60c5\u5931\u8d25"),Object(h.b)((function(e){var n,a,i,c=e.data;return Object(y.a)(t.getActions().setQuestionStatus({status:null===(n=c.qaQuestion)||void 0===n?void 0:n.status,userSlug:null===(i=null===(a=c.qaQuestion)||void 0===a?void 0:a.contentAuthor)||void 0===i?void 0:i.userSlug}),p.a)})))})),Object(A.a)(this.dispose$),Object(S.a)())},t.prototype.getAnswerList=function(e){var t=this;return e.pipe(Object(v.a)((function(e){var n=e.pageNum,a=Object(c.__rest)(e,["pageNum"]);return t.client.watchQuery({query:R.a,variables:Object(c.__assign)(Object(c.__assign)({},a),{pageNum:n-1})}).pipe(Object(w.a)((function(){return _.a})),Object(h.b)((function(e){var n=e.data.qaAnswerListV2,a=n.nodes,i=n.totalNum,c=n.pageSize,o=a.map((function(e){return Object(d.l)(e)}));return Object(y.a)(t.getActions().setList({totalNum:i,list:o,pageSize:c}),p.a)})))})))},t.prototype.getAnswer=function(e){var t=this;return e.pipe(Object(v.a)((function(e){return t.client.watchQuery({query:P.a,variables:{uuid:e}}).pipe(Object(D.a)("\u83b7\u53d6\u8ba8\u8bba\u5931\u8d25"),Object(h.b)((function(e){var n=e.data;return Object(y.a)(t.getActions().setSharedAnswer(n.qaAnswer&&Object(d.l)(n.qaAnswer)||null),p.a)})),Object(k.a)(t.getActions().setSharedAnswerLoading()))})),Object(A.a)(Object(g.a)(this.dispose$,this.disposeSharedAnswer$)),Object(S.a)())},Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object)],t.prototype,"dispose$",void 0),Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(a="undefined"!==typeof s.a&&s.a)?a:Object)],t.prototype,"disposeByToken$",void 0),Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(i="undefined"!==typeof s.a&&s.a)?i:Object)],t.prototype,"disposeSharedAnswer$",void 0),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(o="undefined"!==typeof f.Draft&&f.Draft)?o:Object,Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setQuestionDetail",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(u="undefined"!==typeof f.Draft&&f.Draft)?u:Object,Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setQuestionStatus",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(O="undefined"!==typeof f.Draft&&f.Draft)?O:Object,Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setSharedAnswer",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(j="undefined"!==typeof f.Draft&&f.Draft)?j:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setSharedAnswerLoading",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(x="undefined"!==typeof f.Draft&&f.Draft)?x:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"clearSharedAnswer",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(B="undefined"!==typeof f.Draft&&f.Draft)?B:Object,"function"===typeof(z="undefined"!==typeof I.Yb&&I.Yb)?z:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setOrderBy",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(G="undefined"!==typeof f.Draft&&f.Draft)?G:Object,Number]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setPageNum",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setList",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof($="undefined"!==typeof f.Draft&&f.Draft)?$:Object,Boolean]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setQuestionFavorite",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(W="undefined"!==typeof f.Draft&&f.Draft)?W:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"clearList",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"restore",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(H="undefined"!==typeof s.a&&s.a)?H:Object]),Object(c.__metadata)("design:returntype","function"===typeof(V="undefined"!==typeof s.a&&s.a)?V:Object)],t.prototype,"getQuestionDetail",null),Object(c.__decorate)([Object(b.a)({payloadGetter:function(e,t){var n=e.path,a=n.match(L)||n.match(Q)||n.match(M);return a&&a[1]?a[1]:t()},skipFirstClientDispatch:!1}),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(U="undefined"!==typeof s.a&&s.a)?U:Object]),Object(c.__metadata)("design:returntype","function"===typeof(K="undefined"!==typeof s.a&&s.a)?K:Object)],t.prototype,"getQuestionDetailStatus",null),Object(c.__decorate)([Object(b.a)({payloadGetter:function(e,t){var n=e.path,a=n.match(L)||n.match(Q)||n.match(M);return a&&a[1]?{questionUuid:a[1],orderBy:I.Yb.Hottest,pageNum:1}:t()},skipFirstClientDispatch:!1}),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(Y="undefined"!==typeof s.a&&s.a)?Y:Object]),Object(c.__metadata)("design:returntype","function"===typeof(X="undefined"!==typeof s.a&&s.a)?X:Object)],t.prototype,"getAnswerList",null),Object(c.__decorate)([Object(b.a)({payloadGetter:function(e,t){if(L.test(e.path))return t();var n=e.path.match(Q)||e.path.match(M);return n&&n[2]?n[2]:t()},skipFirstClientDispatch:!1}),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(J="undefined"!==typeof s.a&&s.a)?J:Object]),Object(c.__metadata)("design:returntype","function"===typeof(Z="undefined"!==typeof s.a&&s.a)?Z:Object)],t.prototype,"getAnswer",null),t=Object(c.__decorate)([Object(l.a)("QuestionDetailModule"),Object(c.__metadata)("design:paramtypes",["function"===typeof(ee="undefined"!==typeof E.a&&E.a)?ee:Object])],t)}(u.a),z=function(e){function t(t,n){var a=e.call(this)||this;return a.questionDetail=t,a.scrollEffect=n,a.defaultState={},a}var n,a,i,u;return Object(c.__extends)(t,e),t.prototype.fetchAnswerPageInfo=function(e){return e.pipe(this.scrollEffect.fetchAnswerPageInfo(this.questionDetail.getState$(),this.questionDetail.getActions().setPageNum))},Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object]),Object(c.__metadata)("design:returntype","function"===typeof(a="undefined"!==typeof s.a&&s.a)?a:Object)],t.prototype,"fetchAnswerPageInfo",null),t=Object(c.__decorate)([Object(o.a)(),Object(c.__metadata)("design:paramtypes",["function"===typeof(i="undefined"!==typeof B&&B)?i:Object,"function"===typeof(u="undefined"!==typeof d.e&&d.e)?u:Object])],t)}(u.a),G=n("+ycC"),$=n("u+QU"),W=n("L6nh"),H={detail:{},loading:!1,status:null,userSlug:""},V=j()(x.a.main.PATH.discuss.articleDetail),U=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=H,n}var n,a,i,o,u,d,f;return Object(c.__extends)(t,e),t.prototype.resetStore=function(){return H},t.prototype.fail=function(e){return e},t.prototype.setLoading=function(e){return Object(c.__assign)(Object(c.__assign)({},e),{loading:!0})},t.prototype.setDetail=function(e,t){if(!t)return Object(c.__assign)(Object(c.__assign)({},e),{loading:!1});var n=t.slug,a=t.title,i=t.thumbnail,o=t.content,r=t.reactionType,u=t.reactionsV2,s=t.hitCount,d=t.createdAt,p=t.updatedAt,b=t.subscribed,l=t.isMyFavorite,f=t.identifier,O=t.resourceType,j=t.pinnedGlobally,y=t.pinned,_=t.sunk,g=t.isEditorsPick,m=t.byLeetcode,v=t.status,h=t.summary,A=t.author,S=A.username,w=A.profile,k=w.userAvatar,x=w.userSlug,D=w.realName,E=t.tags,T=t.subject,I=t.topic,q=t.nextArticle,C=t.articleType,R=t.ipRegion;return Object(c.__assign)(Object(c.__assign)({},e),{detail:Object(c.__assign)(Object(c.__assign)({},e.detail),{slug:n,topicId:I&&I.id,lastCommentCreatedAtInSec:I&&I.lastComment&&I.lastComment.post.creationDate,articleType:C,title:a,cover:i,content:o,reactionType:r,reactionsV2:u||[],viewCount:s,createdAt:d,updatedAt:p&&!Object(F.i)(d,p)?p:null,subscribed:b,favored:l,identifier:f,resourceType:O,pinnedGlobally:j,pinned:y,sunk:_,picked:g,official:m,status:v,summary:h,author:{name:D||S,slug:x,avatar:k},relatedTags:E.map((function(e){var t=e.name,n=e.slug;return{name:e.nameTranslated||t,slug:n,tagType:e.tagType}})),subject:T,nextArticle:q,ipRegion:R}),loading:!1})},t.prototype.setDetailStatus=function(e,t){return Object(c.__assign)(Object(c.__assign)({},e),{status:t.status||null,userSlug:t.userSlug||"",loading:!1})},t.prototype.getDetail=function(e){var t=this;return e.pipe(Object(m.a)((function(e){return Object(T.a)(t.client,{entityId:e,entityType:I.bb.Community})})),Object(v.a)((function(e){return t.client.watchQuery({query:G.a,variables:{id:e}}).pipe(Object(D.a)("\u83b7\u53d6\u6587\u7ae0\u8be6\u60c5\u5931\u8d25"),Object(h.a)((function(e){var n=e.data;return Object(y.a)(t.getActions().setDetail(n.columnsArticleById),p.a)})),Object(k.a)(t.getActions().setLoading()))})),Object(A.a)(this.dispose$),Object(S.a)())},t.prototype.getDetailStatus=function(e){var t=this;return e.pipe(Object(m.a)((function(e){return Object(T.a)(t.client,{entityId:e,entityType:I.bb.Community})})),Object(v.a)((function(e){return t.client.watchQuery({query:$.a,variables:{id:e}}).pipe(Object(D.a)("\u83b7\u53d6\u6587\u7ae0\u8be6\u60c5\u5931\u8d25"),Object(h.a)((function(e){var n,a,i=e.data;return Object(y.a)(t.getActions().setDetailStatus({status:null===(n=i.columnsArticleById)||void 0===n?void 0:n.status,userSlug:null===(a=i.columnsArticleById)||void 0===a?void 0:a.author.profile.userSlug}),p.a)})),Object(k.a)(t.getActions().setLoading()))})),Object(A.a)(this.dispose$),Object(S.a)())},Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object)],t.prototype,"dispose$",void 0),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"resetStore",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"fail",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setLoading",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,"function"===typeof(a="undefined"!==typeof W.Maybe&&W.Maybe)?a:Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setDetail",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setDetailStatus",null),Object(c.__decorate)([Object(b.a)({payloadGetter:function(e,t){var n=e.path.match(V);return n&&n[1]?n[1]:t()},skipFirstClientDispatch:!1}),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(i="undefined"!==typeof s.a&&s.a)?i:Object]),Object(c.__metadata)("design:returntype","function"===typeof(o="undefined"!==typeof s.a&&s.a)?o:Object)],t.prototype,"getDetail",null),Object(c.__decorate)([Object(b.a)({payloadGetter:function(e,t){var n=e.path.match(V);return n&&n[1]?n[1]:t()},skipFirstClientDispatch:!1}),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(u="undefined"!==typeof s.a&&s.a)?u:Object]),Object(c.__metadata)("design:returntype","function"===typeof(d="undefined"!==typeof s.a&&s.a)?d:Object)],t.prototype,"getDetailStatus",null),t=Object(c.__decorate)([Object(l.a)("ArticleDetailModule"),Object(c.__metadata)("design:paramtypes",["function"===typeof(f="undefined"!==typeof E.a&&E.a)?f:Object])],t)}(u.a),K=n("rzNM"),Y=n("Jg5f"),X=n("fgzu"),J=n("B8Ql"),Z=n("IJ3h"),ee=n("fcA2"),te=n("Mgpv"),ne=n("x2sj"),ae=n("Fr7C"),ie=n("B6mg"),ce=n("SDuy"),oe=n("+ir7"),re=n("FNKl"),ue=n("alFq"),se=n("NKbs"),de=n("VxrX"),pe=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState={},n}var n,a,i,u,d,p,b,l,f,O,j,y,g,m,v,h,S,k,x,F,T,I,q,C,R,P;return Object(c.__extends)(t,e),t.prototype.noop=function(){},t.prototype.addReaction=function(e){var t=this;return e.pipe(Object(K.a)((function(e){var n=e.articleId,a=e.reactionType;return t.client.mutate({mutation:J.a,variables:{articleId:n,reactionType:a}}).pipe(Object(D.a)("\u6dfb\u52a0\u6587\u7ae0\u53cd\u54cd\u5931\u8d25"),Object(Y.a)((function(e){var a,i=e.data;return(null===(a=null===i||void 0===i?void 0:i.columnsAddReaction)||void 0===a?void 0:a.ok)&&de.a.discuss.discussArticleAddReaction(n),t.getActions().noop()})),Object(A.a)(t.dispose$))})))},t.prototype.removeReaction=function(e){var t=this;return e.pipe(Object(K.a)((function(e){return t.client.mutate({mutation:Z.a,variables:{articleId:e}}).pipe(Object(D.a)("\u53d6\u6d88\u6587\u7ae0\u53cd\u54cd\u5931\u8d25"),Object(Y.a)((function(n){var a,i=n.data;return(null===(a=null===i||void 0===i?void 0:i.columnsRemoveReaction)||void 0===a?void 0:a.ok)&&de.a.discuss.discussArticleRemoveReaction(e),t.getActions().noop()})),Object(A.a)(t.dispose$))})))},t.prototype.addFavorite=function(e){var t=this;return e.pipe(Object(K.a)((function(e){return t.client.mutate({mutation:ee.a,variables:{data:{articleId:e}}}).pipe(Object(D.a)("\u6536\u85cf\u6587\u7ae0\u5931\u8d25"),Object(Y.a)((function(n){var a=n.data;return a&&a.addFavoriteArticle&&a.addFavoriteArticle.ok&&de.a.discuss.discussArticleAddFavorite(e),t.getActions().noop()})),Object(A.a)(t.dispose$))})))},t.prototype.removeFavorite=function(e){var t=this;return e.pipe(Object(K.a)((function(e){return t.client.mutate({mutation:te.a,variables:{data:{articleId:e}}}).pipe(Object(D.a)("\u53d6\u6d88\u6536\u85cf\u6587\u7ae0\u5931\u8d25"),Object(Y.a)((function(n){var a=n.data;return a&&a.removeFavoriteArticle&&a.removeFavoriteArticle.ok&&de.a.discuss.discussArticleRemovedFavorite(e),t.getActions().noop()})),Object(A.a)(t.dispose$))})))},t.prototype.deleteArticle=function(e){var t=this;return e.pipe(Object(K.a)((function(e){return t.client.mutate({mutation:ne.a,variables:{id:e}}).pipe(Object(D.a)("\u5220\u9664\u6587\u7ae0\u5931\u8d25"),Object(Y.a)((function(n){var a=n.data;return a&&a.deleteArticle&&a.deleteArticle.ok&&de.a.discuss.discussDeleteArticle(e),t.getActions().noop()})),Object(A.a)(t.dispose$))})))},t.prototype.managementDeleteArticle=function(e){var t=this;return e.pipe(Object(K.a)((function(e){var n=e.slug,a=e.uuid;return t.client.mutate({mutation:ae.a,variables:{slug:n,value:!0},fallbackErrorMessageForUnknownError:"\u5220\u9664\u6587\u7ae0\u5931\u8d25"}).pipe(Object(w.a)((function(){return _.a})),Object(Y.a)((function(e){var n,i=e.data;return(null===(n=null===i||void 0===i?void 0:i.columnsSetArticleAsRemoved)||void 0===n?void 0:n.ok)&&de.a.discuss.discussDeleteArticle(a),t.getActions().noop()})),Object(A.a)(t.dispose$))})))},t.prototype.togglePinnedGlobally=function(e){var t=this;return e.pipe(Object(K.a)((function(e){var n=e.articleId,a=e.pinned,i=a?"\u5168\u7ad9\u7f6e\u9876\u6210\u529f":"\u53d6\u6d88\u5168\u7ad9\u7f6e\u9876\u6210\u529f",c=a?"\u5168\u7ad9\u7f6e\u9876\u6587\u7ae0\u5931\u8d25":"\u53d6\u6d88\u5168\u7ad9\u7f6e\u9876\u6587\u7ae0\u5931\u8d25";return t.client.mutate({mutation:ie.a,variables:{articleId:n,pinned:a}}).pipe(Object(D.a)(c),Object(Y.a)((function(e){var c=e.data;return c&&c.columnsTogglePinArticleGlobally&&c.columnsTogglePinArticleGlobally.ok&&(a?de.a.discuss.discussPinArticleGlobally(n):de.a.discuss.discussCancelPinArticleGlobally(n),X.a.success(i)),t.getActions().noop()})),Object(A.a)(t.dispose$))})))},t.prototype.togglePinnedInSubject=function(e){var t=this;return e.pipe(Object(K.a)((function(e){var n=e.articleId,a=e.pinned,i=a?"\u677f\u5757\u5185\u7f6e\u9876\u6210\u529f":"\u53d6\u6d88\u677f\u5757\u5185\u7f6e\u9876\u6210\u529f",c=a?"\u677f\u5757\u5185\u7f6e\u9876\u6587\u7ae0\u5931\u8d25":"\u53d6\u6d88\u677f\u5757\u5185\u7f6e\u9876\u6587\u7ae0\u5931\u8d25";return t.client.mutate({mutation:ce.a,variables:{articleId:n,pinned:a}}).pipe(Object(D.a)(c),Object(Y.a)((function(e){var c=e.data;return c&&c.columnsTogglePinArticleInCategory&&c.columnsTogglePinArticleInCategory.ok&&(a?de.a.discuss.discussPinArticleInSubject(n):de.a.discuss.discussCancelPinArticleInSubject(n),X.a.success(i)),t.getActions().noop()})),Object(A.a)(t.dispose$))})))},t.prototype.toggleSunk=function(e){var t=this;return e.pipe(Object(K.a)((function(e){var n=e.articleId,a=e.sunk,i=a?"\u4e0b\u6c89\u6210\u529f":"\u53d6\u6d88\u4e0b\u6c89\u6210\u529f",c=a?"\u4e0b\u6c89\u5931\u8d25":"\u53d6\u6d88\u4e0b\u6c89\u5931\u8d25";return t.client.mutate({mutation:oe.a,variables:{articleId:n,sunk:a}}).pipe(Object(D.a)(c),Object(Y.a)((function(e){var c=e.data;return c&&c.columnsToggleSunkArticle&&c.columnsToggleSunkArticle.ok&&(a?de.a.discuss.discussSinkArticle(n):de.a.discuss.discussCancelSinkArticle(n),X.a.success(i)),t.getActions().noop()})),Object(A.a)(t.dispose$))})))},t.prototype.togglePicked=function(e){var t=this;return e.pipe(Object(K.a)((function(e){var n=e.articleId,a=e.picked,i=a?"\u7cbe\u9009\u6210\u529f":"\u53d6\u6d88\u7cbe\u9009\u6210\u529f",c=a?"\u7cbe\u9009\u5931\u8d25":"\u53d6\u6d88\u7cbe\u9009\u5931\u8d25";return t.client.mutate({mutation:re.a,variables:{id:n,value:a}}).pipe(Object(D.a)(c),Object(Y.a)((function(){return X.a.success(i),t.getActions().noop()})),Object(A.a)(t.dispose$))})))},t.prototype.toggleOfficial=function(e){var t=this;return e.pipe(Object(K.a)((function(e){var n=e.articleId,a=e.official,i=a?"\u8bbe\u4e3a\u5b98\u65b9\u6210\u529f":"\u53d6\u6d88\u8bbe\u4e3a\u5b98\u65b9\u6210\u529f",c=a?"\u8bbe\u4e3a\u5b98\u65b9\u5931\u8d25":"\u53d6\u6d88\u8bbe\u4e3a\u5b98\u65b9\u5931\u8d25";return t.client.mutate({mutation:ue.a,variables:{id:n,value:a}}).pipe(Object(D.a)(c),Object(Y.a)((function(){return X.a.success(i),t.getActions().noop()})),Object(A.a)(t.dispose$))})))},t.prototype.toggleSubscribed=function(e){var t=this;return e.pipe(Object(K.a)((function(e){var n=e.articleId,a=e.subscribed,i=a?"\u63a5\u6536\u52a8\u6001\u5931\u8d25":"\u5173\u95ed\u63d0\u9192\u5931\u8d25";return t.client.mutate({mutation:se.a,variables:{articleId:n,subscribed:a}}).pipe(Object(D.a)(i),Object(Y.a)((function(e){var i=e.data;return i&&i.columnsToggleSubscribeArticle&&i.columnsToggleSubscribeArticle.ok&&(a?de.a.discuss.discussCancelSubscribeArticle(n):de.a.discuss.discussSubscribeArticle(n)),t.getActions().noop()})),Object(A.a)(t.dispose$))})))},Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object)],t.prototype,"dispose$",void 0),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"noop",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof s.a&&s.a)?a:Object]),Object(c.__metadata)("design:returntype","function"===typeof(i="undefined"!==typeof s.a&&s.a)?i:Object)],t.prototype,"addReaction",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(u="undefined"!==typeof s.a&&s.a)?u:Object]),Object(c.__metadata)("design:returntype","function"===typeof(d="undefined"!==typeof s.a&&s.a)?d:Object)],t.prototype,"removeReaction",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(p="undefined"!==typeof s.a&&s.a)?p:Object]),Object(c.__metadata)("design:returntype","function"===typeof(b="undefined"!==typeof s.a&&s.a)?b:Object)],t.prototype,"addFavorite",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(l="undefined"!==typeof s.a&&s.a)?l:Object]),Object(c.__metadata)("design:returntype","function"===typeof(f="undefined"!==typeof s.a&&s.a)?f:Object)],t.prototype,"removeFavorite",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(O="undefined"!==typeof s.a&&s.a)?O:Object]),Object(c.__metadata)("design:returntype","function"===typeof(j="undefined"!==typeof s.a&&s.a)?j:Object)],t.prototype,"deleteArticle",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(y="undefined"!==typeof s.a&&s.a)?y:Object]),Object(c.__metadata)("design:returntype","function"===typeof(g="undefined"!==typeof s.a&&s.a)?g:Object)],t.prototype,"managementDeleteArticle",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(m="undefined"!==typeof s.a&&s.a)?m:Object]),Object(c.__metadata)("design:returntype","function"===typeof(v="undefined"!==typeof s.a&&s.a)?v:Object)],t.prototype,"togglePinnedGlobally",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(h="undefined"!==typeof s.a&&s.a)?h:Object]),Object(c.__metadata)("design:returntype","function"===typeof(S="undefined"!==typeof s.a&&s.a)?S:Object)],t.prototype,"togglePinnedInSubject",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(k="undefined"!==typeof s.a&&s.a)?k:Object]),Object(c.__metadata)("design:returntype","function"===typeof(x="undefined"!==typeof s.a&&s.a)?x:Object)],t.prototype,"toggleSunk",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(F="undefined"!==typeof s.a&&s.a)?F:Object]),Object(c.__metadata)("design:returntype","function"===typeof(T="undefined"!==typeof s.a&&s.a)?T:Object)],t.prototype,"togglePicked",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(I="undefined"!==typeof s.a&&s.a)?I:Object]),Object(c.__metadata)("design:returntype","function"===typeof(q="undefined"!==typeof s.a&&s.a)?q:Object)],t.prototype,"toggleOfficial",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(C="undefined"!==typeof s.a&&s.a)?C:Object]),Object(c.__metadata)("design:returntype","function"===typeof(R="undefined"!==typeof s.a&&s.a)?R:Object)],t.prototype,"toggleSubscribed",null),t=Object(c.__decorate)([Object(o.a)(),Object(c.__metadata)("design:paramtypes",["function"===typeof(P="undefined"!==typeof E.a&&E.a)?P:Object])],t)}(u.a),be=n("R+ki"),le=n("yfLf"),fe={allCollection:{list:[],loading:!1,isEmpty:!1,totalNum:0,pageSize:0},filter:{sortingOption:I.n.Hot,queryStr:"",pageNum:1}},Oe=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=fe,n}var n,a,i,u,p,b,l,O,j,y,g,h,A,S,x;return Object(c.__extends)(t,e),t.prototype.resetStore=function(){return fe},t.prototype.resetAllCollectionIsEmpty=function(e){e.allCollection.isEmpty=!1},t.prototype.setAllCollectionLoading=function(e){e.allCollection.loading=!0},t.prototype.setSortingOption=function(e,t){e.filter.sortingOption=t},t.prototype.setQuery=function(e,t){e.filter.queryStr=t},t.prototype.setPage=function(e,t){e.filter.pageNum=t},t.prototype.clearList=function(e){e.allCollection.list=[]},t.prototype.setAllCollection=function(e,t){var n=t.totalNum,a=t.list,i=t.pageSize,o=Object(d.h)(a);return Object(c.__assign)(Object(c.__assign)({},e),{allCollection:Object(c.__assign)(Object(c.__assign)({},e.allCollection),{list:o,loading:!1,isEmpty:!o.length,totalNum:n,pageSize:i})})},t.prototype.getArticles=function(e){var t=this;return e.pipe(Object(be.a)(300),Object(v.a)((function(e){var n=e.tagSlugs,a=e.query,i=e.isFeatured,c=e.pageNum,o=e.effect,r=e.sortType;return t.client.watchQuery({query:le.a,variables:{query:a,isFeatured:i,tags:n,pageNum:c-1,sortType:r},fetchPolicy:"network-only"}).pipe(Object(m.a)((function(){return null===o||void 0===o?void 0:o()})),Object(Y.a)((function(e){var n=e.data.columnsArticlesV2,a=n.totalNum,i=n.nodes,c=n.pageSize,o=i.map((function(e){return Object(F.l)(e)}));return t.getActions().setAllCollection({totalNum:a,list:o,pageSize:c})})),Object(k.a)(t.getActions().disposeGetSuggestions$(),t.getActions().setAllCollectionLoading(),t.getActions().resetAllCollectionIsEmpty()),Object(w.a)((function(){return _.a})))})))},Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object)],t.prototype,"dispose$",void 0),Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(a="undefined"!==typeof s.a&&s.a)?a:Object)],t.prototype,"_disposeByPage$",void 0),Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(i="undefined"!==typeof s.a&&s.a)?i:Object)],t.prototype,"disposeGetInSubject$",void 0),Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(u="undefined"!==typeof s.a&&s.a)?u:Object)],t.prototype,"disposeGetAll$",void 0),Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(p="undefined"!==typeof s.a&&s.a)?p:Object)],t.prototype,"disposeGetSuggestions$",void 0),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"resetStore",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(b="undefined"!==typeof f.Draft&&f.Draft)?b:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"resetAllCollectionIsEmpty",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(l="undefined"!==typeof f.Draft&&f.Draft)?l:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setAllCollectionLoading",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(O="undefined"!==typeof f.Draft&&f.Draft)?O:Object,"function"===typeof(j="undefined"!==typeof I.n&&I.n)?j:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setSortingOption",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(y="undefined"!==typeof f.Draft&&f.Draft)?y:Object,String]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setQuery",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(g="undefined"!==typeof f.Draft&&f.Draft)?g:Object,Number]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setPage",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(h="undefined"!==typeof f.Draft&&f.Draft)?h:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"clearList",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setAllCollection",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(A="undefined"!==typeof s.a&&s.a)?A:Object]),Object(c.__metadata)("design:returntype","function"===typeof(S="undefined"!==typeof s.a&&s.a)?S:Object)],t.prototype,"getArticles",null),t=Object(c.__decorate)([Object(o.a)(),Object(c.__metadata)("design:paramtypes",["function"===typeof(x="undefined"!==typeof E.a&&E.a)?x:Object])],t)}(u.a),je=n("0cIN"),ye=n("gQst"),_e=n("z5yO"),ge=n("RtDN"),me=n("eb+u"),ve=n("Qj05"),he=n("AApe"),Ae=n("KSkC"),Se=n("YhDC"),we=n("eeNx"),ke=n("+75L");!function(e){e.Edit="Edit",e.Preview="Preview",e.TwoColumn="TwoColumn"}(a||(a={})),function(e){e.Restore="Restore",e.Delete="Delete",e.Publish="Publish"}(i||(i={}));var xe=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=De(),n}var n,a,u,p,b,l,O,j,g,S,w,T,q,C,R,P,N,L,Q,M;return Object(c.__extends)(t,e),Object.defineProperty(t.prototype,"history",{get:function(){return o.b.getInstanceByToken(ve.a.provide)},enumerable:!1,configurable:!0}),t.prototype.switchMode=function(e,t){e.mode=t},t.prototype.setEditingMode=function(e,t){e.editingMode=t},t.prototype.switchRewardEnabled=function(e,t){e.rewardEnabled=t},t.prototype.setRewardButtonVisible=function(e,t){e.canEditReward=t},t.prototype.reset=function(){return De()},t.prototype.publish=function(e){return this._publish({trigger$:e,mutation:he.a})},t.prototype.mock=function(e){return this._publish({trigger$:e,mutation:Ae.a})},t.prototype._setIsPublishing=function(e,t){e.isPublishing=t},t.prototype.delete=function(e){var t=this;return e.pipe(Object(_e.a)((function(e){return!!e})),Object(v.a)((function(e){return t.client.mutate({mutation:ne.a,variables:{id:e}}).pipe(Object(Y.a)((function(e){var t=e.data;return t&&t.deleteArticle})),Object(m.a)((function(e){e&&e.ok?t.history&&(t.history.length>0?t.history.goBack():t.history.replace(x.a.main.paths.discuss.home({subjectSlug:ke.l}))):X.a.error((null===e||void 0===e?void 0:e.error)||"\u672a\u77e5\u9519\u8bef")})),Object(h.b)((function(){return _.a})),Object(D.a)("fetch deleteDiscussArticle error"),Object(k.a)(t.getActions().dispose$(i.Delete)),Object(k.a)(t.getActions()._setIsDeleting(!0)),Object(ge.a)(t.getActions()._setIsDeleting(!1)),Object(A.a)(t.dispose$.pipe(Object(_e.a)((function(e){return e!==i.Delete})))))})))},t.prototype._setIsDeleting=function(e,t){e.isDeleting=t},t.prototype.restoreDraft=function(e){var t=this;return e.pipe(Object(v.a)((function(e){return t.client.query({fetchPolicy:"network-only",query:Se.a,variables:{id:e}}).pipe(Object(Y.a)((function(e){var t=e.data;return t&&t.columnsDraft})),Object(h.b)((function(e){return e?Object(y.a)(t.getActions()._setNewState(function(e){return Object(c.__assign)(Object(c.__assign)({},De()),{content:e.content,title:e.title,newVersion:"\x01"===e.title[0],thumbnail:e.thumbnail,tags:e.tags,subject:e.subject||null,canAutoSave:e.status===I.o.Draft,isPicked:e.isEditorsPick,rewardEnabled:!!e.rewardEnabled,canEditReward:!!e.canEditReward})}(e))):_.a})),Object(D.a)("fetch communityColumnsMyDraft error"),Object(k.a)(t.getActions().dispose$(i.Restore)),Object(ge.a)(t.getActions()._setIsRestoring(!1)),Object(k.a)(t.getActions()._setIsRestoring(!0)),Object(A.a)(t.dispose$.pipe(Object(_e.a)((function(e){return e!==i.Restore})))))})))},t.prototype._setIsRestoring=function(e,t){e.isRestoring=t},t.prototype.save=function(e,t){var n=this,a=e.pipe(Object(me.a)(t),Object(Y.a)((function(e){var t=Object(c.__read)(e,2),n=t[0].input,a=t[1];return Object(c.__assign)(Object(c.__assign)({},a),n)}))),i=e.pipe(Object(me.a)(a),Object(_e.a)((function(e){return Object(c.__read)(e,2)[1].canAutoSave})),Object(v.a)((function(e){var t=Object(c.__read)(e,2),a=t[0].id,i=t[1];return Object(je.a)(1e3).pipe(Object(v.a)((function(){return n.client.mutate({mutation:we.a,variables:{data:{uuid:a,content:i.content,title:i.title,tags:i.tags.map((function(e){return e.slug})),thumbnail:i.thumbnail||"",subjectSlug:i.subject?i.subject.slug:""}}}).pipe(Object(Y.a)((function(e){var t=e.data;return t&&t.columnsAutoSaveArticle&&t.columnsAutoSaveArticle.article})),Object(_e.a)((function(e){return!!e})),Object(m.a)((function(e){var t;a||null===(t=n.history)||void 0===t||t.replace(x.a.main.paths.discuss.writeArticle({articleId:e.uuid}))})),Object(h.b)((function(){return _.a})),Object(D.a)("fetch columnsAutoSaveArticle error"),Object(ge.a)(n.getActions()._setIsSaving(!1)),Object(k.a)(n.getActions()._setIsSaving(!0)))})),Object(A.a)(n.dispose$))}))),o=a.pipe(Object(Y.a)((function(e){return n.getActions()._setNewState(e)})));return Object(ye.a)(i,o)},t.prototype._setIsSaving=function(e,t){e.isSaving=t},t.prototype._setNewState=function(e,t){var n=e.editingMode;return Object(c.__assign)(Object(c.__assign)({},t),{editingMode:n})},t.prototype.setTemplateToState=function(e){e.content=F.s},t.prototype._publish=function(e){var t=this,n=e.trigger$,a=e.mutation;return n.pipe(Object(v.a)((function(e){return e.pipe(Object(v.a)((function(e){return t.client.mutate({variables:e,mutation:a,update:Object(d.g)(/columnsArticleSuggestionOptions|columnsHotArticles|columnsArticles/)}).pipe(Object(Y.a)((function(e){var t=e.data;if(t)return"columnsPublishArticle"in t?t.columnsPublishArticle:"columnsOfficialPublishArticle"in t?t.columnsOfficialPublishArticle:void 0})),Object(m.a)((function(e){var n;e&&(e.ok&&e.article?null===(n=t.history)||void 0===n||n.replace(x.a.main.paths.discuss.articleDetail({articleId:e.article.uuid})):X.a.error(e.error||"\u672a\u77e5\u9519\u8bef"))})),Object(h.b)((function(){return _.a})),Object(D.a)("fetch publishDiscussArticle error"),Object(k.a)(t.getActions().dispose$(i.Publish)),Object(k.a)(t.getActions()._setIsPublishing(!0)),Object(ge.a)(t.getActions()._setIsPublishing(!1)),Object(A.a)(t.dispose$.pipe(Object(_e.a)((function(e){return e!==i.Publish})))))})))})))},Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object)],t.prototype,"dispose$",void 0),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof f.Draft&&f.Draft)?a:Object,String]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"switchMode",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(u="undefined"!==typeof f.Draft&&f.Draft)?u:Object,Boolean]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setEditingMode",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(p="undefined"!==typeof f.Draft&&f.Draft)?p:Object,Boolean]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"switchRewardEnabled",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(b="undefined"!==typeof f.Draft&&f.Draft)?b:Object,Boolean]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setRewardButtonVisible",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"reset",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(l="undefined"!==typeof s.a&&s.a)?l:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"publish",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(O="undefined"!==typeof s.a&&s.a)?O:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"mock",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(j="undefined"!==typeof f.Draft&&f.Draft)?j:Object,Boolean]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"_setIsPublishing",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(g="undefined"!==typeof s.a&&s.a)?g:Object]),Object(c.__metadata)("design:returntype","function"===typeof(S="undefined"!==typeof s.a&&s.a)?S:Object)],t.prototype,"delete",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(w="undefined"!==typeof f.Draft&&f.Draft)?w:Object,Boolean]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"_setIsDeleting",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(T="undefined"!==typeof s.a&&s.a)?T:Object]),Object(c.__metadata)("design:returntype","function"===typeof(q="undefined"!==typeof s.a&&s.a)?q:Object)],t.prototype,"restoreDraft",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(C="undefined"!==typeof f.Draft&&f.Draft)?C:Object,Boolean]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"_setIsRestoring",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(R="undefined"!==typeof s.a&&s.a)?R:Object,"function"===typeof(P="undefined"!==typeof s.a&&s.a)?P:Object]),Object(c.__metadata)("design:returntype","function"===typeof(N="undefined"!==typeof s.a&&s.a)?N:Object)],t.prototype,"save",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(L="undefined"!==typeof f.Draft&&f.Draft)?L:Object,Boolean]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"_setIsSaving",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"_setNewState",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(Q="undefined"!==typeof f.Draft&&f.Draft)?Q:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setTemplateToState",null),t=Object(c.__decorate)([Object(o.a)(),Object(c.__metadata)("design:paramtypes",["function"===typeof(M="undefined"!==typeof E.a&&E.a)?M:Object])],t)}(u.a);function De(){return{mode:a.TwoColumn,content:"",title:"",newVersion:!1,thumbnail:"",tags:[],subject:null,editingMode:!1,isSaving:!1,isRestoring:!1,isDeleting:!1,isPublishing:!1,canAutoSave:!0,isPicked:!1,rewardEnabled:!1,canEditReward:!1}}var Ee,Fe=n("//nZ"),Te=n.n(Fe),Ie=n("3n3h"),qe=n("Pu0A"),Ce=n.n(qe),Re=n("xdqw"),Pe=n("M1Eh"),Ne=n("Qn9u"),Le=n("DkOd");!function(e){e.Edit="Edit",e.Preview="Preview"}(Ee||(Ee={}));var Qe=["content","title","tags","subject"],Me=Object(Re.b)("discuss-topic-editor"),Be="draft",ze=x.a.main.paths,Ge=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=$e(),n}var n,a,i,u,p,b,l,O,j,g,A,S,w,x,T,I,C,R,P,N,L,Q,M,B,z,G,$,H,V,U,K;return Object(c.__extends)(t,e),t.prototype.save=function(e,t){var n=this;return e.pipe(Object(me.a)(t),Object(m.a)((function(e){var t=Object(c.__read)(e,2),n=t[0],a=t[1];if(null===a.uuid){var i=Object(c.__assign)(Object(c.__assign)({},Te()(a,Qe)),n);Me.set(Be,i)}})),Object(Y.a)((function(e){var t=Object(c.__read)(e,1)[0];return n.getActions()._save(t)})))},t.prototype._save=function(e,t){var n=Object(c.__assign)(Object(c.__assign)({},e),t),a=!Ce()(n,e),i=e.isShowLocalDraftTips&&!a;return Object(c.__assign)(Object(c.__assign)({},n),{hasChanged:a,isShowLocalDraftTips:i})},t.prototype.setTitle=function(e,t){e.title=t},t.prototype.setSubject=function(e,t){e.subject=t},t.prototype.setTags=function(e,t){e.tags=t},t.prototype.switchMode=function(e,t){e.mode=t},t.prototype.setEditingMode=function(e,t){e.editingMode=t},t.prototype.toggleFullscreen=function(e){e.isFullscreen=!e.isFullscreen},t.prototype.hideLocalDraftTips=function(e){e.isShowLocalDraftTips=!1},t.prototype.resetEditor=function(e){var t=this;return e.pipe(Object(h.b)((function(){return Object(y.a)(t.getActions()._reset(),t.getActions()._removeDraft())})))},t.prototype._removeDraft=function(e){return e.pipe(Object(m.a)((function(){Me.remove(Be)})),Object(Ie.a)(_.a))},t.prototype._reset=function(){return Object(c.__assign)(Object(c.__assign)({},$e()),{isShow:!0})},t.prototype.hideEditor=function(e){e.isShow=!1},t.prototype.setTemplateToState=function(e){e.content=F.s,e.isShow=!0},t.prototype.openEditor=function(){var e=Me.get(Be)||{},t=e.content,n=void 0===t?"":t,a=e.title,i=void 0===a?"":a,o=e.tags,r=void 0===o?[]:o,u=e.subject,s=void 0===u?null:u,d=!!n||!!i||r.length>0||!!s;return Object(c.__assign)(Object(c.__assign)({},$e()),{isShow:!0,isShowLocalDraftTips:d,content:n,title:i,tags:r,subject:s})},t.prototype.restoreEditor=function(e){var t=this;return e.pipe(Object(v.a)((function(e){return t.client.query({query:q.a,variables:{uuid:e}}).pipe(Object(v.a)((function(n){var a=n.data;return a&&a.qaQuestion?Object(y.a)(t.getActions()._restore(Object(c.__assign)(Object(c.__assign)({},a.qaQuestion),{uuid:e}))):_.a})),Object(D.a)("\u6062\u590d\u7f16\u8f91\u5185\u5bb9\u5931\u8d25"),Object(k.a)(t.getActions()._setIsRestoring(!0)),Object(ge.a)(t.getActions()._setIsRestoring(!1)))})))},t.prototype._restore=function(e,t){var n=e.editingMode;return Object(c.__assign)(Object(c.__assign)({},$e()),{isShow:!0,content:t.content,title:t.title,newVersion:"\x01"===t.title[0],tags:t.tags,subject:t.subject||null,uuid:t.uuid,anonymous:t.isAnonymous,editingMode:n})},t.prototype._setIsRestoring=function(e,t){e.isRestoring=t},t.prototype.setNavigation=function(e,t){e.navigation=t},t.prototype.setAnonymous=function(e,t){e.anonymous=t},t.prototype.publish=function(e){return this._publish({trigger$:e,mutation:Pe.a})},t.prototype.mock=function(e){return this._publish({trigger$:e,mutation:Ne.a})},t.prototype.update=function(e){var t=this;return e.pipe(Object(v.a)((function(e){var n=Object(c.__read)(e,2),a=n[0],i=n[1];return a.pipe(Object(v.a)((function(e){return t.client.mutate({variables:e,mutation:Le.a}).pipe(Object(D.a)("\u66f4\u65b0\u8ba8\u8bba\u5931\u8d25"),Object(Y.a)((function(e){var t=e.data;return t&&t.qaEditQuestion})),Object(m.a)((function(e){e&&e.question})),Object(v.a)((function(e){return e&&e.question?(null===i||void 0===i||i({}),Object(y.a)(t.getActions().hideEditor())):_.a})),Object(k.a)(t.getActions()._setIsSubmitting(!0)),Object(ge.a)(t.getActions()._setIsSubmitting(!1)))})))})))},t.prototype._setIsSubmitting=function(e,t){e.isSubmitting=t},t.prototype._publish=function(e){var t=this,n=e.trigger$,a=e.mutation;return n.pipe(Object(v.a)((function(e){return e.pipe(Object(v.a)((function(e){return t.client.mutate({variables:e,mutation:a,update:Object(d.g)(/qaQuestionAnswerList/)}).pipe(Object(D.a)("\u53d1\u5e03\u8ba8\u8bba\u5931\u8d25"),Object(Y.a)((function(e){var t=e.data;if(t)return"qaPublishQuestion"in t?t.qaPublishQuestion:"qaOfficialPublishQuestion"in t?t.qaOfficialPublishQuestion:void 0})),Object(m.a)((function(e){e&&e.question})),Object(v.a)((function(e){return e&&e.question?Object(y.a)(t.getActions().resetEditor(),t.getActions().hideEditor(),t.getActions().setNavigation(ze.discuss.discussionDetail({discussId:e.question.uuid}))):_.a})),Object(k.a)(t.getActions()._setIsSubmitting(!0)),Object(ge.a)(t.getActions()._setIsSubmitting(!1)))})))})))},Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object,"function"===typeof(a="undefined"!==typeof s.a&&s.a)?a:Object]),Object(c.__metadata)("design:returntype","function"===typeof(i="undefined"!==typeof s.a&&s.a)?i:Object)],t.prototype,"save",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,"function"===typeof(u="undefined"!==typeof SaveInput&&SaveInput)?u:Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"_save",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(p="undefined"!==typeof f.Draft&&f.Draft)?p:Object,String]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setTitle",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(b="undefined"!==typeof f.Draft&&f.Draft)?b:Object,Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setSubject",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(l="undefined"!==typeof f.Draft&&f.Draft)?l:Object,Array]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setTags",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(O="undefined"!==typeof f.Draft&&f.Draft)?O:Object,String]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"switchMode",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(j="undefined"!==typeof f.Draft&&f.Draft)?j:Object,Boolean]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setEditingMode",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(g="undefined"!==typeof f.Draft&&f.Draft)?g:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"toggleFullscreen",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(A="undefined"!==typeof f.Draft&&f.Draft)?A:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"hideLocalDraftTips",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(S="undefined"!==typeof s.a&&s.a)?S:Object]),Object(c.__metadata)("design:returntype","function"===typeof(w="undefined"!==typeof s.a&&s.a)?w:Object)],t.prototype,"resetEditor",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(x="undefined"!==typeof s.a&&s.a)?x:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"_removeDraft",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"_reset",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(T="undefined"!==typeof f.Draft&&f.Draft)?T:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"hideEditor",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(I="undefined"!==typeof f.Draft&&f.Draft)?I:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setTemplateToState",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"openEditor",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(C="undefined"!==typeof s.a&&s.a)?C:Object]),Object(c.__metadata)("design:returntype","function"===typeof(R="undefined"!==typeof s.a&&s.a)?R:Object)],t.prototype,"restoreEditor",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(P="undefined"!==typeof f.Draft&&f.Draft)?P:Object,"function"===typeof(N="undefined"!==typeof W.QaQuestionDetail&&W.QaQuestionDetail.QaQuestion)?N:Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"_restore",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(L="undefined"!==typeof f.Draft&&f.Draft)?L:Object,Boolean]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"_setIsRestoring",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(Q="undefined"!==typeof f.Draft&&f.Draft)?Q:Object,Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setNavigation",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(M="undefined"!==typeof f.Draft&&f.Draft)?M:Object,Boolean]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setAnonymous",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(B="undefined"!==typeof s.a&&s.a)?B:Object]),Object(c.__metadata)("design:returntype","function"===typeof(z="undefined"!==typeof s.a&&s.a)?z:Object)],t.prototype,"publish",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(G="undefined"!==typeof s.a&&s.a)?G:Object]),Object(c.__metadata)("design:returntype","function"===typeof($="undefined"!==typeof s.a&&s.a)?$:Object)],t.prototype,"mock",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(H="undefined"!==typeof s.a&&s.a)?H:Object]),Object(c.__metadata)("design:returntype","function"===typeof(V="undefined"!==typeof s.a&&s.a)?V:Object)],t.prototype,"update",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(U="undefined"!==typeof f.Draft&&f.Draft)?U:Object,Boolean]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"_setIsSubmitting",null),t=Object(c.__decorate)([Object(o.a)(),Object(c.__metadata)("design:paramtypes",["function"===typeof(K="undefined"!==typeof E.a&&E.a)?K:Object])],t)}(u.a);function $e(){return{content:"",title:"",newVersion:!1,tags:[],subject:null,isShow:!1,editingMode:!1,isFullscreen:!1,isSubmitting:!1,isRestoring:!1,hasChanged:!1,isShowLocalDraftTips:!1,mode:Ee.Edit,uuid:null,navigation:null,anonymous:!1}}var We=n("2Mvu"),He=n("CYZE"),Ve=n("cGAd"),Ue=n("lqvn"),Ke=n("Qksx"),Ye=n("u1hN"),Xe=n("rdoa"),Je={list:[],nextToken:"",tokens:[],loading:!1,hasMore:!0,isEmpty:!1,filter:{query:""}},Ze=(function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=Je,n}var n,a,i,u,b,l,O,j,w,x,T,I,q,C;Object(c.__extends)(t,e),t.prototype.resetStore=function(){return Je},t.prototype.setLoading=function(e){e.loading=!0},t.prototype.resetIsEmpty=function(e){e.isEmpty=!1},t.prototype.setQuery=function(e,t){e.filter.query=t},t.prototype.clearTokens=function(e){e.nextToken="",e.tokens=[]},t.prototype.setList=function(e,t){var n=t.nextToken,a=t.list,i=Object(d.h)(Object(Ye.a)(e.list,a,"uuid")),o=e.tokens.includes(n||null),r=o?e.tokens:e.tokens.concat(e.nextToken),u=o?e.nextToken:n||null;return Object(c.__assign)(Object(c.__assign)({},e),{list:i,nextToken:u,tokens:r,loading:!1,hasMore:null!==u,isEmpty:!i.length})},t.prototype.clearList=function(e){e.list=[]},t.prototype.fetchRecommendations=function(e,t){var n=this;return Object(ye.a)(e.pipe(Object(We.a)()),e.pipe(Object(He.a)("nextToken"),Object(Ve.a)(1),Object(_e.a)((function(e){return!!e.nextToken}))),e.pipe(Object(Ue.a)(Object(F.h)(["query","nextToken","updateQuery"])),Object(Ve.a)(1),Object(Y.a)((function(e){return Object(c.__assign)(Object(c.__assign)({},e),{clear:!0})}))),e.pipe(Object(He.a)("query"),Object(Ve.a)(1),Object(be.a)(500),Object(Y.a)((function(e){return Object(c.__assign)(Object(c.__assign)({},e),{clear:!0})})))).pipe(Object(m.a)((function(e){var t=e.tags,n=e.query,a=e.updateQuery;return a&&a({query:n,tag:t.map((function(e){return e.slug}))})})),Object(Ke.b)((function(e){return e.nextToken})),Object(h.b)((function(e){return e.pipe(Object(me.a)(t),Object(v.a)((function(e){var t=Object(c.__read)(e,2),a=t[0],i=a.query,o=a.tags,r=a.nextToken,u=a.clear,s=void 0!==u&&u,b=t[1].tokens,l=s?Object(c.__spread)([n.getActions().clearList(),n.getActions().clearTokens()],b.filter((function(e){return!!e})).map((function(e){return n.getActions().disposeByToken$(e)}))):[];return Object(g.a)(n.client.watchQuery({query:Xe.a,variables:{nextToken:r,query:i,filterTagSlugs:o.map((function(e){return e.slug}))}}).pipe(Object(D.a)("\u83b7\u53d6\u63a8\u8350\u5217\u8868\u5931\u8d25"),Object(h.b)((function(e){var t=e.data.communityRecommendedItems,a=t.nodes,i=t.nextToken,o=a.reduce((function(e,t){return Object(F.k)(t)?e.push(Object(F.o)(t)):Object(F.f)(t)?e.push(Object(d.l)(t)):Object(F.g)(t)&&e.push(Object(F.l)(Object(c.__assign)(Object(c.__assign)({},t),{sunk:t.articleSunk}))),e}),[]);return Object(y.a)(n.getActions().setList({nextToken:i,list:o}),p.a)}))),n.dispose$.pipe(Object(h.b)((function(){return _.a})))).pipe(k.a.apply(void 0,Object(c.__spread)([n.getActions().setLoading(),n.getActions().resetIsEmpty()],l)))})),Object(A.a)(n.disposeByToken$.pipe(Object(_e.a)((function(t){return t===e.key&&!!e.key})))),Object(S.a)())})))},t.prototype.triggerFetch=function(e,t){var n=this;return e.pipe(Object(me.a)(t),Object(h.b)((function(e){var t=Object(c.__read)(e,2),a=t[0],i=t[1],o=i.filter,r=i.nextToken;return null===r?_.a:Object(y.a)(n.getActions().fetchRecommendations(Object(c.__assign)(Object(c.__assign)({},o),{tags:a,nextToken:r})))})))},Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object)],t.prototype,"dispose$",void 0),Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(a="undefined"!==typeof s.a&&s.a)?a:Object)],t.prototype,"disposeByToken$",void 0),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"resetStore",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(i="undefined"!==typeof f.Draft&&f.Draft)?i:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setLoading",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(u="undefined"!==typeof f.Draft&&f.Draft)?u:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"resetIsEmpty",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(b="undefined"!==typeof f.Draft&&f.Draft)?b:Object,String]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setQuery",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(l="undefined"!==typeof f.Draft&&f.Draft)?l:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"clearTokens",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setList",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(O="undefined"!==typeof f.Draft&&f.Draft)?O:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"clearList",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(j="undefined"!==typeof s.a&&s.a)?j:Object,"function"===typeof(w="undefined"!==typeof s.a&&s.a)?w:Object]),Object(c.__metadata)("design:returntype","function"===typeof(x="undefined"!==typeof s.a&&s.a)?x:Object)],t.prototype,"fetchRecommendations",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(T="undefined"!==typeof s.a&&s.a)?T:Object,"function"===typeof(I="undefined"!==typeof s.a&&s.a)?I:Object]),Object(c.__metadata)("design:returntype","function"===typeof(q="undefined"!==typeof s.a&&s.a)?q:Object)],t.prototype,"triggerFetch",null),t=Object(c.__decorate)([Object(o.a)(),Object(c.__metadata)("design:paramtypes",["function"===typeof(C="undefined"!==typeof E.a&&E.a)?C:Object])],t)}(u.a),n("nnRT")),et=n.n(Ze),tt=n("OhpL"),nt=n("Of9N"),at=n("Qe/l"),it=n("AW4M"),ct=n("vK5G"),ot=n("2bGm"),rt={selectedTags:[],unSelectedTags:{list:[],totalNum:0,loading:!1},recommendTags:[],searchedTags:[],isVerifyingTagSlugs:!1},ut=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=rt,n}var n,a,i,u,d,p,b,l,O,j,g,m,x,F,T,q;return Object(c.__extends)(t,e),t.prototype.resetStore=function(){return rt},t.prototype.setSelectedTags=function(e,t){e.selectedTags=t},t.prototype.setUnSelectedTags=function(e,t){var n=t.tags,a=t.totalNum;e.unSelectedTags={list:n,totalNum:a,loading:!1}},t.prototype.setRecommendTags=function(e,t){e.recommendTags=t},t.prototype.setSearchedTags=function(e,t){e.searchedTags=t},t.prototype.setUnSelectedTagsLoading=function(e){e.unSelectedTags.loading=!0},t.prototype.setIsVerifyingTagSlugs=function(e,t){e.isVerifyingTagSlugs=t},t.prototype.verifyTagSlugs=function(e){var t=this;return e.pipe(Object(v.a)((function(e){return e.length?t.client.query({query:it.a,variables:{slugs:e}}).pipe(Object(D.a)("\u9a8c\u8bc1\u6807\u7b7e\u5931\u8d25",!1,!1),Object(h.b)((function(e){var n=e.data;return Object(y.a)(t.getActions().setSelectedTags(n.commonTags.map((function(e){var t=e.name;return{name:e.nameTranslated||t,slug:e.slug,imgUrl:e.imgUrl}}))),t.getActions().setIsVerifyingTagSlugs(!1))})),Object(k.a)(t.getActions().setIsVerifyingTagSlugs(!0)),Object(w.a)((function(){return Object(y.a)(t.getActions().setSelectedTags([]),t.getActions().setIsVerifyingTagSlugs(!1))}))):Object(y.a)(t.getActions().setSelectedTags([]))})))},t.prototype.getUnSelectedTags=function(e){var t=this;return Object(ye.a)(e.pipe(Object(We.a)()),e.pipe(Object(Ue.a)((function(e,t){return et()(e.selectedTagSlugs,t.selectedTagSlugs)})),Object(Ve.a)(1)),e.pipe(Object(He.a)("query"),Object(Ve.a)(1),Object(be.a)(500))).pipe(Object(v.a)((function(e){var n=e.scope,a=e.query,i=e.selectedTagSlugs,c=function(e){switch(e){case ke.m:return{field:"columnsArticleTags",query:tt.a,errMsg:"\u83b7\u53d6\u6587\u7ae0\u6807\u7b7e\u5931\u8d25"};case ke.o:return{field:"qaQuestionTags",query:nt.a,errMsg:"\u83b7\u53d6\u8ba8\u8bba\u6807\u7b7e\u5931\u8d25"};case ke.w:return{field:"qaCommunityTags",query:at.a,errMsg:"\u83b7\u53d6\u5168\u90e8\u5217\u8868\u6807\u7b7e\u5931\u8d25"}}}(n),o=c.field,r=c.query,u=c.errMsg;return t.client.query({query:r,variables:{query:a,selectedTagSlugs:i}}).pipe(Object(D.a)(u),Object(Y.a)((function(e){var n=e.data[o],a=n.number,i=n.nodes.map((function(e){var t=e.name,n=e.slug;return{name:e.nameTranslated||t,slug:n}}));return t.getActions().setUnSelectedTags({tags:i,totalNum:a})})),Object(k.a)(t.getActions().setUnSelectedTagsLoading()))})),Object(A.a)(this.dispose$),Object(S.a)())},t.prototype.searchTags=function(e){var t=this;return e.pipe(Object(be.a)(300),Object(v.a)((function(e){var n=e.scope,a=e.subjectSlug,i=e.query,c=n===ke.o?I.D.QAndA:I.D.Article;return t.client.query({query:ct.a,variables:{contentType:c,subjectSlug:a,query:i}}).pipe(Object(Y.a)((function(e){var n=e.data.columnsTags.map((function(e){var t=e.name;return{name:e.nameTranslated||t,slug:e.slug,imgUrl:e.imgUrl}}));return t.getActions().setSearchedTags(n)})),Object(w.a)((function(){return _.a})))})))},t.prototype.getRecommendTags=function(e){var t=this;return e.pipe(Object(v.a)((function(e){var n=e.scope,a=e.subjectSlug,i=n===ke.o?I.D.QAndA:I.D.Article;return t.client.query({query:ot.a,variables:{contentType:i,subjectSlug:a}}).pipe(Object(Y.a)((function(e){var n=e.data.columnsRecommendedTags.map((function(e){var t=e.name;return{name:e.nameTranslated||t,slug:e.slug,imgUrl:e.imgUrl}}));return t.getActions().setRecommendTags(n)})),Object(w.a)((function(){return _.a})))})))},Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object)],t.prototype,"dispose$",void 0),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"resetStore",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof f.Draft&&f.Draft)?a:Object,Array]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setSelectedTags",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(i="undefined"!==typeof f.Draft&&f.Draft)?i:Object,Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setUnSelectedTags",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(u="undefined"!==typeof f.Draft&&f.Draft)?u:Object,Array]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setRecommendTags",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(d="undefined"!==typeof f.Draft&&f.Draft)?d:Object,Array]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setSearchedTags",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(p="undefined"!==typeof f.Draft&&f.Draft)?p:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setUnSelectedTagsLoading",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(b="undefined"!==typeof f.Draft&&f.Draft)?b:Object,Boolean]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setIsVerifyingTagSlugs",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(l="undefined"!==typeof s.a&&s.a)?l:Object]),Object(c.__metadata)("design:returntype","function"===typeof(O="undefined"!==typeof s.a&&s.a)?O:Object)],t.prototype,"verifyTagSlugs",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(j="undefined"!==typeof s.a&&s.a)?j:Object]),Object(c.__metadata)("design:returntype","function"===typeof(g="undefined"!==typeof s.a&&s.a)?g:Object)],t.prototype,"getUnSelectedTags",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(m="undefined"!==typeof s.a&&s.a)?m:Object]),Object(c.__metadata)("design:returntype","function"===typeof(x="undefined"!==typeof s.a&&s.a)?x:Object)],t.prototype,"searchTags",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(F="undefined"!==typeof s.a&&s.a)?F:Object]),Object(c.__metadata)("design:returntype","function"===typeof(T="undefined"!==typeof s.a&&s.a)?T:Object)],t.prototype,"getRecommendTags",null),t=Object(c.__decorate)([Object(o.a)(),Object(c.__metadata)("design:paramtypes",["function"===typeof(q="undefined"!==typeof E.a&&E.a)?q:Object])],t)}(u.a),st=n("FhXr"),dt={list:[],totalNum:0,pageNum:1,pageSize:0,loading:!1,hasMore:!0,isEmpty:!1,filter:{orderBy:I.Yb.Hottest,query:""},listParams:{}},pt=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=dt,n}var n,a,i,u,p,b,l,O,j,y,g,h,A,S,x;return Object(c.__extends)(t,e),t.prototype.resetStore=function(){return dt},t.prototype.setLoading=function(e){e.loading=!0},t.prototype.resetIsEmpty=function(e){e.isEmpty=!1},t.prototype.setQuery=function(e,t){e.filter.query=t},t.prototype.setPageNum=function(e,t){e.pageNum=t},t.prototype.setParams=function(e,t){e.listParams=Object(c.__assign)(Object(c.__assign)({},e.listParams),t)},t.prototype.setList=function(e,t){var n=t.totalNum,a=t.list,i=t.pageSize,o=Object(d.h)(a);return Object(c.__assign)(Object(c.__assign)({},e),{list:o,totalNum:null!==n&&void 0!==n?n:0,pageSize:i,loading:!1,isEmpty:!o.length})},t.prototype.clearList=function(e){e.list=[]},t.prototype.getList=function(e,t){var n=this;return e.pipe(Object(be.a)(300),Object(me.a)(t),Object(v.a)((function(e){var t=Object(c.__read)(e,2),a=t[0],i=a.query,o=a.pageNum,r=a.isFeatured,u=a.subjectSlug,s=a.tags,d=a.effect,p=a.sortType,b=t[1].listParams,l={subjectSlug:u,isFeatured:r,pageNum:o-1,query:i,tags:null===s||void 0===s?void 0:s.map((function(e){return e.slug})),sortType:p};return n.client.watchQuery({query:st.a,variables:p?l:b,fetchPolicy:"network-only"}).pipe(Object(m.a)((function(){return null===d||void 0===d?void 0:d()})),Object(Y.a)((function(e){var t=e.data.qaQuestionList,a=t.nodes,i=t.totalNum,c=t.pageSize,o=a.map((function(e){return Object(F.o)(e)}));return n.getActions().setList({totalNum:i,list:o,pageSize:c})})),Object(k.a)(n.getActions().setParams(p?l:{}),n.getActions().setLoading(),n.getActions().resetIsEmpty(),n.getActions().clearList()),Object(w.a)((function(){return _.a})))})))},t.prototype.triggerFetch=function(e,t){var n=this;return e.pipe(Object(me.a)(t),Object(_e.a)((function(e){return!!Object(c.__read)(e,2)[1].pageNum})),Object(Y.a)((function(e){var t=Object(c.__read)(e,2),a=t[0],i=a.subjectSlug,o=a.isFeatured,r=void 0!==o&&o,u=a.tags,s=a.sortType,d=t[1],p=d.filter,b=d.pageNum;return n.getActions().getList(Object(c.__assign)(Object(c.__assign)({},p),{subjectSlug:i,tags:u,pageNum:b,isFeatured:r,sortType:s}))})))},Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object)],t.prototype,"dispose$",void 0),Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(a="undefined"!==typeof s.a&&s.a)?a:Object)],t.prototype,"_disposeByToken$",void 0),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"resetStore",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(i="undefined"!==typeof f.Draft&&f.Draft)?i:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setLoading",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(u="undefined"!==typeof f.Draft&&f.Draft)?u:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"resetIsEmpty",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(p="undefined"!==typeof f.Draft&&f.Draft)?p:Object,String]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setQuery",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(b="undefined"!==typeof f.Draft&&f.Draft)?b:Object,Number]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setPageNum",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(l="undefined"!==typeof f.Draft&&f.Draft)?l:Object,Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setParams",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setList",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(O="undefined"!==typeof f.Draft&&f.Draft)?O:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"clearList",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(j="undefined"!==typeof s.a&&s.a)?j:Object,"function"===typeof(y="undefined"!==typeof s.a&&s.a)?y:Object]),Object(c.__metadata)("design:returntype","function"===typeof(g="undefined"!==typeof s.a&&s.a)?g:Object)],t.prototype,"getList",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(h="undefined"!==typeof s.a&&s.a)?h:Object,"function"===typeof(A="undefined"!==typeof s.a&&s.a)?A:Object]),Object(c.__metadata)("design:returntype","function"===typeof(S="undefined"!==typeof s.a&&s.a)?S:Object)],t.prototype,"triggerFetch",null),t=Object(c.__decorate)([Object(o.a)(),Object(c.__metadata)("design:paramtypes",["function"===typeof(x="undefined"!==typeof E.a&&E.a)?x:Object])],t)}(u.a),bt=n("16zr"),lt=n("iQtu"),ft=n("CItF"),Ot=n("8xqF"),jt=n("Ri8p"),yt=n("awOM"),_t=n("eZYp"),gt={totalNum:0,loading:!1,isEmpty:!1,list:[],page:1,pageSize:ke.g,filter:{queryStr:""}},mt=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=gt,n}var n,a,i,u,p,b;return Object(c.__extends)(t,e),t.prototype.resetStore=function(){return gt},t.prototype.setIsEmpty=function(e,t){return Object(c.__assign)(Object(c.__assign)({},e),{isEmpty:t})},t.prototype.setLoading=function(e){return Object(c.__assign)(Object(c.__assign)({},e),{loading:!0})},t.prototype.setPage=function(e,t){var n,a;return"number"===typeof t?n=t:(n=t.page,a=t.pageSize),Object(c.__assign)(Object(c.__assign)({},e),{page:n,pageSize:a||e.pageSize})},t.prototype.setQuery=function(e,t){return Object(c.__assign)(Object(c.__assign)({},e),{filter:Object(c.__assign)(Object(c.__assign)({},e.filter),{queryStr:t})})},t.prototype.setList=function(e,t){var n=t.totalNum,a=t.list,i=t.page;return Object(c.__assign)(Object(c.__assign)({},e),{totalNum:n,list:Object(d.h)(a),loading:!1,isEmpty:!a.length,page:i})},t.prototype.clearList=function(e){return Object(c.__assign)(Object(c.__assign)({},e),{list:[]})},t.prototype.getList=function(e){var t=this;return Object(ye.a)(e.pipe(Object(We.a)(),Object(Y.a)((function(e){return t.getActions().fetchList(e)}))),e.pipe(Object(He.a)("page"),Object(Ve.a)(1),Object(Y.a)((function(e){return t.getActions().fetchList(e)}))),e.pipe(Object(He.a)("queryStr"),Object(be.a)(500),Object(Ve.a)(1),Object(Y.a)((function(e){return t.getActions().fetchList(Object(c.__assign)(Object(c.__assign)({},e),{page:1}))})))).pipe(Object(A.a)(this.dispose$),Object(S.a)())},t.prototype.fetchList=function(e){var t=this;return e.pipe(Object(Ue.a)(et.a),Object(v.a)((function(e){var n=e.queryStr,a=e.page,i=e.pageSize,o=function(e){switch(e){case ke.q:return{field:"columnsMyArticles",query:bt.a,errMsg:"\u83b7\u53d6\u6211\u7684\u6587\u7ae0\u5931\u8d25",nodeToItem:F.l};case ke.r:return{field:"communityMyComments",query:lt.a,errMsg:"\u83b7\u53d6\u6211\u7684\u8bc4\u8bba\u5931\u8d25",nodeToItem:F.m};case ke.t:return{field:"columnsFavoriteArticles",query:ft.a,errMsg:"\u83b7\u53d6\u6211\u6536\u85cf\u7684\u6587\u7ae0\u5931\u8d25",nodeToItem:F.l};case ke.v:return{field:"columnsMySubscriptionList",query:Ot.a,errMsg:"\u83b7\u53d6\u6211\u5173\u6ce8\u7684\u6587\u7ae0\u5931\u8d25",nodeToItem:F.l};case ke.s:return{field:"qaMyFavoriteQuestionAndAnswers",query:jt.a,errMsg:"\u83b7\u53d6\u6211\u6536\u85cf\u7684\u8ba8\u8bba\u5931\u8d25",nodeToItem:F.p};case ke.p:return{field:"qaMyAnswers",query:yt.a,errMsg:"\u83b7\u53d6\u6211\u7684\u8ba8\u8bba\u5931\u8d25",nodeToItem:d.l};case ke.u:return{field:"qaMyQuestions",query:_t.a,errMsg:"\u83b7\u53d6\u6211\u53d1\u8d77\u7684\u8ba8\u8bba\u5931\u8d25",nodeToItem:F.o}}}(t.scopeName),r=o.field,u=o.query,s=o.errMsg,p=o.nodeToItem;return i=i||t.getState().pageSize,t.client.watchQuery({query:u,variables:Object(c.__assign)(Object(c.__assign)({},t.scopeName===ke.s?{size:i}:{skip:(a-1)*i,first:i,query:n}),{pageNum:a-1}),fetchPolicy:"network-only"}).pipe(Object(D.a)(s,!0),Object(Y.a)((function(e){var n,i=e.data,c=(n=i[r])&&n.edges?{totalNum:n.totalNum||0,nodes:n.edges.map((function(e){return e.node})).filter((function(e){return!!e}))}:n&&n.nodes?{totalNum:n.totalNum||0,nodes:n.nodes.filter((function(e){return!!e}))}:{totalNum:0,nodes:[]},o=c.totalNum,u=c.nodes.map((function(e){return p(e)}));return t.getActions().setList({totalNum:o,list:u,page:a})})),Object(k.a)(t.getActions().setLoading(),t.getActions().setIsEmpty(!1)))})),Object(A.a)(this.dispose$),Object(S.a)())},Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object)],t.prototype,"dispose$",void 0),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"resetStore",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,Boolean]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setIsEmpty",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setLoading",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setPage",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,String]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setQuery",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setList",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"clearList",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof s.a&&s.a)?a:Object]),Object(c.__metadata)("design:returntype","function"===typeof(i="undefined"!==typeof s.a&&s.a)?i:Object)],t.prototype,"getList",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(u="undefined"!==typeof s.a&&s.a)?u:Object]),Object(c.__metadata)("design:returntype","function"===typeof(p="undefined"!==typeof s.a&&s.a)?p:Object)],t.prototype,"fetchList",null),t=Object(c.__decorate)([Object(o.a)(),Object(c.__metadata)("design:paramtypes",["function"===typeof(b="undefined"!==typeof E.a&&E.a)?b:Object])],t)}(u.a),vt=n("77eN"),ht={totalNum:0,loading:!1,isEmpty:!1,list:[],page:1},At=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=ht,n}var n,a,i,u;return Object(c.__extends)(t,e),t.prototype.resetStore=function(){return ht},t.prototype.setIsEmpty=function(e,t){return Object(c.__assign)(Object(c.__assign)({},e),{isEmpty:t})},t.prototype.setLoading=function(e){return Object(c.__assign)(Object(c.__assign)({},e),{loading:!0})},t.prototype.setPage=function(e,t){return Object(c.__assign)(Object(c.__assign)({},e),{page:t})},t.prototype.setList=function(e,t){var n=t.totalNum,a=t.list;return Object(c.__assign)(Object(c.__assign)({},e),{totalNum:n,list:a,loading:!1,isEmpty:!a.length})},t.prototype.clearList=function(e){return Object(c.__assign)(Object(c.__assign)({},e),{list:[]})},t.prototype.getList=function(e){var t=this;return e.pipe(Object(v.a)((function(e){return t.client.query({query:vt.a,variables:{skip:(e-1)*ke.g,first:ke.g},fetchPolicy:"network-only"}).pipe(Object(D.a)("\u83b7\u53d6\u6211\u7684\u8349\u7a3f\u5931\u8d25"),Object(Y.a)((function(e){var n=e.data.columnsMyDrafts,a=n.totalNum,i=n.edges.map((function(e){return Object(F.n)(e.node)}));return t.getActions().setList({totalNum:a,list:i})})),Object(k.a)(t.getActions().setLoading(),t.getActions().setIsEmpty(!1)),Object(A.a)(t.dispose$))})))},Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object)],t.prototype,"dispose$",void 0),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"resetStore",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,Boolean]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setIsEmpty",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setLoading",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,Number]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setPage",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setList",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"clearList",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof s.a&&s.a)?a:Object]),Object(c.__metadata)("design:returntype","function"===typeof(i="undefined"!==typeof s.a&&s.a)?i:Object)],t.prototype,"getList",null),t=Object(c.__decorate)([Object(o.a)(),Object(c.__metadata)("design:paramtypes",["function"===typeof(u="undefined"!==typeof E.a&&E.a)?u:Object])],t)}(u.a),St=(n("OKNS"),n("/ebn")),wt=n("nnm9"),kt=n.n(wt),xt=n("3ppq"),Dt=n("VGbr"),Et=n("6mTI"),Ft=n("wFP2"),Tt=n("hedu"),It=n("4MHO"),qt=n("AWud"),Ct=n("WrKy"),Rt=n("Im1w"),Pt=n("kdZW"),Nt=n("fToa"),Lt=n("cgB0"),Qt=n("jocQ"),Mt=n("rvHU"),Bt=n("Np46"),zt=n("jNK6"),Gt=function(e){function t(t,n){var a=e.call(this)||this;return a.client=t,a.questionDetail=n,a.defaultState={},a}var n,a,i,u,d,p,b,l,f,O,j,y,g,v,A,S,k,x,F,T,C,R,P,N,L,Q,M,z,G,$;return Object(c.__extends)(t,e),t.prototype.togglePinQuestionGlobally=function(e){var t=this;return e.pipe(Object(K.a)((function(e){return t.client.mutate({mutation:xt.a,variables:e}).pipe(Object(D.a)(e.pinned?"\u5168\u7ad9\u7f6e\u9876\u5931\u8d25":"\u53d6\u6d88\u5168\u7ad9\u7f6e\u9876\u5931\u8d25"),Object(m.a)((function(){e.pinned?de.a.discuss.discussPinQuestionGlobally(e.questionId):de.a.discuss.discussCancelPinQuestionGlobally(e.questionId)})),Object(h.b)((function(){return _.a})))})))},t.prototype.togglePinQuestionInSubject=function(e){var t=this;return e.pipe(Object(K.a)((function(e){return t.client.mutate({mutation:Dt.a,variables:e}).pipe(Object(D.a)(e.pinned?"\u677f\u5757\u5185\u7f6e\u9876\u5931\u8d25":"\u53d6\u6d88\u677f\u5757\u5185\u7f6e\u9876\u5931\u8d25"),Object(m.a)((function(){e.pinned?de.a.discuss.discussPinQuestionInSubject(e.questionId):de.a.discuss.discussCancelPinQuestionInSubject(e.questionId)})),Object(h.b)((function(){return _.a})))})))},t.prototype.deleteQuestion=function(e){var t=this;return e.pipe(Object(K.a)((function(e){return t.client.mutate({mutation:Et.a,variables:{uuid:e}}).pipe(Object(D.a)("\u5220\u9664\u8ba8\u8bba\u5931\u8d25"),Object(m.a)((function(){return de.a.discuss.discussDeleteQuestion(e)})),Object(h.b)((function(){return _.a})))})))},t.prototype.managementDeleteQuestion=function(e){var t=this;return e.pipe(Object(K.a)((function(e){return t.client.mutate({mutation:Ft.a,variables:{uuid:e},fallbackErrorMessageForUnknownError:"\u5220\u9664\u8ba8\u8bba\u5931\u8d25"}).pipe(Object(w.a)((function(){return _.a})),Object(m.a)((function(){return de.a.discuss.discussDeleteQuestion(e)})),Object(h.b)((function(){return _.a})))})))},t.prototype.toggleOfficialQuestion=function(e){var t=this;return e.pipe(Object(K.a)((function(e){return t.client.mutate({mutation:Tt.a,variables:e}).pipe(Object(D.a)(e.value?"\u8bbe\u4e3a\u5b98\u65b9\u5931\u8d25":"\u53d6\u6d88\u8bbe\u4e3a\u5b98\u65b9\u5931\u8d25"),Object(m.a)((function(){e.value?de.a.discuss.discussQuestionSetOfficial(e.uuid):de.a.discuss.discussQuestionCancelSetOfficial(e.uuid)})),Object(h.b)((function(){return _.a})))})))},t.prototype.toggleQuestionRecommend=function(e){var t=this;return e.pipe(Object(K.a)((function(e){return t.client.mutate({mutation:It.a,variables:e}).pipe(Object(D.a)(e.value?"\u8bbe\u4e3a\u63a8\u8350\u5931\u8d25":"\u53d6\u6d88\u63a8\u8350\u5931\u8d25"),Object(m.a)((function(){})),Object(h.b)((function(){return _.a})))})))},t.prototype.toggleSubscribeQuestion=function(e){var t=this;return e.pipe(Object(K.a)((function(e){return t.client.mutate({mutation:qt.a,variables:e}).pipe(Object(D.a)(e.subscribed?"\u63a5\u6536\u52a8\u6001\u5931\u8d25":"\u5173\u95ed\u63d0\u9192\u5931\u8d25"),Object(m.a)((function(){e.subscribed?de.a.discuss.discussSubscribeQuestion(e.uuid):de.a.discuss.discussCancelSubscribeQuestion(e.uuid)})),Object(h.b)((function(){return _.a})))})))},t.prototype.toggleFavoriteQuestion=function(e){var t=this;return e.pipe(Object(K.a)((function(e){var n=e.uuid,a=e.isFavorited,i=e.callback,c=void 0===i?kt.a:i,o=a?Ct.a:Rt.a;return a?de.a.discuss.discussArticleRemovedFavorite(n):de.a.discuss.discussArticleAddFavorite(n),t.client.mutate({mutation:o,variables:{uuid:n},refetchQueries:[Object(St.n)(q.a)]}).pipe(Object(D.a)("\u64cd\u4f5c\u5931\u8d25"),Object(Y.a)((function(){return c(),t.questionDetail.getActions().setQuestionFavorite(!a)})))})))},t.prototype.requestToDeleteQuestion=function(e){var t=this;return e.pipe(Object(K.a)((function(e){return t.client.mutate({mutation:Pt.a,variables:e}).pipe(Object(D.a)("\u53d1\u8d77\u5220\u9664\u8ba8\u8bba\u7533\u8bf7\u5931\u8d25"),Object(m.a)((function(){return de.a.discuss.discussRequestToDeleteQuestion(e.uuid)})),Object(h.b)((function(){return _.a})))})))},t.prototype.addQuestionReaction=function(e){var t=this;return e.pipe(Object(K.a)((function(e){var n=e.articleId,a=e.reactionType;return t.client.mutate({mutation:Nt.a,variables:{articleId:n,reactionType:a}}).pipe(Object(m.a)((function(e){var t,n=e.data;null===(t=null===n||void 0===n?void 0:n.columnsAddReaction)||void 0===t||t.ok})),Object(h.b)((function(){return _.a})),Object(w.a)((function(){return _.a})))})))},t.prototype.removeQuestionReaction=function(e){var t=this;return e.pipe(Object(K.a)((function(e){return t.client.mutate({mutation:Lt.a,variables:{articleId:e}}).pipe(Object(m.a)((function(e){var t,n=e.data;null===(t=null===n||void 0===n?void 0:n.columnsRemoveReaction)||void 0===t||t.ok})),Object(h.b)((function(){return _.a})),Object(w.a)((function(){return _.a})))})))},t.prototype.toggleAnswerFavorite=function(e){var t=this;return e.pipe(Object(K.a)((function(e){var n=e.answerId,a=e.favored,i=a?Qt.a:Mt.a,c=a?"\u6536\u85cf\u8ba8\u8bba\u5931\u8d25":"\u53d6\u6d88\u6536\u85cf\u8ba8\u8bba\u5931\u8d25";return t.client.mutate({mutation:i,variables:{answerId:n}}).pipe(Object(D.a)(c),Object(m.a)((function(){a?de.a.discuss.discussAnswerAddFavorite(n):de.a.discuss.discussAnswerRemoveFavorite(n)})),Object(h.b)((function(){return _.a})))})))},t.prototype.setQuestionMetaData=function(e){var t=this;return e.pipe(Object(K.a)((function(e){var n=e.questionId,a=e.metaField,i=e.value,c=a===I.m.AlwaysShow?i?"\u59cb\u7ec8\u663e\u793a\u8ba8\u8bba\u5931\u8d25":"\u53d6\u6d88\u59cb\u7ec8\u663e\u793a\u8ba8\u8bba\u5931\u8d25":i?"\u59cb\u7ec8\u5c55\u5f00\u8ba8\u8bba\u63cf\u8ff0\u5931\u8d25":"\u53d6\u6d88\u59cb\u7ec8\u5c55\u5f00\u8ba8\u8bba\u63cf\u8ff0\u5931\u8d25";return t.client.mutate({mutation:Bt.a,variables:{data:{questionId:n,metaField:a,value:i}}}).pipe(Object(D.a)(c),Object(h.b)((function(){return _.a})))})))},t.prototype.setQuestionAsGlobalRecommendation=function(e){var t=this;return e.pipe(Object(K.a)((function(e){return t.client.mutate({mutation:zt.a,variables:e}).pipe(Object(w.a)((function(){return _.a})),Object(h.b)((function(){return _.a})))})))},Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object]),Object(c.__metadata)("design:returntype","function"===typeof(a="undefined"!==typeof s.a&&s.a)?a:Object)],t.prototype,"togglePinQuestionGlobally",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(i="undefined"!==typeof s.a&&s.a)?i:Object]),Object(c.__metadata)("design:returntype","function"===typeof(u="undefined"!==typeof s.a&&s.a)?u:Object)],t.prototype,"togglePinQuestionInSubject",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(d="undefined"!==typeof s.a&&s.a)?d:Object]),Object(c.__metadata)("design:returntype","function"===typeof(p="undefined"!==typeof s.a&&s.a)?p:Object)],t.prototype,"deleteQuestion",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(b="undefined"!==typeof s.a&&s.a)?b:Object]),Object(c.__metadata)("design:returntype","function"===typeof(l="undefined"!==typeof s.a&&s.a)?l:Object)],t.prototype,"managementDeleteQuestion",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(f="undefined"!==typeof s.a&&s.a)?f:Object]),Object(c.__metadata)("design:returntype","function"===typeof(O="undefined"!==typeof s.a&&s.a)?O:Object)],t.prototype,"toggleOfficialQuestion",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(j="undefined"!==typeof s.a&&s.a)?j:Object]),Object(c.__metadata)("design:returntype","function"===typeof(y="undefined"!==typeof s.a&&s.a)?y:Object)],t.prototype,"toggleQuestionRecommend",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(g="undefined"!==typeof s.a&&s.a)?g:Object]),Object(c.__metadata)("design:returntype","function"===typeof(v="undefined"!==typeof s.a&&s.a)?v:Object)],t.prototype,"toggleSubscribeQuestion",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(A="undefined"!==typeof s.a&&s.a)?A:Object]),Object(c.__metadata)("design:returntype","function"===typeof(S="undefined"!==typeof s.a&&s.a)?S:Object)],t.prototype,"toggleFavoriteQuestion",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(k="undefined"!==typeof s.a&&s.a)?k:Object]),Object(c.__metadata)("design:returntype","function"===typeof(x="undefined"!==typeof s.a&&s.a)?x:Object)],t.prototype,"requestToDeleteQuestion",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(F="undefined"!==typeof s.a&&s.a)?F:Object]),Object(c.__metadata)("design:returntype","function"===typeof(T="undefined"!==typeof s.a&&s.a)?T:Object)],t.prototype,"addQuestionReaction",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(C="undefined"!==typeof s.a&&s.a)?C:Object]),Object(c.__metadata)("design:returntype","function"===typeof(R="undefined"!==typeof s.a&&s.a)?R:Object)],t.prototype,"removeQuestionReaction",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(P="undefined"!==typeof s.a&&s.a)?P:Object]),Object(c.__metadata)("design:returntype","function"===typeof(N="undefined"!==typeof s.a&&s.a)?N:Object)],t.prototype,"toggleAnswerFavorite",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(L="undefined"!==typeof s.a&&s.a)?L:Object]),Object(c.__metadata)("design:returntype","function"===typeof(Q="undefined"!==typeof s.a&&s.a)?Q:Object)],t.prototype,"setQuestionMetaData",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(M="undefined"!==typeof s.a&&s.a)?M:Object]),Object(c.__metadata)("design:returntype","function"===typeof(z="undefined"!==typeof s.a&&s.a)?z:Object)],t.prototype,"setQuestionAsGlobalRecommendation",null),t=Object(c.__decorate)([Object(o.a)(),Object(c.__metadata)("design:paramtypes",["function"===typeof(G="undefined"!==typeof E.a&&E.a)?G:Object,"function"===typeof($="undefined"!==typeof B&&B)?$:Object])],t)}(u.a),$t=n("uapR"),Wt={detail:{},loading:!1},Ht=j()(x.a.main.PATH.discuss.solutionDetail),Vt=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=Wt,n}var n,a,i,o;return Object(c.__extends)(t,e),t.prototype.resetStore=function(){return Wt},t.prototype.fail=function(e){return e},t.prototype.setLoading=function(e){return Object(c.__assign)(Object(c.__assign)({},e),{loading:!0})},t.prototype.setDetail=function(e,t){if(!t)return Object(c.__assign)(Object(c.__assign)({},e),{loading:!1});var n=t.slug,a=t.title,i=t.thumbnail,o=t.content,r=t.reactionType,u=t.reactionsV2,s=t.hitCount,d=t.createdAt,p=t.updatedAt,b=t.isMyFavorite,l=t.identifier,f=t.resourceType,O=t.isEditorsPick,j=t.byLeetcode,y=t.status,_=t.summary,g=t.author,m=g.username,v=g.profile,h=v.userAvatar,A=v.userSlug,S=v.realName,w=t.tags,k=t.topic,x=t.articleType;return Object(c.__assign)(Object(c.__assign)({},e),{detail:Object(c.__assign)(Object(c.__assign)({},e.detail),{slug:n,topicId:k&&k.id,lastCommentCreatedAtInSec:k&&k.lastComment&&k.lastComment.post.creationDate,articleType:x,title:a,cover:i,content:o,reactionType:r,reactionsV2:u||[],viewCount:s,createdAt:d,updatedAt:p&&!Object(F.i)(d,p)?p:null,favored:b,identifier:l,resourceType:f,picked:O,official:j,status:y,summary:_,author:{name:S||m,slug:A,avatar:h},relatedTags:w.map((function(e){var t=e.name,n=e.slug;return{name:e.nameTranslated||t,slug:n}}))}),loading:!1})},t.prototype.getDetail=function(e){var t=this;return e.pipe(Object(m.a)((function(e){return Object(T.a)(t.client,{entityId:e,entityType:I.bb.Article})})),Object(v.a)((function(e){return t.client.watchQuery({query:$t.a,variables:{id:e}}).pipe(Object(D.a)("\u83b7\u53d6\u5b98\u65b9\u9898\u89e3\u8be6\u60c5\u5931\u8d25"),Object(h.a)((function(e){var n=e.data;return Object(y.a)(t.getActions().setDetail(n.solutionArticle),p.a)})),Object(k.a)(t.getActions().setLoading()))})),Object(A.a)(this.dispose$),Object(S.a)())},Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object)],t.prototype,"dispose$",void 0),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"resetStore",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"fail",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setLoading",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setDetail",null),Object(c.__decorate)([Object(b.a)({payloadGetter:function(e,t){var n=e.path.match(Ht);return n&&n[1]?n[1]:t()},skipFirstClientDispatch:!1}),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof s.a&&s.a)?a:Object]),Object(c.__metadata)("design:returntype","function"===typeof(i="undefined"!==typeof s.a&&s.a)?i:Object)],t.prototype,"getDetail",null),t=Object(c.__decorate)([Object(l.a)("SolutionDetailModule"),Object(c.__metadata)("design:paramtypes",["function"===typeof(o="undefined"!==typeof E.a&&E.a)?o:Object])],t)}(u.a),Ut=n("Mk9Z"),Kt={list:[],totalNum:0,loading:!1,isEmpty:!1,page:1,filter:{orderBy:I.n.Hot,query:""}};!function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=Kt,n}var n,a,i,u,p,b,l,O,j,y,_,g,h,w;Object(c.__extends)(t,e),t.prototype.resetStore=function(){return Kt},t.prototype.setLoading=function(e){e.loading=!0},t.prototype.resetIsEmpty=function(e){e.isEmpty=!1},t.prototype.setOrderBy=function(e,t){e.filter.orderBy=t},t.prototype.setQuery=function(e,t){e.filter.query=t},t.prototype.setPage=function(e,t){e.page=t},t.prototype.setList=function(e,t){var n=t.totalNum,a=t.list;return Object(c.__assign)(Object(c.__assign)({},e),{totalNum:n,list:Object(d.h)(a),loading:!1,isEmpty:!a.length})},t.prototype.clearList=function(e){e.list=[]},t.prototype.getSolutions=function(e,t){var n=this;return Object(ye.a)(e.pipe(Object(We.a)(),Object(Y.a)((function(e){return n.getActions().getList(e)}))),e.pipe(Object(He.a)("query"),Object(Ve.a)(1),Object(be.a)(500),Object(me.a)(t),Object(Y.a)((function(e){var t=Object(c.__read)(e,2),a=t[0];return 1!==t[1].page?n.getActions().setPage(1):n.getActions().getList(a)}))),e.pipe(Object(He.a)("orderBy"),Object(Ve.a)(1),Object(me.a)(t),Object(Y.a)((function(e){var t=Object(c.__read)(e,2),a=t[0];return 1!==t[1].page?n.getActions().setPage(1):n.getActions().getList(a)}))),e.pipe(Object(He.a)("page"),Object(Ve.a)(1),Object(Y.a)((function(e){return n.getActions().getList(e)})))).pipe(Object(A.a)(this.dispose$),Object(S.a)())},t.prototype.getList=function(e){var t=this;return e.pipe(Object(m.a)((function(e){var t=e.orderBy,n=e.query,a=e.page;return(0,e.updateQuery)({orderBy:t,query:n,page:a})})),Object(v.a)((function(e){var n=e.orderBy,a=e.query,i=e.page;return t.client.watchQuery({query:Ut.a,variables:{orderBy:n,query:a,skip:(i-1)*ke.g,first:ke.g}}).pipe(Object(D.a)("\u83b7\u53d6\u5b98\u65b9\u9898\u89e3\u5931\u8d25"),Object(Y.a)((function(e){var n=e.data.solutionArticlesByLeetcode,a=n.totalNum,i=n.edges.map((function(e){return Object(F.q)(e.node)}));return t.getActions().setList({totalNum:a||0,list:i})})),Object(k.a)(t.getActions().setLoading(),t.getActions().resetIsEmpty()),Object(A.a)(t.dispose$))})))},Object(c.__decorate)([Object(r.a)(),Object(c.__metadata)("design:type","function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object)],t.prototype,"dispose$",void 0),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"resetStore",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof f.Draft&&f.Draft)?a:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setLoading",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(i="undefined"!==typeof f.Draft&&f.Draft)?i:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"resetIsEmpty",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(u="undefined"!==typeof f.Draft&&f.Draft)?u:Object,"function"===typeof(p="undefined"!==typeof I.n&&I.n)?p:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setOrderBy",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(b="undefined"!==typeof f.Draft&&f.Draft)?b:Object,String]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setQuery",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(l="undefined"!==typeof f.Draft&&f.Draft)?l:Object,Number]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"setPage",null),Object(c.__decorate)([Object(r.d)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",[Object,Object]),Object(c.__metadata)("design:returntype",Object)],t.prototype,"setList",null),Object(c.__decorate)([Object(r.c)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(O="undefined"!==typeof f.Draft&&f.Draft)?O:Object]),Object(c.__metadata)("design:returntype",void 0)],t.prototype,"clearList",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(j="undefined"!==typeof s.a&&s.a)?j:Object,"function"===typeof(y="undefined"!==typeof s.a&&s.a)?y:Object]),Object(c.__metadata)("design:returntype","function"===typeof(_="undefined"!==typeof s.a&&s.a)?_:Object)],t.prototype,"getSolutions",null),Object(c.__decorate)([Object(r.b)(),Object(c.__metadata)("design:type",Function),Object(c.__metadata)("design:paramtypes",["function"===typeof(g="undefined"!==typeof s.a&&s.a)?g:Object]),Object(c.__metadata)("design:returntype","function"===typeof(h="undefined"!==typeof s.a&&s.a)?h:Object)],t.prototype,"getList",null),t=Object(c.__decorate)([Object(o.a)(),Object(c.__metadata)("design:paramtypes",["function"===typeof(w="undefined"!==typeof E.a&&E.a)?w:Object])],t)}(u.a)},qTyD:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"g",(function(){return O})),n.d(t,"a",(function(){return j})),n.d(t,"f",(function(){return y})),n.d(t,"h",(function(){return _})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return v}));var a,i,c,o,r=n("TMWK"),u=n("fgAA"),s=n("iXo+"),d=n("PbXi"),p=n("2yfB"),b=n("/NrN"),l=n("CkJS"),f=Object(r.a)("div",{target:"efnf8qd0"})({marginTop:"44px"},"label:Container;"),O=Object(r.a)("div",{target:"efnf8qd1"})(l.a.heading.h3,{lineHeight:"25px",fontWeight:500,display:"flex",alignItems:"center",color:u.b.LabelSecondary(),paddingBottom:"18px",borderBottom:"1px solid "+u.b.DividerSecondary(),svg:{marginRight:"8px"}},"label:TitleContainer;"),j=Object(r.a)(b.a,{target:"efnf8qd2"})({flex:"0 0 auto",borderRadius:"5px",marginLeft:"auto"},"label:AnswerButton;"),y=Object(r.a)("div",{target:"efnf8qd3"})({display:"flex",alignItems:"center",padding:"0px 8px",marginTop:"20px"},"label:SorterContainer;"),_=Object(r.a)("div",{target:"efnf8qd4"})(l.a.paragraph.sm,{color:u.b.LabelTertiary()},"label:TotalCount;"),g=Object(r.a)("div",{target:"efnf8qd5"})(((a={})[""+s.a]=((i={padding:"20px 8px 4px 8px",boxShadow:"none",borderRadius:"0px",borderBottom:"1px solid "+u.b.DividerSecondary()})[u.c]={boxShadow:"none",background:u.a.grey(1)},i[""+p.j]=((c={})[u.c]={background:u.a.grey(3)},c),i[""+d.b]=((o={})[u.c]={background:u.a.grey(3)},o),i[""+p.c]={borderTop:"none"},i),a),"label:AnswersContainer;"),m=Object(r.a)("div",{target:"efnf8qd6"})({height:"380px"},"label:DefaultContainer;"),v=Object(r.a)("div",{target:"efnf8qd7"})(p.k,{marginTop:"20px",".ant-pagination":{".ant-pagination-item":{fontSize:"14px",lineHeight:"32px",minWidth:"32px",height:"32px"},".ant-pagination-next, .ant-pagination-prev":{fontSize:"16px",lineHeight:"32px",minWidth:"32px",height:"32px"}}},"label:PaginationContainer;")},wbrp:function(e,t,n){"use strict";n.d(t,"e",(function(){return j})),n.d(t,"a",(function(){return a})),n.d(t,"g",(function(){return x})),n.d(t,"f",(function(){return T})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return ce})),n.d(t,"d",(function(){return me})),n.d(t,"h",(function(){return Se}));var a,i=n("D57K"),c=n("5Nzd"),o=n("u3dr"),r=n("2wT7"),u=n("9EWH"),s=n("HnWI"),d=n("AouM"),p=n("Jg5f"),b=n("W/Ou"),l=n("RtDN"),f=n("B07F"),O=n("d294"),j=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState={isRefreshing:!1,whitelist:[]},n}var n,a,r,j,y;return Object(i.__extends)(t,e),t.prototype.refresh=function(e){var t=this;return e.pipe(Object(d.a)((function(){return t.client.query({query:O.a}).pipe(Object(p.a)((function(e){var n=e.data;return t.getActions()._setWhitelist(n.columnsExternalImgHostWhitelist)})),Object(b.a)(t.getActions()._setIsRefreshing(!0)),Object(l.a)(t.getActions()._setIsRefreshing(!1)))})))},t.prototype._setWhitelist=function(e,t){e.whitelist=t},t.prototype._setIsRefreshing=function(e,t){e.isRefreshing=t},Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object]),Object(i.__metadata)("design:returntype","function"===typeof(a="undefined"!==typeof s.a&&s.a)?a:Object)],t.prototype,"refresh",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(r="undefined"!==typeof u.Draft&&u.Draft)?r:Object,Array]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"_setWhitelist",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(j="undefined"!==typeof u.Draft&&u.Draft)?j:Object,Boolean]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"_setIsRefreshing",null),t=Object(i.__decorate)([Object(c.a)(),Object(i.__metadata)("design:paramtypes",["function"===typeof(y="undefined"!==typeof f.a&&f.a)?y:Object])],t)}(r.a),y=n("3riI"),_=n("d9YI"),g=n("pN2L"),m=n("eb+u"),v=n("z5yO"),h=n("G2Mx"),A=n("IMYO"),S=n("4HYP"),w=n("roMe");!function(e){e.ExpandReply="ExpandReply"}(a||(a={}));var k,x=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState={afterScrollEffects:[],scrollIntoViewAnswerId:null},n.fetchAnswerPageInfo=function(e,t){return function(a){return a.pipe(Object(m.a)(e),Object(d.a)((function(a){var c=a,o=Object(i.__read)(c,2),r=o[0],u=o[1].orderBy,s=r.effects,d=Object(i.__rest)(r,["effects"]);return Object(y.b)([e.pipe(Object(p.a)((function(e){return e.pageSize})),Object(v.a)((function(e){return!!e})),Object(h.a)(1)),n.client.query({query:w.a,variables:Object(i.__assign)(Object(i.__assign)({},d),{orderBy:u}),fetchPolicy:"no-cache"}).pipe(Object(A.a)((function(){return _.a})),Object(p.a)((function(e){return e.data.qaAnswerPageInfo})))]).pipe(Object(S.b)((function(e){var a=Object(i.__read)(e,2),c=a[0],o=a[1],r=Math.ceil((o+1)/c);return Object(g.a)(t(r),n.getActions().setAfterScrollEffects(s),n.getActions().setScrollIntoViewAnswerId(d.answerId))})))})))}},n}var n,a,r;return Object(i.__extends)(t,e),t.prototype.setAfterScrollEffects=function(e,t){e.afterScrollEffects=t},t.prototype.setScrollIntoViewAnswerId=function(e,t){e.scrollIntoViewAnswerId=t},Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(n="undefined"!==typeof u.Draft&&u.Draft)?n:Object,Array]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"setAfterScrollEffects",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof u.Draft&&u.Draft)?a:Object,Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"setScrollIntoViewAnswerId",null),t=Object(i.__decorate)([Object(c.a)(),Object(i.__metadata)("design:paramtypes",["function"===typeof(r="undefined"!==typeof f.a&&f.a)?r:Object])],t)}(r.a),D=n("OXN9"),E=n("34li"),F=n("W4BP"),T=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState={replies:[],loading:!0,totalNum:0,pageNum:1},n}var n,a,r,b,l,O;return Object(i.__extends)(t,e),t.prototype.setPageNum=function(e,t){e.pageNum=t},t.prototype.setReplies=function(e,t){var n=t.totalNum,a=t.nodes;e.replies=Object(F.b)(a.map((function(e){return Object(F.f)(e)}))),e.totalNum=n,e.loading=!1},t.prototype.fetchReplies=function(e,t){var n=this;return e.pipe(Object(m.a)(t),Object(d.a)((function(e){var t=Object(i.__read)(e,2),a=t[0],c=t[1].pageNum;return n.client.watchQuery({query:D.a,variables:Object(i.__assign)(Object(i.__assign)({},a),{orderBy:E.Yb.Latest,pageSize:5,pageNum:c-1})}).pipe(Object(A.a)((function(){return _.a})),Object(p.a)((function(e){var t=e.data;return n.getActions().setReplies(t.qaReplies)})))})))},Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(n="undefined"!==typeof u.Draft&&u.Draft)?n:Object,Number]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"setPageNum",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof u.Draft&&u.Draft)?a:Object,Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"setReplies",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(r="undefined"!==typeof s.a&&s.a)?r:Object,"function"===typeof(b="undefined"!==typeof s.a&&s.a)?b:Object]),Object(i.__metadata)("design:returntype","function"===typeof(l="undefined"!==typeof s.a&&s.a)?l:Object)],t.prototype,"fetchReplies",null),t=Object(i.__decorate)([Object(c.a)(),Object(i.__metadata)("design:paramtypes",["function"===typeof(O="undefined"!==typeof f.a&&f.a)?O:Object])],t)}(r.a),I=n("/ebn"),q=n("H8sf"),C=n.n(q),R=n("//nZ"),P=n.n(R),N=n("3dHC"),L=n.n(N),Q=n("iJR/"),M=n("U3QC"),B=n("3n3h"),z=n("icD7"),G=n("Pu0A"),$=n.n(G),W=n("xdqw"),H=n("wUZp"),V=n("I6BV"),U=n("fGMb"),K=n("WSJ0"),Y=n("DFG/"),X=n("eQ0Q"),J=n("qhMO"),Z=n("0OXR"),ee=n("L6nh"),te=n("A83I");!function(e){e.Edit="Edit",e.Preview="Preview"}(k||(k={}));var ne=["content"],ae=Object(W.b)("discuss-answer-editor"),ie=function(e){return"draft-"+e},ce=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=oe(null),n}var n,a,r,O,j,y,v,h,A,w,k,x,D,E,T,q,R,N,G,W,ce,re,ue,se,de,pe,be,le,fe,Oe,je,ye,_e,ge,me,ve,he,Ae;return Object(i.__extends)(t,e),t.prototype.save=function(e,t){var n=this;return e.pipe(Object(m.a)(t),Object(M.a)((function(e){var t=Object(i.__read)(e,2),n=t[0],a=t[1];if(null===a.uuid&&a.question){var c=C()(P()(a,ne),n);ae.set(ie(a.question.uuid),c)}})),Object(p.a)((function(e){var t=Object(i.__read)(e,1)[0];return n.getActions()._save(t)})))},t.prototype._save=function(e,t){var n=Object(i.__assign)(Object(i.__assign)({},e),t),a=!$()(n,e),c=e.isShowLocalDraftTips&&!a;return Object(i.__assign)(Object(i.__assign)({},n),{hasChanged:a,isShowLocalDraftTips:c})},t.prototype.setContent=function(e,t){e.content=t},t.prototype.setDraft=function(e,t){var n=t.content,a=t.questionUuid;ae.set(ie(a),{content:n}),e.content=n},t.prototype.setAnonymous=function(e,t){e.anonymous=t},t.prototype.setReplyToAnswerId=function(e,t){e.replyToAnswerId=t},t.prototype.setReplyToAuthorName=function(e,t){e.replyToAuthorName=t},t.prototype.setAfterPublishEffect=function(e,t){e.afterPublishEffect=t},t.prototype.switchMode=function(e,t){e.mode=t},t.prototype.toggleFullscreen=function(e){e.isFullscreen=!e.isFullscreen},t.prototype.hideLocalDraftTips=function(e){e.isShowLocalDraftTips=!1},t.prototype.resetEditor=function(e){var t=this;return e.pipe(Object(S.b)((function(){return Object(g.a)(t.getActions()._reset(),t.getActions()._removeDraft())})))},t.prototype._removeDraft=function(e,t){return e.pipe(Object(m.a)(t),Object(M.a)((function(e){var t=Object(i.__read)(e,2)[1].question;t&&ae.remove(ie(t.uuid))})),Object(B.a)(_.a))},t.prototype._reset=function(e){return Object(i.__assign)(Object(i.__assign)({},oe(e.question)),{isShow:!0})},t.prototype.hideEditor=function(e){e.isShow=!1,e.replyToAnswerId=null,e.replyToAuthorName=null,e.afterPublishEffect=null},t.prototype.showEditor=function(e){var t=this;return e.pipe(Object(d.a)((function(e){return t.client.query({query:V.a,variables:{uuid:e}}).pipe(Object(d.a)((function(e){var n=e.data;return n.qaQuestion?Object(g.a)(t.getActions()._showEditor(n.qaQuestion)):_.a})),Object(b.a)(t.getActions()._setIsRestoring(!0)),Object(l.a)(t.getActions()._setIsRestoring(!1)))})))},t.prototype._showEditor=function(e,t){var n=(ae.get(ie(t.uuid))||{}).content,a=void 0===n?"":n;return Object(i.__assign)(Object(i.__assign)({},oe(t)),{isShow:!0,isShowLocalDraftTips:!!a,content:a,replyToAnswerId:e.replyToAnswerId,replyToAuthorName:e.replyToAuthorName,afterPublishEffect:e.afterPublishEffect})},t.prototype.restoreEditor=function(e){var t=this;return e.pipe(Object(d.a)((function(e){return t.client.query({query:U.a,variables:{uuid:e}}).pipe(Object(d.a)((function(e){var n=e.data;return n&&n.qaAnswer?Object(g.a)(t.getActions()._restore(Object(F.f)(n.qaAnswer))):_.a})),Object(H.a)("\u6062\u590d\u7f16\u8f91\u5185\u5bb9\u5931\u8d25"),Object(b.a)(t.getActions()._setIsRestoring(!0)),Object(l.a)(t.getActions()._setIsRestoring(!1)))})))},t.prototype._restore=function(e,t){var n,a,c,o;return Object(i.__assign)(Object(i.__assign)({},oe(t.parent||null)),{isShow:!0,content:t.content,uuid:t.uuid,isPicked:t.picked,anonymous:t.isAnonymous,replyToAnswerId:null!==(a=null===(n=t.replyTo)||void 0===n?void 0:n.uuid)&&void 0!==a?a:null,replyToAuthorName:null!==(o=null===(c=t.replyTo)||void 0===c?void 0:c.author.name)&&void 0!==o?o:null,afterPublishEffect:e.afterPublishEffect})},t.prototype._setIsRestoring=function(e,t){e.isRestoring=t},t.prototype.publish=function(e,t){return this._publish({trigger$:e,state$:t,mutation:K.a})},t.prototype.mock=function(e,t){return this._publish({trigger$:e,state$:t,mutation:Y.a})},t.prototype.update=function(e){var t=this;return e.pipe(Object(d.a)((function(e){return e.pipe(Object(d.a)((function(e){return t.client.mutate({variables:e,mutation:X.a}).pipe(Object(H.a)("\u66f4\u65b0\u8ba8\u8bba\u5931\u8d25"),Object(p.a)((function(e){var t=e.data;return t&&t.qaEditAnswer})),Object(d.a)((function(e){return e&&e.answer?Object(g.a)(t.getActions().hideEditor()):_.a})),Object(b.a)(t.getActions()._setIsSubmitting(!0)),Object(l.a)(t.getActions()._setIsSubmitting(!1)))})))})))},t.prototype._setIsSubmitting=function(e,t){e.isSubmitting=t},t.prototype.addAnswerNodeReplyCount=function(e){var t=this;return e.pipe(Object(M.a)((function(e){var n="QAAnswerNode:"+e;try{var a=t.client.readFragment({id:n,fragmentName:"qaAnswer",fragment:J.a});a&&t.client.writeFragment({id:n,fragment:J.a,fragmentName:"qaAnswer",data:Object(i.__assign)(Object(i.__assign)({},a),{totalRepliesNum:a.totalRepliesNum+1})})}catch(e){}})),Object(z.a)())},t.prototype._publish=function(e){var t=this,n=e.trigger$,a=e.state$,c=e.mutation;return n.pipe(Object(d.a)((function(e){return e.pipe(Object(d.a)((function(e){return t.client.mutate({variables:e,mutation:c,update:Object(F.a)(/qaAnswerListV2|qaReplies/),refetchQueries:L()([Object(I.n)(Z.a)])}).pipe(Object(H.a)("\u53d1\u5e03\u8ba8\u8bba\u5931\u8d25"),Object(p.a)((function(e){var t=e.data;if(t)return"qaPublishAnswer"in t?t.qaPublishAnswer:"qaOfficialPublishAnswer"in t?t.qaOfficialPublishAnswer:void 0})),Object(m.a)(a),Object(M.a)((function(e){var t=Object(i.__read)(e,2),n=t[0],a=t[1].afterPublishEffect;(null===n||void 0===n?void 0:n.answer)&&(null===a||void 0===a||a(n.answer.uuid))})),Object(d.a)((function(n){var a=Object(i.__read)(n,1)[0];if(a&&a.answer){var c=[t.getActions().hideEditor(),t.getActions()._removeDraft()];return e.data.replyTo&&c.push(t.getActions().addAnswerNodeReplyCount(e.data.replyTo)),Object(Q.a)(c)}return _.a})),Object(b.a)(t.getActions()._setIsSubmitting(!0)),Object(l.a)(t.getActions()._setIsSubmitting(!1)))})))})))},Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object,"function"===typeof(a="undefined"!==typeof s.a&&s.a)?a:Object]),Object(i.__metadata)("design:returntype","function"===typeof(r="undefined"!==typeof s.a&&s.a)?r:Object)],t.prototype,"save",null),Object(i.__decorate)([Object(o.d)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",[Object,"function"===typeof(O="undefined"!==typeof SaveInput&&SaveInput)?O:Object]),Object(i.__metadata)("design:returntype",Object)],t.prototype,"_save",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(j="undefined"!==typeof u.Draft&&u.Draft)?j:Object,String]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"setContent",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(y="undefined"!==typeof u.Draft&&u.Draft)?y:Object,Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"setDraft",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(v="undefined"!==typeof u.Draft&&u.Draft)?v:Object,Boolean]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"setAnonymous",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(h="undefined"!==typeof u.Draft&&u.Draft)?h:Object,String]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"setReplyToAnswerId",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(A="undefined"!==typeof u.Draft&&u.Draft)?A:Object,Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"setReplyToAuthorName",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(w="undefined"!==typeof u.Draft&&u.Draft)?w:Object,Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"setAfterPublishEffect",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(k="undefined"!==typeof u.Draft&&u.Draft)?k:Object,String]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"switchMode",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(x="undefined"!==typeof u.Draft&&u.Draft)?x:Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"toggleFullscreen",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(D="undefined"!==typeof u.Draft&&u.Draft)?D:Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"hideLocalDraftTips",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(E="undefined"!==typeof s.a&&s.a)?E:Object]),Object(i.__metadata)("design:returntype","function"===typeof(T="undefined"!==typeof s.a&&s.a)?T:Object)],t.prototype,"resetEditor",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(q="undefined"!==typeof s.a&&s.a)?q:Object,"function"===typeof(R="undefined"!==typeof s.a&&s.a)?R:Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"_removeDraft",null),Object(i.__decorate)([Object(o.d)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",[Object]),Object(i.__metadata)("design:returntype",Object)],t.prototype,"_reset",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(N="undefined"!==typeof u.Draft&&u.Draft)?N:Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"hideEditor",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(G="undefined"!==typeof s.a&&s.a)?G:Object]),Object(i.__metadata)("design:returntype","function"===typeof(W="undefined"!==typeof s.a&&s.a)?W:Object)],t.prototype,"showEditor",null),Object(i.__decorate)([Object(o.d)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",[Object,"function"===typeof(ce="undefined"!==typeof ee.QaQuestionDetail&&ee.QaQuestionDetail.QaQuestion)?ce:Object]),Object(i.__metadata)("design:returntype",Object)],t.prototype,"_showEditor",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(re="undefined"!==typeof s.a&&s.a)?re:Object]),Object(i.__metadata)("design:returntype","function"===typeof(ue="undefined"!==typeof s.a&&s.a)?ue:Object)],t.prototype,"restoreEditor",null),Object(i.__decorate)([Object(o.d)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(se="undefined"!==typeof u.Draft&&u.Draft)?se:Object,"function"===typeof(de="undefined"!==typeof te.Answer&&te.Answer)?de:Object]),Object(i.__metadata)("design:returntype",Object)],t.prototype,"_restore",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(pe="undefined"!==typeof u.Draft&&u.Draft)?pe:Object,Boolean]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"_setIsRestoring",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(be="undefined"!==typeof s.a&&s.a)?be:Object,"function"===typeof(le="undefined"!==typeof s.a&&s.a)?le:Object]),Object(i.__metadata)("design:returntype","function"===typeof(fe="undefined"!==typeof s.a&&s.a)?fe:Object)],t.prototype,"publish",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(Oe="undefined"!==typeof s.a&&s.a)?Oe:Object,"function"===typeof(je="undefined"!==typeof s.a&&s.a)?je:Object]),Object(i.__metadata)("design:returntype","function"===typeof(ye="undefined"!==typeof s.a&&s.a)?ye:Object)],t.prototype,"mock",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(_e="undefined"!==typeof s.a&&s.a)?_e:Object]),Object(i.__metadata)("design:returntype","function"===typeof(ge="undefined"!==typeof s.a&&s.a)?ge:Object)],t.prototype,"update",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(me="undefined"!==typeof u.Draft&&u.Draft)?me:Object,Boolean]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"_setIsSubmitting",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(ve="undefined"!==typeof s.a&&s.a)?ve:Object]),Object(i.__metadata)("design:returntype","function"===typeof(he="undefined"!==typeof s.a&&s.a)?he:Object)],t.prototype,"addAnswerNodeReplyCount",null),t=Object(i.__decorate)([Object(c.a)(),Object(i.__metadata)("design:paramtypes",["function"===typeof(Ae="undefined"!==typeof f.a&&f.a)?Ae:Object])],t)}(r.a);function oe(e){return{isShow:!1,isFullscreen:!1,isSubmitting:!1,isRestoring:!1,hasChanged:!1,isShowLocalDraftTips:!1,mode:k.Edit,question:e,content:"",uuid:null,isPicked:!1,anonymous:!1,replyToAnswerId:null,replyToAuthorName:null,afterPublishEffect:null}}var re=n("DuHN"),ue=(n("IJu9"),n("rzNM")),se=n("mlcS"),de=n("ynm0"),pe=n("pNJ9"),be=n("mbTx"),le=n("3J0q"),fe=n("ASxh"),Oe=n("6Hwb"),je=n("jocQ"),ye=n("rvHU"),_e=n("8S98"),ge=n("VxrX"),me=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState={},n}var n,a,r,u,d,p,b,l,O,j,y,g,m,v,h;return Object(i.__extends)(t,e),t.prototype.toggleSunk=function(e){var t=this;return e.pipe(Object(ue.a)((function(e){return t.client.mutate({mutation:se.a,variables:e,update:function(e,t){var n,a=t.data;ve(e,null===(n=null===a||void 0===a?void 0:a.qaToggleSunk)||void 0===n?void 0:n.questionAnswer)}}).pipe(Object(H.a)(e.sunk?"\u4e0b\u6c89\u5931\u8d25":"\u53d6\u6d88\u4e0b\u6c89\u5931\u8d25"),Object(S.b)((function(){return _.a})))})))},t.prototype.togglePinAnswerInQuestion=function(e){var t=this;return e.pipe(Object(ue.a)((function(e){return t.client.mutate({mutation:de.a,variables:e,update:function(e,t){var n,a=t.data;ve(e,null===(n=null===a||void 0===a?void 0:a.qaTogglePinAnswerInQuestion)||void 0===n?void 0:n.answer)}}).pipe(Object(H.a)(e.pinned?"\u677f\u5757\u5185\u7f6e\u9876\u5931\u8d25":"\u53d6\u6d88\u677f\u5757\u5185\u7f6e\u9876\u5931\u8d25"),Object(M.a)((function(){e.pinned?ge.a.discuss.discussPinAnswerInQuestion(e.answerId):ge.a.discuss.discussCancelPinAnswerInQuestion(e.answerId)})),Object(S.b)((function(){return _.a})))})))},t.prototype.deleteAnswer=function(e){var t=this;return e.pipe(Object(ue.a)((function(e){var n=e.answerId;return t.client.mutate({mutation:pe.a,variables:{uuid:n},update:function(e,t){var n,a=t.data;ve(e,null===(n=null===a||void 0===a?void 0:a.qaDeleteAnswer)||void 0===n?void 0:n.answer)}}).pipe(Object(H.a)("\u5220\u9664\u8ba8\u8bba\u5931\u8d25"),Object(M.a)((function(){return ge.a.discuss.discussDeleteArticle(n)})),Object(S.b)((function(){return _.a})))})))},t.prototype.managementDeleteAnswer=function(e){var t=this;return e.pipe(Object(ue.a)((function(e){var n=e.answerId;return t.client.mutate({mutation:be.a,variables:{uuid:n},fallbackErrorMessageForUnknownError:"\u5220\u9664\u8ba8\u8bba\u5931\u8d25",update:function(e,t){var n,a=t.data;ve(e,null===(n=null===a||void 0===a?void 0:a.qaManagementDeleteAnswer)||void 0===n?void 0:n.answer)}}).pipe(Object(A.a)((function(){return _.a})),Object(M.a)((function(){return ge.a.discuss.discussDeleteArticle(n)})),Object(S.b)((function(){return _.a})))})))},t.prototype.togglePickedAnswer=function(e){var t=this;return e.pipe(Object(ue.a)((function(e){return t.client.mutate({mutation:le.a,variables:e,update:function(e,t){var n,a=t.data;ve(e,null===(n=null===a||void 0===a?void 0:a.qaSetAnswerAsEditorsPick)||void 0===n?void 0:n.answer)}}).pipe(Object(H.a)(e.value?"\u8bbe\u4e3a\u7cbe\u9009\u5931\u8d25":"\u53d6\u6d88\u8bbe\u4e3a\u7cbe\u9009\u5931\u8d25"),Object(M.a)((function(){e.value?ge.a.discuss.discussAnswerSetPicked(e.uuid):ge.a.discuss.discussAnswerCancelSetPicked(e.uuid)})),Object(S.b)((function(){return _.a})))})))},t.prototype.toggleAnswerReaction=function(e){var t=this;return e.pipe(Object(ue.a)((function(e){var n=e.articleId,a=e.reactionType,i=a?fe.a:Oe.a,c=a?{articleId:n,reactionType:a}:{articleId:n},o=a?"\u6dfb\u52a0\u8ba8\u8bba\u53cd\u54cd\u5931\u8d25":"\u53d6\u6d88\u8ba8\u8bba\u53cd\u54cd\u5931\u8d25";return t.client.mutate({mutation:i,variables:c}).pipe(Object(H.a)(o),Object(M.a)((function(){a?ge.a.discuss.discussAnswerAddReaction(n):ge.a.discuss.discussAnswerRemoveReaction(n)})),Object(S.b)((function(){return _.a})))})))},t.prototype.toggleAnswerFavorite=function(e){var t=this;return e.pipe(Object(ue.a)((function(e){var n=e.answerId,a=e.favored,i=a?je.a:ye.a,c=a?"\u6536\u85cf\u8ba8\u8bba\u5931\u8d25":"\u53d6\u6d88\u6536\u85cf\u8ba8\u8bba\u5931\u8d25";return t.client.mutate({mutation:i,variables:{answerId:n}}).pipe(Object(H.a)(c),Object(M.a)((function(){a?(ge.a.discuss.discussAnswerAddFavorite(n),re.b.success("\u5df2\u6536\u85cf")):(ge.a.discuss.discussAnswerRemoveFavorite(n),re.b.success("\u5df2\u53d6\u6d88\u6536\u85cf"))})),Object(S.b)((function(){return _.a})))})))},Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object]),Object(i.__metadata)("design:returntype","function"===typeof(a="undefined"!==typeof s.a&&s.a)?a:Object)],t.prototype,"toggleSunk",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(r="undefined"!==typeof s.a&&s.a)?r:Object]),Object(i.__metadata)("design:returntype","function"===typeof(u="undefined"!==typeof s.a&&s.a)?u:Object)],t.prototype,"togglePinAnswerInQuestion",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(d="undefined"!==typeof s.a&&s.a)?d:Object]),Object(i.__metadata)("design:returntype","function"===typeof(p="undefined"!==typeof s.a&&s.a)?p:Object)],t.prototype,"deleteAnswer",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(b="undefined"!==typeof s.a&&s.a)?b:Object]),Object(i.__metadata)("design:returntype","function"===typeof(l="undefined"!==typeof s.a&&s.a)?l:Object)],t.prototype,"managementDeleteAnswer",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(O="undefined"!==typeof s.a&&s.a)?O:Object]),Object(i.__metadata)("design:returntype","function"===typeof(j="undefined"!==typeof s.a&&s.a)?j:Object)],t.prototype,"togglePickedAnswer",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(y="undefined"!==typeof s.a&&s.a)?y:Object]),Object(i.__metadata)("design:returntype","function"===typeof(g="undefined"!==typeof s.a&&s.a)?g:Object)],t.prototype,"toggleAnswerReaction",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(m="undefined"!==typeof s.a&&s.a)?m:Object]),Object(i.__metadata)("design:returntype","function"===typeof(v="undefined"!==typeof s.a&&s.a)?v:Object)],t.prototype,"toggleAnswerFavorite",null),t=Object(i.__decorate)([Object(c.a)(),Object(i.__metadata)("design:paramtypes",["function"===typeof(h="undefined"!==typeof f.a&&f.a)?h:Object])],t)}(r.a);function ve(e,t){if(t){var n="LeetbookPickedDiscussionNode:"+t.uuid,a=e.readFragment({id:n,fragment:_e.a,fragmentName:"leetbookPickedDiscussion"});a&&e.writeFragment({id:n,fragment:_e.a,fragmentName:"leetbookPickedDiscussion",data:Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({},a),t),{__typename:"LeetbookPickedDiscussionNode"})})}}var he=n("fgzu"),Ae=n("f9L7"),Se=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState={},n}var n,a,r;return Object(i.__extends)(t,e),t.prototype.setFeaturedRequest=function(e){var t=this;return e.pipe(Object(ue.a)((function(e){return t.client.mutate({mutation:Ae.a,variables:e}).pipe(Object(H.a)("\u7533\u8bf7\u63d0\u4ea4\u5931\u8d25"),Object(M.a)((function(){return he.a.success("\u7533\u8bf7\u63d0\u4ea4\u6210\u529f")})),Object(S.b)((function(){return _.a})))})))},Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(n="undefined"!==typeof s.a&&s.a)?n:Object]),Object(i.__metadata)("design:returntype","function"===typeof(a="undefined"!==typeof s.a&&s.a)?a:Object)],t.prototype,"setFeaturedRequest",null),t=Object(i.__decorate)([Object(c.a)(),Object(i.__metadata)("design:paramtypes",["function"===typeof(r="undefined"!==typeof f.a&&f.a)?r:Object])],t)}(r.a)},yxrP:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p}));var a=n("TMWK"),i=n("daAW"),c=n("fgAA"),o=n("hMUt"),r=n("Po8h"),u=Object(a.a)(r.d,{target:"e1d9sgfx0"})({margin:"0 8px",transition:"none"},"label:CompactOperationButton;"),s=Object(a.a)(u,{target:"e1d9sgfx1"})((function(e){return{margin:"0 8px",transition:"none",color:e.isFavorited?c.b.BrandOrange():c.b.LabelTertiary(),"&:hover > svg":{color:c.b.BrandOrange()},"&:hover > span":{color:c.b.BrandOrange()}}}),"label:CompactOperationOrangeButton;"),d=Object(a.a)(i.a,{target:"e1d9sgfx2"})({color:c.b.BaseGrey6(),display:"inline-flex",alignItems:"center",margin:"0 8px",svg:{marginRight:"4px"},"&:hover, &:active":{color:c.b.BlueStandard()}},"label:OperationLink;"),p=Object(a.a)(o.b,{target:"e1d9sgfx3"})({marginLeft:"auto",marginRight:"16px",lineHeight:"22px"},"label:QuestionReplyButton;")},zF28:function(e,t,n){"use strict";n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"a",(function(){return A})),n.d(t,"f",(function(){return w}));var a=n("D57K"),i=n("K/af"),c=n("H8sf"),o=n.n(c),r=n("ERkP"),u=n.n(r),s=n("zCf4"),d=n("YnR9"),p=n("xqpu"),b=n("UqMZ"),l=n("34li"),f=n("VxrX"),O=n("wbrp"),j=d.a.main.paths,y=function(e,t,n){var i=e.slug,c=e.uuid,o=e.author,r=e.reactionType,u=e.reactionsV2,s=e.favored,d=e.picked,p=e.parent,O=e.articleType,y=e.identifier,_=e.resourceType,g=e.pinned,m=e.sunk,v=e.canEdit,h=e.favoriteCount,A=e.status,S=o&&o.slug,w=n.userSlug===S;return{reactionV2:Object(a.__assign)({articleId:c,onReact:function(e){var n=e.reactedWith,a=e.articleId,i=e.prevReactedWith,c=i&&n===i?void 0:n;t.toggleAnswerReaction({articleId:a,reactionType:c})},reactedWith:r},u&&u.length?{countMap:new Map(u.map((function(e){return[e.reactionType,e.count]})))}:{}),favor:{favored:s,favoriteCount:h,toggleFavorite:b.a.ensureSignedIn((function(){return t.toggleAnswerFavorite({answerId:c,favored:!s})}),{user:n})},share:{link:"https://leetcode.cn"+j.discuss.viewShare({discussId:p.uuid,viewId:c}),onClick:function(){return f.a.discuss.discussShareAnswer(c)}},extraButton:{uuid:c,canEdit:v,isAuthor:w,type:O,resourceId:y,resourceType:_,status:A,requestToFeatured:function(){return t.setFeaturedRequest({slug:i,resourceType:l.eb.Reply})},onDelete:function(){return n.isAdmin?t.managementDeleteAnswer({questionId:p.uuid,answerId:c}):t.deleteAnswer({questionId:p.uuid,answerId:c})},pin:{text:"\u8ba8\u8bba\u5185\u7f6e\u9876",pinnedInSubject:g,togglePinnedInSubject:function(){return t.togglePinAnswerInQuestion({answerId:c,pinned:!g})}},sink:{sunk:m,toggleSunk:function(){return t.toggleSunk({uuid:c,sunk:!m})}},selection:{picked:d,togglePicked:function(){return t.togglePickedAnswer({uuid:c,value:!d})}}}}},_=function(e){var t=Object(s.h)(),n=Object(a.__read)(Object(i.a)(O.d),2)[1],c=Object(a.__read)(Object(i.a)(O.h),2)[1].setFeaturedRequest,o=Object(r.useContext)(p.d),u=y(e,Object(a.__assign)(Object(a.__assign)({},n),{setFeaturedRequest:c}),o),d=e.uuid,b=e.parent,l={reply:{count:e.totalRepliesNum,onReply:function(){return t.push(j.discuss.viewCommentShare({discussId:b.uuid,viewId:d}))}}};return Object(r.useMemo)((function(){return Object(a.__assign)(Object(a.__assign)({},u),l)}),[e,o])},g=function(e){var t=e.answer,n=e.onEdit,c=e.onReply,u=e.isReplyExpanded,s=Object(a.__read)(Object(i.a)(O.d),2)[1],d=Object(a.__read)(Object(i.a)(O.h),2)[1].setFeaturedRequest,b=Object(r.useContext)(p.d),l=y(t,Object(a.__assign)(Object(a.__assign)({},s),{setFeaturedRequest:d}),b),f={extraButton:{onEdit:n},reply:c&&{isExpanded:u,count:t.totalRepliesNum,onReply:c}};return Object(r.useMemo)((function(){return o()({},l,f)}),[t,n,c,b])};function m(){var e=Object(a.__read)(Object(i.a)(O.c),2),t=e[0].isShow,n=e[1];return Object(r.useCallback)((function(e){t?n.hideEditor():n.restoreEditor(e)}),[t,n])}var v=n("ehcH");function h(e){var t=Object(a.__read)(Object(i.a)(O.c),2),n=t[0].isShow,c=t[1],o=Object(r.useContext)(p.d),u=Object(v.b)();return Object(r.useCallback)((function(t,a,i){b.a.ensurePhoneVerified(u((function(){n?c.hideEditor():requestAnimationFrame((function(){c.showEditor(e),c.setReplyToAnswerId(t),c.setReplyToAuthorName(a),c.setAfterPublishEffect(i)}))})),{user:o})()}),[u,n,c,e,o])}function A(e){var t=e.qaQuestionUuid,n=e.fetchAnswerPageInfo,c=e.onReply,o=Object(a.__read)(Object(i.a)(O.c),2),u=o[0].isShow,s=o[1],d=Object(r.useContext)(p.d),l=Object(v.b)();return b.a.ensurePhoneVerified(l((function(){null===c||void 0===c||c(),u?s.hideEditor():requestAnimationFrame((function(){s.setAfterPublishEffect((function(e){n({answerId:e,effects:[]})})),s.setReplyToAuthorName(null),s.setDraft({questionUuid:t,content:""}),s.showEditor(t)}))})),{user:d})}var S=n("+SGW");function w(){var e=Object(r.useRef)(null),t=Object(r.useCallback)((function(){e.current&&Object(S.default)(e.current,{block:"center"})}),[e]);return[u.a.createElement("div",{ref:e}),t]}}}]);